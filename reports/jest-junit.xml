<?xml version="1.0" encoding="UTF-8"?>
<testsuites name="jest tests" tests="968" failures="210" errors="0" time="18.759">
  <testsuite name="SSE Connection Establishment and MCP Handshake Testing" errors="0" failures="17" skipped="0" timestamp="2025-06-19T14:52:56" time="2.904" tests="17">
    <testcase classname="SSE Connection Establishment and MCP Handshake Testing Basic SSE Connection Establishment should establish SSE connection within expected timeframe" name="SSE Connection Establishment and MCP Handshake Testing Basic SSE Connection Establishment should establish SSE connection within expected timeframe" time="0.114">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/sse-connection-handshake.test.ts:224:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="SSE Connection Establishment and MCP Handshake Testing Basic SSE Connection Establishment should handle multiple simultaneous SSE connections" name="SSE Connection Establishment and MCP Handshake Testing Basic SSE Connection Establishment should handle multiple simultaneous SSE connections" time="0.103">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/sse-connection-handshake.test.ts:224:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="SSE Connection Establishment and MCP Handshake Testing Basic SSE Connection Establishment should send initial connection confirmation message" name="SSE Connection Establishment and MCP Handshake Testing Basic SSE Connection Establishment should send initial connection confirmation message" time="0.103">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/sse-connection-handshake.test.ts:224:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="SSE Connection Establishment and MCP Handshake Testing Basic SSE Connection Establishment should maintain heartbeat mechanism" name="SSE Connection Establishment and MCP Handshake Testing Basic SSE Connection Establishment should maintain heartbeat mechanism" time="0.102">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/sse-connection-handshake.test.ts:224:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="SSE Connection Establishment and MCP Handshake Testing MCP Protocol Handshake should complete proper MCP initialization handshake" name="SSE Connection Establishment and MCP Handshake Testing MCP Protocol Handshake should complete proper MCP initialization handshake" time="0.103">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/sse-connection-handshake.test.ts:224:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="SSE Connection Establishment and MCP Handshake Testing MCP Protocol Handshake should support capability negotiation" name="SSE Connection Establishment and MCP Handshake Testing MCP Protocol Handshake should support capability negotiation" time="0.102">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/sse-connection-handshake.test.ts:224:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="SSE Connection Establishment and MCP Handshake Testing MCP Protocol Handshake should handle invalid handshake messages gracefully" name="SSE Connection Establishment and MCP Handshake Testing MCP Protocol Handshake should handle invalid handshake messages gracefully" time="0.102">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/sse-connection-handshake.test.ts:224:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="SSE Connection Establishment and MCP Handshake Testing MCP Protocol Handshake should validate JSON-RPC 2.0 compliance" name="SSE Connection Establishment and MCP Handshake Testing MCP Protocol Handshake should validate JSON-RPC 2.0 compliance" time="0.104">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/sse-connection-handshake.test.ts:224:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="SSE Connection Establishment and MCP Handshake Testing Tool Discovery Through SSE should list available tools correctly" name="SSE Connection Establishment and MCP Handshake Testing Tool Discovery Through SSE should list available tools correctly" time="0.102">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/sse-connection-handshake.test.ts:224:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="SSE Connection Establishment and MCP Handshake Testing Tool Discovery Through SSE should handle tool calls with proper error handling" name="SSE Connection Establishment and MCP Handshake Testing Tool Discovery Through SSE should handle tool calls with proper error handling" time="0.101">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/sse-connection-handshake.test.ts:224:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="SSE Connection Establishment and MCP Handshake Testing Client Type Simulation should handle Claude Desktop simulation" name="SSE Connection Establishment and MCP Handshake Testing Client Type Simulation should handle Claude Desktop simulation" time="0.102">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/sse-connection-handshake.test.ts:224:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="SSE Connection Establishment and MCP Handshake Testing Client Type Simulation should handle MCP Inspector simulation" name="SSE Connection Establishment and MCP Handshake Testing Client Type Simulation should handle MCP Inspector simulation" time="0.124">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/sse-connection-handshake.test.ts:224:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="SSE Connection Establishment and MCP Handshake Testing Client Type Simulation should handle custom client simulation" name="SSE Connection Establishment and MCP Handshake Testing Client Type Simulation should handle custom client simulation" time="0.103">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/sse-connection-handshake.test.ts:224:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="SSE Connection Establishment and MCP Handshake Testing Connection State Management should track connection lifecycle properly" name="SSE Connection Establishment and MCP Handshake Testing Connection State Management should track connection lifecycle properly" time="0.101">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/sse-connection-handshake.test.ts:224:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="SSE Connection Establishment and MCP Handshake Testing Connection State Management should handle abrupt connection termination" name="SSE Connection Establishment and MCP Handshake Testing Connection State Management should handle abrupt connection termination" time="0.102">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/sse-connection-handshake.test.ts:224:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="SSE Connection Establishment and MCP Handshake Testing Performance and Reliability should establish connections within performance benchmarks" name="SSE Connection Establishment and MCP Handshake Testing Performance and Reliability should establish connections within performance benchmarks" time="0.101">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/sse-connection-handshake.test.ts:224:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="SSE Connection Establishment and MCP Handshake Testing Performance and Reliability should handle rapid connection cycling" name="SSE Connection Establishment and MCP Handshake Testing Performance and Reliability should handle rapid connection cycling" time="0.101">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/sse-connection-handshake.test.ts:224:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Message Delivery and Formatting Verification" errors="0" failures="14" skipped="0" timestamp="2025-06-19T14:52:59" time="1.748" tests="14">
    <testcase classname="Message Delivery and Formatting Verification SSE Message Format Validation should establish SSE connection successfully" name="Message Delivery and Formatting Verification SSE Message Format Validation should establish SSE connection successfully" time="0.107">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/message-delivery-formatting.test.ts:172:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Message Delivery and Formatting Verification SSE Message Format Validation should format MCP response messages correctly" name="Message Delivery and Formatting Verification SSE Message Format Validation should format MCP response messages correctly" time="0.102">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/message-delivery-formatting.test.ts:172:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Message Delivery and Formatting Verification SSE Message Format Validation should handle various MCP method calls" name="Message Delivery and Formatting Verification SSE Message Format Validation should handle various MCP method calls" time="0.102">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/message-delivery-formatting.test.ts:172:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Message Delivery and Formatting Verification SSE Message Format Validation should format error messages properly" name="Message Delivery and Formatting Verification SSE Message Format Validation should format error messages properly" time="0.103">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/message-delivery-formatting.test.ts:172:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Message Delivery and Formatting Verification Message Timing and Delivery should deliver messages within acceptable timeframe" name="Message Delivery and Formatting Verification Message Timing and Delivery should deliver messages within acceptable timeframe" time="0.103">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/message-delivery-formatting.test.ts:172:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Message Delivery and Formatting Verification Message Timing and Delivery should maintain message order for sequential requests" name="Message Delivery and Formatting Verification Message Timing and Delivery should maintain message order for sequential requests" time="0.109">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/message-delivery-formatting.test.ts:172:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Message Delivery and Formatting Verification Message Timing and Delivery should handle concurrent message delivery" name="Message Delivery and Formatting Verification Message Timing and Delivery should handle concurrent message delivery" time="0.11">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/message-delivery-formatting.test.ts:172:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Message Delivery and Formatting Verification Connection Stability should maintain connection stability over time" name="Message Delivery and Formatting Verification Connection Stability should maintain connection stability over time" time="0.101">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/message-delivery-formatting.test.ts:172:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Message Delivery and Formatting Verification Error Handling and Edge Cases should handle malformed JSON in requests gracefully" name="Message Delivery and Formatting Verification Error Handling and Edge Cases should handle malformed JSON in requests gracefully" time="0.101">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/message-delivery-formatting.test.ts:172:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Message Delivery and Formatting Verification Error Handling and Edge Cases should handle malformed JSON in responses" name="Message Delivery and Formatting Verification Error Handling and Edge Cases should handle malformed JSON in responses" time="0.101">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/message-delivery-formatting.test.ts:172:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Message Delivery and Formatting Verification Error Handling and Edge Cases should handle requests without required fields" name="Message Delivery and Formatting Verification Error Handling and Edge Cases should handle requests without required fields" time="0.101">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/message-delivery-formatting.test.ts:172:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Message Delivery and Formatting Verification Error Handling and Edge Cases should handle non-existent methods" name="Message Delivery and Formatting Verification Error Handling and Edge Cases should handle non-existent methods" time="0.102">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/message-delivery-formatting.test.ts:172:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Message Delivery and Formatting Verification Message Content Validation should handle special characters and encoding" name="Message Delivery and Formatting Verification Message Content Validation should handle special characters and encoding" time="0.102">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/message-delivery-formatting.test.ts:172:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Message Delivery and Formatting Verification Message Content Validation should validate JSON-RPC message structure compliance" name="Message Delivery and Formatting Verification Message Content Validation should validate JSON-RPC message structure compliance" time="0.101">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/message-delivery-formatting.test.ts:172:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Express Middleware and SSE Transport" errors="0" failures="13" skipped="0" timestamp="2025-06-19T14:53:01" time="1.588" tests="13">
    <testcase classname="Express Middleware and SSE Transport Middleware Stack should handle CORS headers correctly" name="Express Middleware and SSE Transport Middleware Stack should handle CORS headers correctly" time="0.104">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/middleware-sse.test.ts:38:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Express Middleware and SSE Transport Middleware Stack should handle JSON body parsing" name="Express Middleware and SSE Transport Middleware Stack should handle JSON body parsing" time="0.102">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/middleware-sse.test.ts:38:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Express Middleware and SSE Transport Middleware Stack should enforce connection limits" name="Express Middleware and SSE Transport Middleware Stack should enforce connection limits" time="0.101">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/middleware-sse.test.ts:38:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Express Middleware and SSE Transport Middleware Stack should handle malformed JSON gracefully" name="Express Middleware and SSE Transport Middleware Stack should handle malformed JSON gracefully" time="0.101">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/middleware-sse.test.ts:38:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Express Middleware and SSE Transport SSE Transport should establish SSE connection with proper headers" name="Express Middleware and SSE Transport SSE Transport should establish SSE connection with proper headers" time="0.103">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/middleware-sse.test.ts:38:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Express Middleware and SSE Transport SSE Transport should track connection count correctly" name="Express Middleware and SSE Transport SSE Transport should track connection count correctly" time="0.101">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/middleware-sse.test.ts:38:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Express Middleware and SSE Transport MCP Message Handling should process valid MCP messages" name="Express Middleware and SSE Transport MCP Message Handling should process valid MCP messages" time="0.101">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/middleware-sse.test.ts:38:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Express Middleware and SSE Transport MCP Message Handling should reject invalid message format" name="Express Middleware and SSE Transport MCP Message Handling should reject invalid message format" time="0.102">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/middleware-sse.test.ts:38:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Express Middleware and SSE Transport MCP Message Handling should handle missing message properties" name="Express Middleware and SSE Transport MCP Message Handling should handle missing message properties" time="0.102">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/middleware-sse.test.ts:38:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Express Middleware and SSE Transport Error Handling should handle request timeout gracefully" name="Express Middleware and SSE Transport Error Handling should handle request timeout gracefully" time="0.1">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/middleware-sse.test.ts:38:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Express Middleware and SSE Transport Error Handling should handle server errors gracefully" name="Express Middleware and SSE Transport Error Handling should handle server errors gracefully" time="0.101">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/middleware-sse.test.ts:38:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Express Middleware and SSE Transport Security Features should have security headers set" name="Express Middleware and SSE Transport Security Features should have security headers set" time="0.102">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/middleware-sse.test.ts:38:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Express Middleware and SSE Transport Security Features should handle large payloads within limits" name="Express Middleware and SSE Transport Security Features should handle large payloads within limits" time="0.102">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/middleware-sse.test.ts:38:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
  </testsuite>
  <testsuite name="TallyApiClient" errors="0" failures="4" skipped="0" timestamp="2025-06-19T14:53:02" time="0.595" tests="30">
    <testcase classname="TallyApiClient Constructor and Configuration should create a client with default configuration" name="TallyApiClient Constructor and Configuration should create a client with default configuration" time="0.002">
    </testcase>
    <testcase classname="TallyApiClient Constructor and Configuration should create a client with custom configuration" name="TallyApiClient Constructor and Configuration should create a client with custom configuration" time="0.001">
    </testcase>
    <testcase classname="TallyApiClient Constructor and Configuration should not set Authorization header if no access token is provided" name="TallyApiClient Constructor and Configuration should not set Authorization header if no access token is provided" time="0">
    </testcase>
    <testcase classname="TallyApiClient Access Token Management should set access token and update Authorization header" name="TallyApiClient Access Token Management should set access token and update Authorization header" time="0.001">
    </testcase>
    <testcase classname="TallyApiClient Access Token Management should remove Authorization header when setting empty token" name="TallyApiClient Access Token Management should remove Authorization header when setting empty token" time="0.003">
    </testcase>
    <testcase classname="TallyApiClient Access Token Management should return current access token" name="TallyApiClient Access Token Management should return current access token" time="0.001">
    </testcase>
    <testcase classname="TallyApiClient HTTP Methods should make a GET request" name="TallyApiClient HTTP Methods should make a GET request" time="0.001">
    </testcase>
    <testcase classname="TallyApiClient HTTP Methods should make a GET request with custom config" name="TallyApiClient HTTP Methods should make a GET request with custom config" time="0.001">
    </testcase>
    <testcase classname="TallyApiClient HTTP Methods should make a POST request with data" name="TallyApiClient HTTP Methods should make a POST request with data" time="0.001">
    </testcase>
    <testcase classname="TallyApiClient HTTP Methods should make a PUT request with data" name="TallyApiClient HTTP Methods should make a PUT request with data" time="0">
    </testcase>
    <testcase classname="TallyApiClient HTTP Methods should make a DELETE request" name="TallyApiClient HTTP Methods should make a DELETE request" time="0.001">
    </testcase>
    <testcase classname="TallyApiClient HTTP Methods should make a PATCH request with data" name="TallyApiClient HTTP Methods should make a PATCH request with data" time="0">
    </testcase>
    <testcase classname="TallyApiClient Error Handling should propagate axios errors" name="TallyApiClient Error Handling should propagate axios errors" time="0.008">
    </testcase>
    <testcase classname="TallyApiClient Error Handling should propagate HTTP error responses" name="TallyApiClient Error Handling should propagate HTTP error responses" time="0">
    </testcase>
    <testcase classname="TallyApiClient Utility Methods should return the axios instance" name="TallyApiClient Utility Methods should return the axios instance" time="0.003">
    </testcase>
    <testcase classname="TallyApiClient Utility Methods should return readonly configuration" name="TallyApiClient Utility Methods should return readonly configuration" time="0.001">
    </testcase>
    <testcase classname="TallyApiClient Interceptors should always setup interceptors for authentication and error handling" name="TallyApiClient Interceptors should always setup interceptors for authentication and error handling" time="0">
    </testcase>
    <testcase classname="TallyApiClient Interceptors should setup interceptors with debug logging when debug is enabled" name="TallyApiClient Interceptors should setup interceptors with debug logging when debug is enabled" time="0.001">
    </testcase>
    <testcase classname="TallyApiClient Type Safety should maintain type safety with generic responses" name="TallyApiClient Type Safety should maintain type safety with generic responses" time="0">
    </testcase>
    <testcase classname="TallyApiClient Rate Limiting and Retry Logic should have retry configuration set correctly" name="TallyApiClient Rate Limiting and Retry Logic should have retry configuration set correctly" time="0.001">
    </testcase>
    <testcase classname="TallyApiClient Rate Limiting and Retry Logic should setup interceptors for retry logic" name="TallyApiClient Rate Limiting and Retry Logic should setup interceptors for retry logic" time="0">
    </testcase>
    <testcase classname="TallyApiClient Rate Limiting and Retry Logic should handle custom retry configuration" name="TallyApiClient Rate Limiting and Retry Logic should handle custom retry configuration" time="0">
    </testcase>
    <testcase classname="TallyApiClient Type-Safe API Methods with Zod Validation getSubmissions should validate and return submissions response" name="TallyApiClient Type-Safe API Methods with Zod Validation getSubmissions should validate and return submissions response" time="0.112">
      <failure>Error: expect(received).toEqual(expected) // deep equality

- Expected  -   7
+ Received  + 204

@@ -3,24 +3,221 @@
    &quot;limit&quot;: 10,
    &quot;page&quot;: 1,
    &quot;questions&quot;: Array [],
    &quot;submissions&quot;: Array [
      Object {
-       &quot;formId&quot;: &quot;form_123&quot;,
-       &quot;id&quot;: &quot;sub_1&quot;,
+       &quot;formId&quot;: &quot;form_123456789&quot;,
+       &quot;id&quot;: &quot;sub_000000001&quot;,
+       &quot;isCompleted&quot;: true,
+       &quot;respondentId&quot;: &quot;resp_000000001&quot;,
+       &quot;responses&quot;: Array [
+         Object {
+           &quot;questionId&quot;: &quot;q1&quot;,
+           &quot;value&quot;: &quot;User 1&quot;,
+         },
+         Object {
+           &quot;questionId&quot;: &quot;q2&quot;,
+           &quot;value&quot;: &quot;user1@example.com&quot;,
+         },
+         Object {
+           &quot;questionId&quot;: &quot;q3&quot;,
+           &quot;value&quot;: &quot;This is message 1 from a test user.&quot;,
+         },
+       ],
+       &quot;submittedAt&quot;: &quot;2025-06-18T14:53:03.057Z&quot;,
+     },
+     Object {
+       &quot;formId&quot;: &quot;form_123456789&quot;,
+       &quot;id&quot;: &quot;sub_000000002&quot;,
+       &quot;isCompleted&quot;: true,
+       &quot;respondentId&quot;: &quot;resp_000000002&quot;,
+       &quot;responses&quot;: Array [
+         Object {
+           &quot;questionId&quot;: &quot;q1&quot;,
+           &quot;value&quot;: &quot;User 2&quot;,
+         },
+         Object {
+           &quot;questionId&quot;: &quot;q2&quot;,
+           &quot;value&quot;: &quot;user2@example.com&quot;,
+         },
+         Object {
+           &quot;questionId&quot;: &quot;q3&quot;,
+           &quot;value&quot;: &quot;This is message 2 from a test user.&quot;,
+         },
+       ],
+       &quot;submittedAt&quot;: &quot;2025-06-17T14:53:03.057Z&quot;,
+     },
+     Object {
+       &quot;formId&quot;: &quot;form_123456789&quot;,
+       &quot;id&quot;: &quot;sub_000000003&quot;,
+       &quot;isCompleted&quot;: true,
+       &quot;respondentId&quot;: &quot;resp_000000003&quot;,
+       &quot;responses&quot;: Array [
+         Object {
+           &quot;questionId&quot;: &quot;q1&quot;,
+           &quot;value&quot;: &quot;User 3&quot;,
+         },
+         Object {
+           &quot;questionId&quot;: &quot;q2&quot;,
+           &quot;value&quot;: &quot;user3@example.com&quot;,
+         },
+         Object {
+           &quot;questionId&quot;: &quot;q3&quot;,
+           &quot;value&quot;: &quot;This is message 3 from a test user.&quot;,
+         },
+       ],
+       &quot;submittedAt&quot;: &quot;2025-06-16T14:53:03.057Z&quot;,
+     },
+     Object {
+       &quot;formId&quot;: &quot;form_123456789&quot;,
+       &quot;id&quot;: &quot;sub_000000004&quot;,
+       &quot;isCompleted&quot;: true,
+       &quot;respondentId&quot;: &quot;resp_000000004&quot;,
+       &quot;responses&quot;: Array [
+         Object {
+           &quot;questionId&quot;: &quot;q1&quot;,
+           &quot;value&quot;: &quot;User 4&quot;,
+         },
+         Object {
+           &quot;questionId&quot;: &quot;q2&quot;,
+           &quot;value&quot;: &quot;user4@example.com&quot;,
+         },
+         Object {
+           &quot;questionId&quot;: &quot;q3&quot;,
+           &quot;value&quot;: &quot;This is message 4 from a test user.&quot;,
+         },
+       ],
+       &quot;submittedAt&quot;: &quot;2025-06-15T14:53:03.057Z&quot;,
+     },
+     Object {
+       &quot;formId&quot;: &quot;form_123456789&quot;,
+       &quot;id&quot;: &quot;sub_000000005&quot;,
+       &quot;isCompleted&quot;: true,
+       &quot;respondentId&quot;: &quot;resp_000000005&quot;,
+       &quot;responses&quot;: Array [
+         Object {
+           &quot;questionId&quot;: &quot;q1&quot;,
+           &quot;value&quot;: &quot;User 5&quot;,
+         },
+         Object {
+           &quot;questionId&quot;: &quot;q2&quot;,
+           &quot;value&quot;: &quot;user5@example.com&quot;,
+         },
+         Object {
+           &quot;questionId&quot;: &quot;q3&quot;,
+           &quot;value&quot;: &quot;This is message 5 from a test user.&quot;,
+         },
+       ],
+       &quot;submittedAt&quot;: &quot;2025-06-14T14:53:03.057Z&quot;,
+     },
+     Object {
+       &quot;formId&quot;: &quot;form_123456789&quot;,
+       &quot;id&quot;: &quot;sub_000000006&quot;,
+       &quot;isCompleted&quot;: true,
+       &quot;respondentId&quot;: &quot;resp_000000006&quot;,
+       &quot;responses&quot;: Array [
+         Object {
+           &quot;questionId&quot;: &quot;q1&quot;,
+           &quot;value&quot;: &quot;User 6&quot;,
+         },
+         Object {
+           &quot;questionId&quot;: &quot;q2&quot;,
+           &quot;value&quot;: &quot;user6@example.com&quot;,
+         },
+         Object {
+           &quot;questionId&quot;: &quot;q3&quot;,
+           &quot;value&quot;: &quot;This is message 6 from a test user.&quot;,
+         },
+       ],
+       &quot;submittedAt&quot;: &quot;2025-06-13T14:53:03.057Z&quot;,
+     },
+     Object {
+       &quot;formId&quot;: &quot;form_123456789&quot;,
+       &quot;id&quot;: &quot;sub_000000007&quot;,
+       &quot;isCompleted&quot;: true,
+       &quot;respondentId&quot;: &quot;resp_000000007&quot;,
+       &quot;responses&quot;: Array [
+         Object {
+           &quot;questionId&quot;: &quot;q1&quot;,
+           &quot;value&quot;: &quot;User 7&quot;,
+         },
+         Object {
+           &quot;questionId&quot;: &quot;q2&quot;,
+           &quot;value&quot;: &quot;user7@example.com&quot;,
+         },
+         Object {
+           &quot;questionId&quot;: &quot;q3&quot;,
+           &quot;value&quot;: &quot;This is message 7 from a test user.&quot;,
+         },
+       ],
+       &quot;submittedAt&quot;: &quot;2025-06-12T14:53:03.057Z&quot;,
+     },
+     Object {
+       &quot;formId&quot;: &quot;form_123456789&quot;,
+       &quot;id&quot;: &quot;sub_000000008&quot;,
+       &quot;isCompleted&quot;: true,
+       &quot;respondentId&quot;: &quot;resp_000000008&quot;,
+       &quot;responses&quot;: Array [
+         Object {
+           &quot;questionId&quot;: &quot;q1&quot;,
+           &quot;value&quot;: &quot;User 8&quot;,
+         },
+         Object {
+           &quot;questionId&quot;: &quot;q2&quot;,
+           &quot;value&quot;: &quot;user8@example.com&quot;,
+         },
+         Object {
+           &quot;questionId&quot;: &quot;q3&quot;,
+           &quot;value&quot;: &quot;This is message 8 from a test user.&quot;,
+         },
+       ],
+       &quot;submittedAt&quot;: &quot;2025-06-11T14:53:03.057Z&quot;,
+     },
+     Object {
+       &quot;formId&quot;: &quot;form_123456789&quot;,
+       &quot;id&quot;: &quot;sub_000000009&quot;,
        &quot;isCompleted&quot;: true,
-       &quot;respondentId&quot;: &quot;resp_1&quot;,
+       &quot;respondentId&quot;: &quot;resp_000000009&quot;,
        &quot;responses&quot;: Array [
          Object {
            &quot;questionId&quot;: &quot;q1&quot;,
-           &quot;value&quot;: &quot;Test User&quot;,
+           &quot;value&quot;: &quot;User 9&quot;,
+         },
+         Object {
+           &quot;questionId&quot;: &quot;q2&quot;,
+           &quot;value&quot;: &quot;user9@example.com&quot;,
          },
+         Object {
+           &quot;questionId&quot;: &quot;q3&quot;,
+           &quot;value&quot;: &quot;This is message 9 from a test user.&quot;,
+         },
        ],
-       &quot;submittedAt&quot;: &quot;2025-06-19T14:53:02.951Z&quot;,
+       &quot;submittedAt&quot;: &quot;2025-06-10T14:53:03.057Z&quot;,
      },
+     Object {
+       &quot;formId&quot;: &quot;form_123456789&quot;,
+       &quot;id&quot;: &quot;sub_000000010&quot;,
+       &quot;isCompleted&quot;: true,
+       &quot;respondentId&quot;: &quot;resp_000000010&quot;,
+       &quot;responses&quot;: Array [
+         Object {
+           &quot;questionId&quot;: &quot;q1&quot;,
+           &quot;value&quot;: &quot;User 10&quot;,
+         },
+         Object {
+           &quot;questionId&quot;: &quot;q2&quot;,
+           &quot;value&quot;: &quot;user10@example.com&quot;,
+         },
+         Object {
+           &quot;questionId&quot;: &quot;q3&quot;,
+           &quot;value&quot;: &quot;This is message 10 from a test user.&quot;,
+         },
+       ],
+       &quot;submittedAt&quot;: &quot;2025-06-09T14:53:03.057Z&quot;,
+     },
    ],
    &quot;totalNumberOfSubmissionsPerFilter&quot;: Object {
-     &quot;all&quot;: 1,
-     &quot;completed&quot;: 1,
+     &quot;all&quot;: 10,
+     &quot;completed&quot;: 10,
      &quot;partial&quot;: 0,
    },
  }
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/TallyApiClient.test.ts:481:24)</failure>
    </testcase>
    <testcase classname="TallyApiClient Type-Safe API Methods with Zod Validation getSubmissions should throw validation error for invalid submissions response" name="TallyApiClient Type-Safe API Methods with Zod Validation getSubmissions should throw validation error for invalid submissions response" time="0.103">
      <failure>Error: expect(received).rejects.toThrow()

Received promise resolved instead of rejected
Resolved to value: {&quot;hasMore&quot;: false, &quot;limit&quot;: 10, &quot;page&quot;: 1, &quot;questions&quot;: [], &quot;submissions&quot;: [{&quot;formId&quot;: &quot;form_123456789&quot;, &quot;id&quot;: &quot;sub_000000001&quot;, &quot;isCompleted&quot;: true, &quot;respondentId&quot;: &quot;resp_000000001&quot;, &quot;responses&quot;: [{&quot;questionId&quot;: &quot;q1&quot;, &quot;value&quot;: &quot;User 1&quot;}, {&quot;questionId&quot;: &quot;q2&quot;, &quot;value&quot;: &quot;user1@example.com&quot;}, {&quot;questionId&quot;: &quot;q3&quot;, &quot;value&quot;: &quot;This is message 1 from a test user.&quot;}], &quot;submittedAt&quot;: &quot;2025-06-18T14:53:03.164Z&quot;}, {&quot;formId&quot;: &quot;form_123456789&quot;, &quot;id&quot;: &quot;sub_000000002&quot;, &quot;isCompleted&quot;: true, &quot;respondentId&quot;: &quot;resp_000000002&quot;, &quot;responses&quot;: [{&quot;questionId&quot;: &quot;q1&quot;, &quot;value&quot;: &quot;User 2&quot;}, {&quot;questionId&quot;: &quot;q2&quot;, &quot;value&quot;: &quot;user2@example.com&quot;}, {&quot;questionId&quot;: &quot;q3&quot;, &quot;value&quot;: &quot;This is message 2 from a test user.&quot;}], &quot;submittedAt&quot;: &quot;2025-06-17T14:53:03.164Z&quot;}, {&quot;formId&quot;: &quot;form_123456789&quot;, &quot;id&quot;: &quot;sub_000000003&quot;, &quot;isCompleted&quot;: true, &quot;respondentId&quot;: &quot;resp_000000003&quot;, &quot;responses&quot;: [{&quot;questionId&quot;: &quot;q1&quot;, &quot;value&quot;: &quot;User 3&quot;}, {&quot;questionId&quot;: &quot;q2&quot;, &quot;value&quot;: &quot;user3@example.com&quot;}, {&quot;questionId&quot;: &quot;q3&quot;, &quot;value&quot;: &quot;This is message 3 from a test user.&quot;}], &quot;submittedAt&quot;: &quot;2025-06-16T14:53:03.164Z&quot;}, {&quot;formId&quot;: &quot;form_123456789&quot;, &quot;id&quot;: &quot;sub_000000004&quot;, &quot;isCompleted&quot;: true, &quot;respondentId&quot;: &quot;resp_000000004&quot;, &quot;responses&quot;: [{&quot;questionId&quot;: &quot;q1&quot;, &quot;value&quot;: &quot;User 4&quot;}, {&quot;questionId&quot;: &quot;q2&quot;, &quot;value&quot;: &quot;user4@example.com&quot;}, {&quot;questionId&quot;: &quot;q3&quot;, &quot;value&quot;: &quot;This is message 4 from a test user.&quot;}], &quot;submittedAt&quot;: &quot;2025-06-15T14:53:03.164Z&quot;}, {&quot;formId&quot;: &quot;form_123456789&quot;, &quot;id&quot;: &quot;sub_000000005&quot;, &quot;isCompleted&quot;: true, &quot;respondentId&quot;: &quot;resp_000000005&quot;, &quot;responses&quot;: [{&quot;questionId&quot;: &quot;q1&quot;, &quot;value&quot;: &quot;User 5&quot;}, {&quot;questionId&quot;: &quot;q2&quot;, &quot;value&quot;: &quot;user5@example.com&quot;}, {&quot;questionId&quot;: &quot;q3&quot;, &quot;value&quot;: &quot;This is message 5 from a test user.&quot;}], &quot;submittedAt&quot;: &quot;2025-06-14T14:53:03.164Z&quot;}, {&quot;formId&quot;: &quot;form_123456789&quot;, &quot;id&quot;: &quot;sub_000000006&quot;, &quot;isCompleted&quot;: true, &quot;respondentId&quot;: &quot;resp_000000006&quot;, &quot;responses&quot;: [{&quot;questionId&quot;: &quot;q1&quot;, &quot;value&quot;: &quot;User 6&quot;}, {&quot;questionId&quot;: &quot;q2&quot;, &quot;value&quot;: &quot;user6@example.com&quot;}, {&quot;questionId&quot;: &quot;q3&quot;, &quot;value&quot;: &quot;This is message 6 from a test user.&quot;}], &quot;submittedAt&quot;: &quot;2025-06-13T14:53:03.164Z&quot;}, {&quot;formId&quot;: &quot;form_123456789&quot;, &quot;id&quot;: &quot;sub_000000007&quot;, &quot;isCompleted&quot;: true, &quot;respondentId&quot;: &quot;resp_000000007&quot;, &quot;responses&quot;: [{&quot;questionId&quot;: &quot;q1&quot;, &quot;value&quot;: &quot;User 7&quot;}, {&quot;questionId&quot;: &quot;q2&quot;, &quot;value&quot;: &quot;user7@example.com&quot;}, {&quot;questionId&quot;: &quot;q3&quot;, &quot;value&quot;: &quot;This is message 7 from a test user.&quot;}], &quot;submittedAt&quot;: &quot;2025-06-12T14:53:03.164Z&quot;}, {&quot;formId&quot;: &quot;form_123456789&quot;, &quot;id&quot;: &quot;sub_000000008&quot;, &quot;isCompleted&quot;: true, &quot;respondentId&quot;: &quot;resp_000000008&quot;, &quot;responses&quot;: [{&quot;questionId&quot;: &quot;q1&quot;, &quot;value&quot;: &quot;User 8&quot;}, {&quot;questionId&quot;: &quot;q2&quot;, &quot;value&quot;: &quot;user8@example.com&quot;}, {&quot;questionId&quot;: &quot;q3&quot;, &quot;value&quot;: &quot;This is message 8 from a test user.&quot;}], &quot;submittedAt&quot;: &quot;2025-06-11T14:53:03.164Z&quot;}, {&quot;formId&quot;: &quot;form_123456789&quot;, &quot;id&quot;: &quot;sub_000000009&quot;, &quot;isCompleted&quot;: true, &quot;respondentId&quot;: &quot;resp_000000009&quot;, &quot;responses&quot;: [{&quot;questionId&quot;: &quot;q1&quot;, &quot;value&quot;: &quot;User 9&quot;}, {&quot;questionId&quot;: &quot;q2&quot;, &quot;value&quot;: &quot;user9@example.com&quot;}, {&quot;questionId&quot;: &quot;q3&quot;, &quot;value&quot;: &quot;This is message 9 from a test user.&quot;}], &quot;submittedAt&quot;: &quot;2025-06-10T14:53:03.164Z&quot;}, {&quot;formId&quot;: &quot;form_123456789&quot;, &quot;id&quot;: &quot;sub_000000010&quot;, &quot;isCompleted&quot;: true, &quot;respondentId&quot;: &quot;resp_000000010&quot;, &quot;responses&quot;: [{&quot;questionId&quot;: &quot;q1&quot;, &quot;value&quot;: &quot;User 10&quot;}, {&quot;questionId&quot;: &quot;q2&quot;, &quot;value&quot;: &quot;user10@example.com&quot;}, {&quot;questionId&quot;: &quot;q3&quot;, &quot;value&quot;: &quot;This is message 10 from a test user.&quot;}], &quot;submittedAt&quot;: &quot;2025-06-09T14:53:03.164Z&quot;}], &quot;totalNumberOfSubmissionsPerFilter&quot;: {&quot;all&quot;: 10, &quot;completed&quot;: 10, &quot;partial&quot;: 0}}
    at expect (/Users/cryophobic/dev/projects/tally-mcp/node_modules/expect/build/index.js:113:15)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/TallyApiClient.test.ts:504:15)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="TallyApiClient Type-Safe API Methods with Zod Validation getForm should validate and return form data" name="TallyApiClient Type-Safe API Methods with Zod Validation getForm should validate and return form data" time="0.103">
      <failure>Error: expect(received).toEqual(expected) // deep equality

- Expected  - 2
+ Received  + 2

  Object {
-   &quot;createdAt&quot;: &quot;2025-06-19T14:53:03.166Z&quot;,
+   &quot;createdAt&quot;: &quot;2024-01-01T00:00:00Z&quot;,
    &quot;description&quot;: &quot;Get in touch with our team&quot;,
    &quot;embedUrl&quot;: &quot;https://tally.so/embed/form_123456789&quot;,
    &quot;id&quot;: &quot;form123&quot;,
    &quot;isPublished&quot;: true,
    &quot;status&quot;: &quot;published&quot;,
    &quot;submissionsCount&quot;: 42,
    &quot;title&quot;: &quot;Contact Us&quot;,
-   &quot;updatedAt&quot;: &quot;2025-06-19T14:53:03.166Z&quot;,
+   &quot;updatedAt&quot;: &quot;2024-01-01T00:00:00Z&quot;,
    &quot;url&quot;: &quot;https://tally.so/r/form_123456789&quot;,
  }
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/TallyApiClient.test.ts:539:24)</failure>
    </testcase>
    <testcase classname="TallyApiClient Type-Safe API Methods with Zod Validation getForm should throw validation error for invalid form response" name="TallyApiClient Type-Safe API Methods with Zod Validation getForm should throw validation error for invalid form response" time="0.1">
      <failure>Error: expect(received).rejects.toThrow()

Received promise resolved instead of rejected
Resolved to value: {&quot;createdAt&quot;: &quot;2024-01-01T00:00:00Z&quot;, &quot;description&quot;: &quot;Get in touch with our team&quot;, &quot;embedUrl&quot;: &quot;https://tally.so/embed/form_123456789&quot;, &quot;id&quot;: &quot;form123&quot;, &quot;isPublished&quot;: true, &quot;status&quot;: &quot;published&quot;, &quot;submissionsCount&quot;: 42, &quot;title&quot;: &quot;Contact Us&quot;, &quot;updatedAt&quot;: &quot;2024-01-01T00:00:00Z&quot;, &quot;url&quot;: &quot;https://tally.so/r/form_123456789&quot;}
    at expect (/Users/cryophobic/dev/projects/tally-mcp/node_modules/expect/build/index.js:113:15)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/TallyApiClient.test.ts:562:15)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="TallyApiClient Type-Safe API Methods with Zod Validation validateResponse should return success result for valid data" name="TallyApiClient Type-Safe API Methods with Zod Validation validateResponse should return success result for valid data" time="0.001">
    </testcase>
    <testcase classname="TallyApiClient Type-Safe API Methods with Zod Validation validateResponse should return error result for invalid data" name="TallyApiClient Type-Safe API Methods with Zod Validation validateResponse should return error result for invalid data" time="0.001">
    </testcase>
    <testcase classname="TallyApiClient Type-Safe API Methods with Zod Validation requestWithValidation should make request and validate response with schema" name="TallyApiClient Type-Safe API Methods with Zod Validation requestWithValidation should make request and validate response with schema" time="0">
    </testcase>
    <testcase classname="TallyApiClient Type-Safe API Methods with Zod Validation requestWithValidation should throw validation error for invalid response data" name="TallyApiClient Type-Safe API Methods with Zod Validation requestWithValidation should throw validation error for invalid response data" time="0.008">
    </testcase>
  </testsuite>
  <testsuite name="Security Middleware" errors="0" failures="2" skipped="0" timestamp="2025-06-19T14:53:03" time="0.381" tests="24">
    <testcase classname="Security Middleware CORS Configuration should handle preflight OPTIONS requests" name="Security Middleware CORS Configuration should handle preflight OPTIONS requests" time="0.026">
    </testcase>
    <testcase classname="Security Middleware CORS Configuration should allow GET requests with CORS headers" name="Security Middleware CORS Configuration should allow GET requests with CORS headers" time="0.007">
    </testcase>
    <testcase classname="Security Middleware CORS Configuration should expose rate limit headers" name="Security Middleware CORS Configuration should expose rate limit headers" time="0.007">
    </testcase>
    <testcase classname="Security Middleware CORS with Environment Configuration should allow requests from allowed origins" name="Security Middleware CORS with Environment Configuration should allow requests from allowed origins" time="0.005">
    </testcase>
    <testcase classname="Security Middleware CORS with Environment Configuration should reject requests from disallowed origins" name="Security Middleware CORS with Environment Configuration should reject requests from disallowed origins" time="0.007">
    </testcase>
    <testcase classname="Security Middleware Security Headers should set Content Security Policy header" name="Security Middleware Security Headers should set Content Security Policy header" time="0.007">
    </testcase>
    <testcase classname="Security Middleware Security Headers should set HSTS header" name="Security Middleware Security Headers should set HSTS header" time="0.006">
    </testcase>
    <testcase classname="Security Middleware Security Headers should set X-Content-Type-Options header" name="Security Middleware Security Headers should set X-Content-Type-Options header" time="0.005">
    </testcase>
    <testcase classname="Security Middleware Security Headers should set X-Frame-Options header" name="Security Middleware Security Headers should set X-Frame-Options header" time="0.005">
    </testcase>
    <testcase classname="Security Middleware Security Headers should remove X-Powered-By header" name="Security Middleware Security Headers should remove X-Powered-By header" time="0.006">
    </testcase>
    <testcase classname="Security Middleware Security Headers should set Referrer-Policy header" name="Security Middleware Security Headers should set Referrer-Policy header" time="0.004">
    </testcase>
    <testcase classname="Security Middleware Custom Security Middleware should set custom API version header" name="Security Middleware Custom Security Middleware should set custom API version header" time="0.006">
    </testcase>
    <testcase classname="Security Middleware Custom Security Middleware should set request ID header" name="Security Middleware Custom Security Middleware should set request ID header" time="0.006">
    </testcase>
    <testcase classname="Security Middleware Custom Security Middleware should set no-cache headers for non-GET API endpoints" name="Security Middleware Custom Security Middleware should set no-cache headers for non-GET API endpoints" time="0.006">
    </testcase>
    <testcase classname="Security Middleware Custom Security Middleware should add timing protection for auth endpoints" name="Security Middleware Custom Security Middleware should add timing protection for auth endpoints" time="0.014">
    </testcase>
    <testcase classname="Security Middleware Security Logger should log security information for requests" name="Security Middleware Security Logger should log security information for requests" time="0.005">
    </testcase>
    <testcase classname="Security Middleware Security Validation should allow normal requests" name="Security Middleware Security Validation should allow normal requests" time="0.016">
    </testcase>
    <testcase classname="Security Middleware Security Validation should block directory traversal attempts" name="Security Middleware Security Validation should block directory traversal attempts" time="0.007">
    </testcase>
    <testcase classname="Security Middleware Security Validation should block XSS attempts in URL" name="Security Middleware Security Validation should block XSS attempts in URL" time="0.007">
    </testcase>
    <testcase classname="Security Middleware Security Validation should reject negative Content-Length" name="Security Middleware Security Validation should reject negative Content-Length" time="0.015">
    </testcase>
    <testcase classname="Security Middleware Security Validation should reject oversized payloads" name="Security Middleware Security Validation should reject oversized payloads" time="0.02">
    </testcase>
    <testcase classname="Security Middleware Security Validation should warn about invalid User-Agent headers" name="Security Middleware Security Validation should warn about invalid User-Agent headers" time="0.008">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: &quot;Security Warning: Missing or empty User-Agent header.&quot;

Number of calls: 0
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/middleware/__tests__/security.test.ts:264:30)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Security Middleware Security Validation should warn about oversized User-Agent headers" name="Security Middleware Security Validation should warn about oversized User-Agent headers" time="0.006">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: &quot;Security Warning: Oversized User-Agent header: 300 chars&quot;

Number of calls: 0
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/middleware/__tests__/security.test.ts:293:30)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Security Middleware Complete Security Middleware Stack should block malicious requests even with full stack" name="Security Middleware Complete Security Middleware Stack should block malicious requests even with full stack" time="0.009">
    </testcase>
  </testsuite>
  <testsuite name="Sanitization Middleware" errors="0" failures="1" skipped="0" timestamp="2025-06-19T14:53:03" time="0.603" tests="11">
    <testcase classname="Sanitization Middleware createSanitizationMiddleware should sanitize body, query, and params by default" name="Sanitization Middleware createSanitizationMiddleware should sanitize body, query, and params by default" time="0.009">
    </testcase>
    <testcase classname="Sanitization Middleware createSanitizationMiddleware should use specified presets" name="Sanitization Middleware createSanitizationMiddleware should use specified presets" time="0.001">
    </testcase>
    <testcase classname="Sanitization Middleware createSanitizationMiddleware should skip routes matching a pattern" name="Sanitization Middleware createSanitizationMiddleware should skip routes matching a pattern" time="0">
    </testcase>
    <testcase classname="Sanitization Middleware createSanitizationMiddleware should apply custom sanitizers" name="Sanitization Middleware createSanitizationMiddleware should apply custom sanitizers" time="0">
    </testcase>
    <testcase classname="Sanitization Middleware createSanitizationMiddleware should handle nested objects" name="Sanitization Middleware createSanitizationMiddleware should handle nested objects" time="0.001">
    </testcase>
    <testcase classname="Sanitization Middleware Pre-configured SanitizationMiddleware SanitizationMiddleware.apiParams should use strict sanitization" name="Sanitization Middleware Pre-configured SanitizationMiddleware SanitizationMiddleware.apiParams should use strict sanitization" time="0.004">
    </testcase>
    <testcase classname="Sanitization Middleware Pre-configured SanitizationMiddleware SanitizationMiddleware.formInput should allow some HTML" name="Sanitization Middleware Pre-configured SanitizationMiddleware SanitizationMiddleware.formInput should allow some HTML" time="0.004">
    </testcase>
    <testcase classname="Sanitization Middleware Pre-configured SanitizationMiddleware SanitizationMiddleware.richText should allow more formatting" name="Sanitization Middleware Pre-configured SanitizationMiddleware SanitizationMiddleware.richText should allow more formatting" time="0.004">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: &quot;&lt;b&gt;Bold&lt;/b&gt; &lt;a href=\&quot;http://example.com\&quot;&gt;link&lt;/a&gt;&quot;
Received: &quot;&lt;b&gt;Bold&lt;/b&gt; &lt;a href=\&quot;http://example.com\&quot; rel=\&quot;noopener noreferrer\&quot; target=\&quot;_blank\&quot;&gt;link&lt;/a&gt;&quot;
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/middleware/__tests__/sanitization.test.ts:120:42)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Sanitization Middleware ManualSanitization ManualSanitization.formData should sanitize object" name="Sanitization Middleware ManualSanitization ManualSanitization.formData should sanitize object" time="0.002">
    </testcase>
    <testcase classname="Sanitization Middleware ManualSanitization ManualSanitization.apiResponse should sanitize strictly" name="Sanitization Middleware ManualSanitization ManualSanitization.apiResponse should sanitize strictly" time="0.003">
    </testcase>
    <testcase classname="Sanitization Middleware ManualSanitization ManualSanitization.logMessage should strip HTML and newlines" name="Sanitization Middleware ManualSanitization ManualSanitization.logMessage should strip HTML and newlines" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="Logging and Monitoring Integration Tests" errors="0" failures="10" skipped="0" timestamp="2025-06-19T14:53:04" time="0.298" tests="10">
    <testcase classname="Logging and Monitoring Integration Tests Workflow Execution Logging should produce detailed logs for successful workflow execution" name="Logging and Monitoring Integration Tests Workflow Execution Logging should produce detailed logs for successful workflow execution" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-logging-monitoring.test.ts:17:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockRestore&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-logging-monitoring.test.ts:22:19)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Logging and Monitoring Integration Tests Workflow Execution Logging should produce detailed logs for failed workflow execution" name="Logging and Monitoring Integration Tests Workflow Execution Logging should produce detailed logs for failed workflow execution" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-logging-monitoring.test.ts:17:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockRestore&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-logging-monitoring.test.ts:22:19)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Logging and Monitoring Integration Tests Workflow Execution Logging should log data transformation stages correctly" name="Logging and Monitoring Integration Tests Workflow Execution Logging should log data transformation stages correctly" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-logging-monitoring.test.ts:17:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockRestore&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-logging-monitoring.test.ts:22:19)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Logging and Monitoring Integration Tests Workflow Execution Logging should log performance metrics for each workflow" name="Logging and Monitoring Integration Tests Workflow Execution Logging should log performance metrics for each workflow" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-logging-monitoring.test.ts:17:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockRestore&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-logging-monitoring.test.ts:22:19)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Logging and Monitoring Integration Tests Monitoring Outputs Validation should capture and output execution logs when debug is enabled" name="Logging and Monitoring Integration Tests Monitoring Outputs Validation should capture and output execution logs when debug is enabled" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-logging-monitoring.test.ts:17:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockRestore&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-logging-monitoring.test.ts:22:19)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Logging and Monitoring Integration Tests Monitoring Outputs Validation should not output execution logs when debug is disabled" name="Logging and Monitoring Integration Tests Monitoring Outputs Validation should not output execution logs when debug is disabled" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-logging-monitoring.test.ts:17:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockRestore&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-logging-monitoring.test.ts:22:19)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Logging and Monitoring Integration Tests Monitoring Outputs Validation should provide comprehensive execution statistics" name="Logging and Monitoring Integration Tests Monitoring Outputs Validation should provide comprehensive execution statistics" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-logging-monitoring.test.ts:17:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockRestore&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-logging-monitoring.test.ts:22:19)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Logging and Monitoring Integration Tests Log Content and Formatting should format logs with consistent ISO timestamps" name="Logging and Monitoring Integration Tests Log Content and Formatting should format logs with consistent ISO timestamps" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-logging-monitoring.test.ts:17:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockRestore&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-logging-monitoring.test.ts:22:19)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Logging and Monitoring Integration Tests Log Content and Formatting should include request and response data in logs where appropriate" name="Logging and Monitoring Integration Tests Log Content and Formatting should include request and response data in logs where appropriate" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-logging-monitoring.test.ts:17:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockRestore&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-logging-monitoring.test.ts:22:19)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Logging and Monitoring Integration Tests Log Content and Formatting should serialize error objects correctly in logs" name="Logging and Monitoring Integration Tests Log Content and Formatting should serialize error objects correctly in logs" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-logging-monitoring.test.ts:17:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockRestore&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-logging-monitoring.test.ts:22:19)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Error Scenario Integration Tests" errors="0" failures="25" skipped="0" timestamp="2025-06-19T14:53:04" time="0.324" tests="25">
    <testcase classname="Error Scenario Integration Tests Tally API Error Responses (4xx/5xx) should handle 400 Bad Request from Tally API" name="Error Scenario Integration Tests Tally API Error Responses (4xx/5xx) should handle 400 Bad Request from Tally API" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Scenario Integration Tests Tally API Error Responses (4xx/5xx) should handle 401 Unauthorized from Tally API" name="Error Scenario Integration Tests Tally API Error Responses (4xx/5xx) should handle 401 Unauthorized from Tally API" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Scenario Integration Tests Tally API Error Responses (4xx/5xx) should handle 403 Forbidden from Tally API" name="Error Scenario Integration Tests Tally API Error Responses (4xx/5xx) should handle 403 Forbidden from Tally API" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Scenario Integration Tests Tally API Error Responses (4xx/5xx) should handle 404 Not Found from Tally API" name="Error Scenario Integration Tests Tally API Error Responses (4xx/5xx) should handle 404 Not Found from Tally API" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Scenario Integration Tests Tally API Error Responses (4xx/5xx) should handle 429 Rate Limit from Tally API" name="Error Scenario Integration Tests Tally API Error Responses (4xx/5xx) should handle 429 Rate Limit from Tally API" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Scenario Integration Tests Tally API Error Responses (4xx/5xx) should handle 500 Internal Server Error from Tally API" name="Error Scenario Integration Tests Tally API Error Responses (4xx/5xx) should handle 500 Internal Server Error from Tally API" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Scenario Integration Tests Tally API Error Responses (4xx/5xx) should handle 503 Service Unavailable from Tally API" name="Error Scenario Integration Tests Tally API Error Responses (4xx/5xx) should handle 503 Service Unavailable from Tally API" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Scenario Integration Tests Network Timeout Scenarios should handle network timeout during form creation" name="Error Scenario Integration Tests Network Timeout Scenarios should handle network timeout during form creation" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Scenario Integration Tests Network Timeout Scenarios should handle timeout during form modification" name="Error Scenario Integration Tests Network Timeout Scenarios should handle timeout during form modification" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Scenario Integration Tests Network Timeout Scenarios should handle timeout during submission retrieval" name="Error Scenario Integration Tests Network Timeout Scenarios should handle timeout during submission retrieval" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Scenario Integration Tests Authentication Failure Scenarios should handle expired API key" name="Error Scenario Integration Tests Authentication Failure Scenarios should handle expired API key" time="0.003">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Scenario Integration Tests Authentication Failure Scenarios should handle invalid API key format" name="Error Scenario Integration Tests Authentication Failure Scenarios should handle invalid API key format" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Scenario Integration Tests Authentication Failure Scenarios should handle missing API key" name="Error Scenario Integration Tests Authentication Failure Scenarios should handle missing API key" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Scenario Integration Tests Malformed Request Scenarios should handle invalid JSON-RPC format" name="Error Scenario Integration Tests Malformed Request Scenarios should handle invalid JSON-RPC format" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Scenario Integration Tests Malformed Request Scenarios should handle missing required parameters" name="Error Scenario Integration Tests Malformed Request Scenarios should handle missing required parameters" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Scenario Integration Tests Malformed Request Scenarios should handle invalid tool name" name="Error Scenario Integration Tests Malformed Request Scenarios should handle invalid tool name" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Scenario Integration Tests Malformed Request Scenarios should handle invalid method name" name="Error Scenario Integration Tests Malformed Request Scenarios should handle invalid method name" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Scenario Integration Tests Malformed Request Scenarios should handle corrupted data payload" name="Error Scenario Integration Tests Malformed Request Scenarios should handle corrupted data payload" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Scenario Integration Tests Error Propagation and Transformation should properly transform Tally API errors to MCP format" name="Error Scenario Integration Tests Error Propagation and Transformation should properly transform Tally API errors to MCP format" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Scenario Integration Tests Error Propagation and Transformation should include proper error codes and messages" name="Error Scenario Integration Tests Error Propagation and Transformation should include proper error codes and messages" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Scenario Integration Tests Error Propagation and Transformation should preserve error context and details" name="Error Scenario Integration Tests Error Propagation and Transformation should preserve error context and details" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Scenario Integration Tests Error Logging and Monitoring should log errors with sufficient detail for debugging" name="Error Scenario Integration Tests Error Logging and Monitoring should log errors with sufficient detail for debugging" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Scenario Integration Tests Error Logging and Monitoring should capture error timing and performance metrics" name="Error Scenario Integration Tests Error Logging and Monitoring should capture error timing and performance metrics" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Scenario Integration Tests Fallback and Recovery Mechanisms should handle graceful degradation when possible" name="Error Scenario Integration Tests Fallback and Recovery Mechanisms should handle graceful degradation when possible" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Scenario Integration Tests Fallback and Recovery Mechanisms should provide meaningful error messages to users" name="Error Scenario Integration Tests Fallback and Recovery Mechanisms should provide meaningful error messages to users" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-error-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
  </testsuite>
  <testsuite name="User Workflow Integration Tests" errors="0" failures="6" skipped="0" timestamp="2025-06-19T14:53:05" time="0.43" tests="6">
    <testcase classname="User Workflow Integration Tests Form Creation Workflow should create a form from a natural language prompt via MCP" name="User Workflow Integration Tests Form Creation Workflow should create a form from a natural language prompt via MCP" time="0.002">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow.integration.test.ts:76:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="User Workflow Integration Tests Form Modification Workflow should modify a form from a natural language prompt via MCP" name="User Workflow Integration Tests Form Modification Workflow should modify a form from a natural language prompt via MCP" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow.integration.test.ts:76:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="User Workflow Integration Tests Form Sharing Workflow should get form sharing details via MCP" name="User Workflow Integration Tests Form Sharing Workflow should get form sharing details via MCP" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow.integration.test.ts:76:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="User Workflow Integration Tests Team Management Workflow should invite a team member via MCP" name="User Workflow Integration Tests Team Management Workflow should invite a team member via MCP" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow.integration.test.ts:76:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="User Workflow Integration Tests Submission Management Workflow should get form submissions via MCP" name="User Workflow Integration Tests Submission Management Workflow should get form submissions via MCP" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow.integration.test.ts:76:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="User Workflow Integration Tests Template Workflow should create a form from a template via MCP" name="User Workflow Integration Tests Template Workflow should create a form from a template via MCP" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow.integration.test.ts:76:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Successful Workflow Integration Tests" errors="0" failures="14" skipped="0" timestamp="2025-06-19T14:53:05" time="0.298" tests="14">
    <testcase classname="Successful Workflow Integration Tests Form Creation Workflow should complete form creation workflow with data transformation validation" name="Successful Workflow Integration Tests Form Creation Workflow should complete form creation workflow with data transformation validation" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-success-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-success-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Successful Workflow Integration Tests Form Creation Workflow should handle form creation with complex question types" name="Successful Workflow Integration Tests Form Creation Workflow should handle form creation with complex question types" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-success-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-success-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Successful Workflow Integration Tests Form Creation Workflow should validate form creation with custom branding and themes" name="Successful Workflow Integration Tests Form Creation Workflow should validate form creation with custom branding and themes" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-success-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-success-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Successful Workflow Integration Tests Form Modification Workflow should complete form modification workflow with validation" name="Successful Workflow Integration Tests Form Modification Workflow should complete form modification workflow with validation" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-success-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-success-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Successful Workflow Integration Tests Form Modification Workflow should handle complex form modifications" name="Successful Workflow Integration Tests Form Modification Workflow should handle complex form modifications" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-success-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-success-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Successful Workflow Integration Tests Form Retrieval Workflow should complete form retrieval workflow with data integrity validation" name="Successful Workflow Integration Tests Form Retrieval Workflow should complete form retrieval workflow with data integrity validation" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-success-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-success-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Successful Workflow Integration Tests Submission Creation and Retrieval Workflows should complete submission creation workflow" name="Successful Workflow Integration Tests Submission Creation and Retrieval Workflows should complete submission creation workflow" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-success-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-success-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Successful Workflow Integration Tests Submission Creation and Retrieval Workflows should complete submission retrieval workflow" name="Successful Workflow Integration Tests Submission Creation and Retrieval Workflows should complete submission retrieval workflow" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-success-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-success-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Successful Workflow Integration Tests Submission Creation and Retrieval Workflows should handle filtered submission retrieval" name="Successful Workflow Integration Tests Submission Creation and Retrieval Workflows should handle filtered submission retrieval" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-success-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-success-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Successful Workflow Integration Tests Workspace Management Workflows should complete team member invitation workflow" name="Successful Workflow Integration Tests Workspace Management Workflows should complete team member invitation workflow" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-success-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-success-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Successful Workflow Integration Tests Workspace Management Workflows should handle workspace configuration updates" name="Successful Workflow Integration Tests Workspace Management Workflows should handle workspace configuration updates" time="0.003">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-success-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-success-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Successful Workflow Integration Tests Data Integrity and Transformation Validation should validate complete data round-trip integrity" name="Successful Workflow Integration Tests Data Integrity and Transformation Validation should validate complete data round-trip integrity" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-success-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-success-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Successful Workflow Integration Tests Data Integrity and Transformation Validation should handle unicode and special characters correctly" name="Successful Workflow Integration Tests Data Integrity and Transformation Validation should handle unicode and special characters correctly" time="0">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-success-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-success-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Successful Workflow Integration Tests Performance and Timing Validation should complete workflows within acceptable time limits" name="Successful Workflow Integration Tests Performance and Timing Validation should complete workflows within acceptable time limits" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-success-scenarios.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-success-scenarios.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
  </testsuite>
  <testsuite name="JSON-RPC 2.0 Message Validation" errors="0" failures="18" skipped="0" timestamp="2025-06-19T14:53:05" time="0.309" tests="18">
    <testcase classname="JSON-RPC 2.0 Message Validation JSON-RPC 2.0 Structure Compliance should process a valid request and return a valid response" name="JSON-RPC 2.0 Message Validation JSON-RPC 2.0 Structure Compliance should process a valid request and return a valid response" time="0.002">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/json-rpc-message-validation.test.ts:59:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="JSON-RPC 2.0 Message Validation JSON-RPC 2.0 Structure Compliance should include correct jsonrpc version in all responses" name="JSON-RPC 2.0 Message Validation JSON-RPC 2.0 Structure Compliance should include correct jsonrpc version in all responses" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/json-rpc-message-validation.test.ts:59:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="JSON-RPC 2.0 Message Validation JSON-RPC 2.0 Structure Compliance should handle initialize request correctly" name="JSON-RPC 2.0 Message Validation JSON-RPC 2.0 Structure Compliance should handle initialize request correctly" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/json-rpc-message-validation.test.ts:59:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="JSON-RPC 2.0 Message Validation JSON-RPC 2.0 Error Handling should return Invalid Request (-32600) for missing jsonrpc field" name="JSON-RPC 2.0 Message Validation JSON-RPC 2.0 Error Handling should return Invalid Request (-32600) for missing jsonrpc field" time="0">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/json-rpc-message-validation.test.ts:59:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="JSON-RPC 2.0 Message Validation JSON-RPC 2.0 Error Handling should return Invalid Request (-32600) for wrong jsonrpc version" name="JSON-RPC 2.0 Message Validation JSON-RPC 2.0 Error Handling should return Invalid Request (-32600) for wrong jsonrpc version" time="0">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/json-rpc-message-validation.test.ts:59:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="JSON-RPC 2.0 Message Validation JSON-RPC 2.0 Error Handling should return Invalid Request (-32600) for missing method field" name="JSON-RPC 2.0 Message Validation JSON-RPC 2.0 Error Handling should return Invalid Request (-32600) for missing method field" time="0">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/json-rpc-message-validation.test.ts:59:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="JSON-RPC 2.0 Message Validation JSON-RPC 2.0 Error Handling should return Invalid Request (-32600) for non-string method" name="JSON-RPC 2.0 Message Validation JSON-RPC 2.0 Error Handling should return Invalid Request (-32600) for non-string method" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/json-rpc-message-validation.test.ts:59:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="JSON-RPC 2.0 Message Validation JSON-RPC 2.0 Error Handling should return Method Not Found (-32601) error" name="JSON-RPC 2.0 Message Validation JSON-RPC 2.0 Error Handling should return Method Not Found (-32601) error" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/json-rpc-message-validation.test.ts:59:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="JSON-RPC 2.0 Message Validation JSON-RPC 2.0 Error Handling should return Internal Error (-32603) for invalid params on tools/call" name="JSON-RPC 2.0 Message Validation JSON-RPC 2.0 Error Handling should return Internal Error (-32603) for invalid params on tools/call" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/json-rpc-message-validation.test.ts:59:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="JSON-RPC 2.0 Message Validation JSON-RPC 2.0 Error Handling should handle null and undefined messages" name="JSON-RPC 2.0 Message Validation JSON-RPC 2.0 Error Handling should handle null and undefined messages" time="0">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/json-rpc-message-validation.test.ts:59:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="JSON-RPC 2.0 Message Validation JSON-RPC 2.0 Error Handling should handle empty object message" name="JSON-RPC 2.0 Message Validation JSON-RPC 2.0 Error Handling should handle empty object message" time="0">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/json-rpc-message-validation.test.ts:59:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="JSON-RPC 2.0 Message Validation JSON-RPC 2.0 Error Handling should handle array message (not allowed)" name="JSON-RPC 2.0 Message Validation JSON-RPC 2.0 Error Handling should handle array message (not allowed)" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/json-rpc-message-validation.test.ts:59:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="JSON-RPC 2.0 Message Validation MCP Protocol Specific Validation should handle tools/list request correctly" name="JSON-RPC 2.0 Message Validation MCP Protocol Specific Validation should handle tools/list request correctly" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/json-rpc-message-validation.test.ts:59:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="JSON-RPC 2.0 Message Validation MCP Protocol Specific Validation should handle prompts/list request correctly" name="JSON-RPC 2.0 Message Validation MCP Protocol Specific Validation should handle prompts/list request correctly" time="0">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/json-rpc-message-validation.test.ts:59:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="JSON-RPC 2.0 Message Validation MCP Protocol Specific Validation should handle resources/list request correctly" name="JSON-RPC 2.0 Message Validation MCP Protocol Specific Validation should handle resources/list request correctly" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/json-rpc-message-validation.test.ts:59:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="JSON-RPC 2.0 Message Validation MCP Protocol Specific Validation should handle missing optional params field" name="JSON-RPC 2.0 Message Validation MCP Protocol Specific Validation should handle missing optional params field" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/json-rpc-message-validation.test.ts:59:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="JSON-RPC 2.0 Message Validation MCP Protocol Specific Validation should preserve request ID in response" name="JSON-RPC 2.0 Message Validation MCP Protocol Specific Validation should preserve request ID in response" time="0">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/json-rpc-message-validation.test.ts:59:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="JSON-RPC 2.0 Message Validation MCP Protocol Specific Validation should handle special characters in method names" name="JSON-RPC 2.0 Message Validation MCP Protocol Specific Validation should handle special characters in method names" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/json-rpc-message-validation.test.ts:59:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Error Handling and Logging Infrastructure" errors="0" failures="13" skipped="0" timestamp="2025-06-19T14:53:06" time="0.284" tests="13">
    <testcase classname="Error Handling and Logging Infrastructure Structured Logging should support different log levels" name="Error Handling and Logging Infrastructure Structured Logging should support different log levels" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/error-handling-logging.test.ts:26:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/error-handling-logging.test.ts:34:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Handling and Logging Infrastructure Structured Logging should redact sensitive information" name="Error Handling and Logging Infrastructure Structured Logging should redact sensitive information" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/error-handling-logging.test.ts:26:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/error-handling-logging.test.ts:34:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Handling and Logging Infrastructure Structured Logging should respect log level configuration" name="Error Handling and Logging Infrastructure Structured Logging should respect log level configuration" time="0.003">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/error-handling-logging.test.ts:26:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/error-handling-logging.test.ts:34:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Handling and Logging Infrastructure Error Metrics should track error metrics" name="Error Handling and Logging Infrastructure Error Metrics should track error metrics" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/error-handling-logging.test.ts:26:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/error-handling-logging.test.ts:34:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Handling and Logging Infrastructure Error Metrics should initialize with zero errors" name="Error Handling and Logging Infrastructure Error Metrics should initialize with zero errors" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/error-handling-logging.test.ts:26:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/error-handling-logging.test.ts:34:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Handling and Logging Infrastructure Logger Configuration should merge logger config with defaults" name="Error Handling and Logging Infrastructure Logger Configuration should merge logger config with defaults" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/error-handling-logging.test.ts:26:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/error-handling-logging.test.ts:34:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Handling and Logging Infrastructure Logger Configuration should have appropriate sensitive fields configured" name="Error Handling and Logging Infrastructure Logger Configuration should have appropriate sensitive fields configured" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/error-handling-logging.test.ts:26:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/error-handling-logging.test.ts:34:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Handling and Logging Infrastructure Error Categories should have all required error categories" name="Error Handling and Logging Infrastructure Error Categories should have all required error categories" time="0">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/error-handling-logging.test.ts:26:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/error-handling-logging.test.ts:34:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Handling and Logging Infrastructure Integration with Health Monitoring should integrate error metrics with health monitoring" name="Error Handling and Logging Infrastructure Integration with Health Monitoring should integrate error metrics with health monitoring" time="0">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/error-handling-logging.test.ts:26:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/error-handling-logging.test.ts:34:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Handling and Logging Infrastructure Request Context Preservation should handle request ID generation" name="Error Handling and Logging Infrastructure Request Context Preservation should handle request ID generation" time="0">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/error-handling-logging.test.ts:26:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/error-handling-logging.test.ts:34:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Handling and Logging Infrastructure Server State Integration should maintain consistent state with enhanced logging" name="Error Handling and Logging Infrastructure Server State Integration should maintain consistent state with enhanced logging" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/error-handling-logging.test.ts:26:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/error-handling-logging.test.ts:34:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Handling and Logging Infrastructure Backward Compatibility should maintain compatibility with existing functionality" name="Error Handling and Logging Infrastructure Backward Compatibility should maintain compatibility with existing functionality" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/error-handling-logging.test.ts:26:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/error-handling-logging.test.ts:34:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Error Handling and Logging Infrastructure Backward Compatibility should support debug mode configuration" name="Error Handling and Logging Infrastructure Backward Compatibility should support debug mode configuration" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/error-handling-logging.test.ts:26:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/error-handling-logging.test.ts:34:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
  </testsuite>
  <testsuite name="MCP Capability Negotiation" errors="0" failures="12" skipped="0" timestamp="2025-06-19T14:53:06" time="0.272" tests="12">
    <testcase classname="MCP Capability Negotiation Protocol Version Negotiation should accept matching protocol version" name="MCP Capability Negotiation Protocol Version Negotiation should accept matching protocol version" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/capability-negotiation.test.ts:155:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="MCP Capability Negotiation Protocol Version Negotiation should reject unsupported protocol version" name="MCP Capability Negotiation Protocol Version Negotiation should reject unsupported protocol version" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/capability-negotiation.test.ts:155:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="MCP Capability Negotiation Protocol Version Negotiation should handle missing protocol version" name="MCP Capability Negotiation Protocol Version Negotiation should handle missing protocol version" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/capability-negotiation.test.ts:155:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="MCP Capability Negotiation Capability Discovery should advertise supported capabilities in SSE connection" name="MCP Capability Negotiation Capability Discovery should advertise supported capabilities in SSE connection" time="0">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/capability-negotiation.test.ts:155:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="MCP Capability Negotiation Capability Discovery should include full capability details in initialization response" name="MCP Capability Negotiation Capability Discovery should include full capability details in initialization response" time="0">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/capability-negotiation.test.ts:155:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="MCP Capability Negotiation Capability Negotiation should handle client requesting unsupported capability" name="MCP Capability Negotiation Capability Negotiation should handle client requesting unsupported capability" time="0">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/capability-negotiation.test.ts:155:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="MCP Capability Negotiation Capability Negotiation should respect client capability preferences" name="MCP Capability Negotiation Capability Negotiation should respect client capability preferences" time="0.004">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/capability-negotiation.test.ts:155:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="MCP Capability Negotiation Capability Negotiation should handle missing client capabilities gracefully" name="MCP Capability Negotiation Capability Negotiation should handle missing client capabilities gracefully" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/capability-negotiation.test.ts:155:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="MCP Capability Negotiation Capability Updates should notify clients when tool list changes" name="MCP Capability Negotiation Capability Updates should notify clients when tool list changes" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/capability-negotiation.test.ts:155:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="MCP Capability Negotiation Capability Updates should maintain capability state across reconnections" name="MCP Capability Negotiation Capability Updates should maintain capability state across reconnections" time="0">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/capability-negotiation.test.ts:155:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="MCP Capability Negotiation Error Handling should handle malformed capability objects" name="MCP Capability Negotiation Error Handling should handle malformed capability objects" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/capability-negotiation.test.ts:155:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="MCP Capability Negotiation Error Handling should handle invalid capability values" name="MCP Capability Negotiation Error Handling should handle invalid capability values" time="0">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/capability-negotiation.test.ts:155:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Health Check Endpoint and Monitoring" errors="0" failures="12" skipped="0" timestamp="2025-06-19T14:53:06" time="0.277" tests="12">
    <testcase classname="Health Check Endpoint and Monitoring Health Metrics Collection should collect comprehensive health metrics" name="Health Check Endpoint and Monitoring Health Metrics Collection should collect comprehensive health metrics" time="0.002">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/health-check.test.ts:23:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/health-check.test.ts:35:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Health Check Endpoint and Monitoring Health Metrics Collection should track uptime correctly" name="Health Check Endpoint and Monitoring Health Metrics Collection should track uptime correctly" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/health-check.test.ts:23:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/health-check.test.ts:35:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Health Check Endpoint and Monitoring Health Metrics Collection should report healthy status for running server" name="Health Check Endpoint and Monitoring Health Metrics Collection should report healthy status for running server" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/health-check.test.ts:23:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/health-check.test.ts:35:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Health Check Endpoint and Monitoring Health Check Endpoint should respond to /health endpoint with comprehensive metrics" name="Health Check Endpoint and Monitoring Health Check Endpoint should respond to /health endpoint with comprehensive metrics" time="0.004">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/health-check.test.ts:23:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/health-check.test.ts:35:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Health Check Endpoint and Monitoring Health Check Endpoint should return 503 status when server is unhealthy" name="Health Check Endpoint and Monitoring Health Check Endpoint should return 503 status when server is unhealthy" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/health-check.test.ts:23:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/health-check.test.ts:35:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Health Check Endpoint and Monitoring Health Check Endpoint should handle health check errors gracefully" name="Health Check Endpoint and Monitoring Health Check Endpoint should handle health check errors gracefully" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/health-check.test.ts:23:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/health-check.test.ts:35:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Health Check Endpoint and Monitoring Request Statistics Tracking should track request counts" name="Health Check Endpoint and Monitoring Request Statistics Tracking should track request counts" time="0">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/health-check.test.ts:23:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/health-check.test.ts:35:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Health Check Endpoint and Monitoring Request Statistics Tracking should track error counts" name="Health Check Endpoint and Monitoring Request Statistics Tracking should track error counts" time="0">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/health-check.test.ts:23:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/health-check.test.ts:35:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Health Check Endpoint and Monitoring Backward Compatibility should maintain basic info endpoint at /" name="Health Check Endpoint and Monitoring Backward Compatibility should maintain basic info endpoint at /" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/health-check.test.ts:23:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/health-check.test.ts:35:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Health Check Endpoint and Monitoring System Resource Monitoring should provide valid memory statistics" name="Health Check Endpoint and Monitoring System Resource Monitoring should provide valid memory statistics" time="0">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/health-check.test.ts:23:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/health-check.test.ts:35:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Health Check Endpoint and Monitoring System Resource Monitoring should provide valid CPU statistics" name="Health Check Endpoint and Monitoring System Resource Monitoring should provide valid CPU statistics" time="0">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/health-check.test.ts:23:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/health-check.test.ts:35:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Health Check Endpoint and Monitoring System Resource Monitoring should provide valid system information" name="Health Check Endpoint and Monitoring System Resource Monitoring should provide valid system information" time="0">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/health-check.test.ts:23:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/health-check.test.ts:35:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Concurrency and Performance Integration Tests" errors="0" failures="9" skipped="0" timestamp="2025-06-19T14:53:07" time="0.304" tests="9">
    <testcase classname="Concurrency and Performance Integration Tests Concurrent Workflow Execution should handle multiple concurrent form creation workflows without errors" name="Concurrency and Performance Integration Tests Concurrent Workflow Execution should handle multiple concurrent form creation workflows without errors" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-concurrency-performance.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-concurrency-performance.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Concurrency and Performance Integration Tests Concurrent Workflow Execution should handle a mix of concurrent read and write workflows" name="Concurrency and Performance Integration Tests Concurrent Workflow Execution should handle a mix of concurrent read and write workflows" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-concurrency-performance.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-concurrency-performance.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Concurrency and Performance Integration Tests Concurrent Workflow Execution should maintain data integrity under high concurrency" name="Concurrency and Performance Integration Tests Concurrent Workflow Execution should maintain data integrity under high concurrency" time="0.002">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-concurrency-performance.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-concurrency-performance.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Concurrency and Performance Integration Tests Performance and Timing Validation should execute a single simple workflow within a strict time limit" name="Concurrency and Performance Integration Tests Performance and Timing Validation should execute a single simple workflow within a strict time limit" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-concurrency-performance.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-concurrency-performance.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Concurrency and Performance Integration Tests Performance and Timing Validation should maintain acceptable performance under moderate load" name="Concurrency and Performance Integration Tests Performance and Timing Validation should maintain acceptable performance under moderate load" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-concurrency-performance.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-concurrency-performance.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Concurrency and Performance Integration Tests Performance and Timing Validation should measure and validate performance of complex workflows" name="Concurrency and Performance Integration Tests Performance and Timing Validation should measure and validate performance of complex workflows" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-concurrency-performance.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-concurrency-performance.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Concurrency and Performance Integration Tests Data Integrity and Race Condition Validation should prevent data corruption when modifying the same resource concurrently" name="Concurrency and Performance Integration Tests Data Integrity and Race Condition Validation should prevent data corruption when modifying the same resource concurrently" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-concurrency-performance.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-concurrency-performance.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Concurrency and Performance Integration Tests Data Integrity and Race Condition Validation should ensure thread safety for shared resources" name="Concurrency and Performance Integration Tests Data Integrity and Race Condition Validation should ensure thread safety for shared resources" time="0.001">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-concurrency-performance.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-concurrency-performance.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Concurrency and Performance Integration Tests Workflow Rollback Testing should test partial failure scenarios and confirm proper cleanup" name="Concurrency and Performance Integration Tests Workflow Rollback Testing should test partial failure scenarios and confirm proper cleanup" time="0.006">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockImplementation&apos;)
    at WorkflowIntegrationTestSuite.setupMockResponses (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:184:26)
    at WorkflowIntegrationTestSuite.setUp (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:109:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-concurrency-performance.test.ts:16:21)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;mockClear&apos;)
    at WorkflowIntegrationTestSuite.clearAllMocks (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:204:26)
    at WorkflowIntegrationTestSuite.tearDown (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/WorkflowIntegrationTestSuite.ts:144:12)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/workflow-concurrency-performance.test.ts:21:23)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
  </testsuite>
  <testsuite name="MCPServer Lifecycle Management" errors="0" failures="9" skipped="0" timestamp="2025-06-19T14:53:07" time="0.263" tests="9">
    <testcase classname="MCPServer Lifecycle Management Server Initialization should initialize server successfully" name="MCPServer Lifecycle Management Server Initialization should initialize server successfully" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/server-lifecycle.test.ts:29:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/server-lifecycle.test.ts:45:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="MCPServer Lifecycle Management Server Initialization should not allow initialization when not stopped" name="MCPServer Lifecycle Management Server Initialization should not allow initialization when not stopped" time="0.003">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/server-lifecycle.test.ts:29:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/server-lifecycle.test.ts:45:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="MCPServer Lifecycle Management Server Initialization should serve basic endpoint after initialization" name="MCPServer Lifecycle Management Server Initialization should serve basic endpoint after initialization" time="0">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/server-lifecycle.test.ts:29:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/server-lifecycle.test.ts:45:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="MCPServer Lifecycle Management Server Initialization should handle initialization errors gracefully" name="MCPServer Lifecycle Management Server Initialization should handle initialization errors gracefully" time="0">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/server-lifecycle.test.ts:29:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/server-lifecycle.test.ts:45:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="MCPServer Lifecycle Management Server Shutdown should shutdown server gracefully" name="MCPServer Lifecycle Management Server Shutdown should shutdown server gracefully" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/server-lifecycle.test.ts:29:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/server-lifecycle.test.ts:45:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="MCPServer Lifecycle Management Server Shutdown should handle shutdown when already stopped" name="MCPServer Lifecycle Management Server Shutdown should handle shutdown when already stopped" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/server-lifecycle.test.ts:29:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/server-lifecycle.test.ts:45:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="MCPServer Lifecycle Management Server Shutdown should close server endpoint after shutdown" name="MCPServer Lifecycle Management Server Shutdown should close server endpoint after shutdown" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/server-lifecycle.test.ts:29:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/server-lifecycle.test.ts:45:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="MCPServer Lifecycle Management Server State Management should track state transitions correctly" name="MCPServer Lifecycle Management Server State Management should track state transitions correctly" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/server-lifecycle.test.ts:29:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/server-lifecycle.test.ts:45:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="MCPServer Lifecycle Management Configuration Handling should use custom configuration during initialization" name="MCPServer Lifecycle Management Configuration Handling should use custom configuration during initialization" time="0">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/server-lifecycle.test.ts:29:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
      <failure>TypeError: Cannot read properties of undefined (reading &apos;getState&apos;)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/server-lifecycle.test.ts:45:16)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:254:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
  </testsuite>
  <testsuite name="MCPServer Class Structure" errors="0" failures="6" skipped="0" timestamp="2025-06-19T14:53:07" time="0.232" tests="8">
    <testcase classname="MCPServer Class Structure should instantiate with default configuration" name="MCPServer Class Structure should instantiate with default configuration" time="0.002">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/server.test.ts:12:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="MCPServer Class Structure should accept custom configuration" name="MCPServer Class Structure should accept custom configuration" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/server.test.ts:12:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="MCPServer Class Structure should merge custom config with defaults" name="MCPServer Class Structure should merge custom config with defaults" time="0">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/server.test.ts:12:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="MCPServer Class Structure should have correct initial state" name="MCPServer Class Structure should have correct initial state" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/server.test.ts:12:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="MCPServer Class Structure should handle server lifecycle methods" name="MCPServer Class Structure should handle server lifecycle methods" time="0.001">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/server.test.ts:12:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="MCPServer Class Structure should return immutable config copy" name="MCPServer Class Structure should return immutable config copy" time="0">
      <failure>Error: Server does not support tools (required for tools/list)
    at MCPServer.assertRequestHandlerCapability (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/server/index.ts:233:17)
    at MCPServer.setRequestHandler (/Users/cryophobic/dev/projects/tally-mcp/node_modules/@modelcontextprotocol/sdk/src/shared/protocol.ts:644:10)
    at MCPServer.setupMCPHandlers (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:1700:10)
    at new MCPServer (/Users/cryophobic/dev/projects/tally-mcp/src/server.ts:389:10)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/server.test.ts:12:14)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:281:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:246:5)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Default Configuration should have sensible defaults" name="Default Configuration should have sensible defaults" time="0.001">
    </testcase>
    <testcase classname="ServerState Enum should have all expected states" name="ServerState Enum should have all expected states" time="0">
    </testcase>
  </testsuite>
  <testsuite name="Input Sanitization" errors="0" failures="2" skipped="0" timestamp="2025-06-19T14:53:07" time="0.218" tests="13">
    <testcase classname="Input Sanitization sanitizeString should remove or neutralize dangerous string: scriptTag" name="Input Sanitization sanitizeString should remove or neutralize dangerous string: scriptTag" time="0.002">
    </testcase>
    <testcase classname="Input Sanitization sanitizeString should remove or neutralize dangerous string: javascriptProtocol" name="Input Sanitization sanitizeString should remove or neutralize dangerous string: javascriptProtocol" time="0.001">
    </testcase>
    <testcase classname="Input Sanitization sanitizeString should remove or neutralize dangerous string: eventHandler" name="Input Sanitization sanitizeString should remove or neutralize dangerous string: eventHandler" time="0.002">
    </testcase>
    <testcase classname="Input Sanitization sanitizeString should remove or neutralize dangerous string: iframeTag" name="Input Sanitization sanitizeString should remove or neutralize dangerous string: iframeTag" time="0.002">
    </testcase>
    <testcase classname="Input Sanitization sanitizeString should remove or neutralize dangerous string: unclosedTag" name="Input Sanitization sanitizeString should remove or neutralize dangerous string: unclosedTag" time="0.001">
    </testcase>
    <testcase classname="Input Sanitization sanitizeString should correctly handle safe string: plainText" name="Input Sanitization sanitizeString should correctly handle safe string: plainText" time="0.005">
    </testcase>
    <testcase classname="Input Sanitization sanitizeString should correctly handle safe string: withFormatting" name="Input Sanitization sanitizeString should correctly handle safe string: withFormatting" time="0.001">
    </testcase>
    <testcase classname="Input Sanitization sanitizeString should correctly handle safe string: withLinks" name="Input Sanitization sanitizeString should correctly handle safe string: withLinks" time="0.002">
    </testcase>
    <testcase classname="Input Sanitization sanitizeString should correctly handle safe string: textWithNumbers" name="Input Sanitization sanitizeString should correctly handle safe string: textWithNumbers" time="0">
    </testcase>
    <testcase classname="Input Sanitization sanitizeString should correctly handle non-string inputs" name="Input Sanitization sanitizeString should correctly handle non-string inputs" time="0.001">
    </testcase>
    <testcase classname="Input Sanitization sanitizeString should add security attributes to links" name="Input Sanitization sanitizeString should add security attributes to links" time="0.001">
    </testcase>
    <testcase classname="Input Sanitization sanitizeObject should recursively sanitize all string values in an object" name="Input Sanitization sanitizeObject should recursively sanitize all string values in an object" time="0.004">
      <failure>Error: expect(received).toMatchSnapshot()

Snapshot name: `Input Sanitization sanitizeObject should recursively sanitize all string values in an object 1`

- Snapshot  - 3
+ Received  + 3

  {
    &quot;count&quot;: 1,
    &quot;details&quot;: {
-     &quot;description&quot;: &quot;&lt;b&gt;This is bold&lt;/b&gt; and &lt;i&gt;this is italic&lt;/i&gt;.&quot;,
-     &quot;link&quot;: &quot;Click me&quot;,
+     &quot;description&quot;: &quot;This is bold and this is italic.&quot;,
+     &quot;link&quot;: &quot;&quot;,
    },
    &quot;meta&quot;: null,
    &quot;name&quot;: &quot;&quot;,
    &quot;tags&quot;: {
-     &quot;0&quot;: &quot;This is a simple, safe string.&quot;,
+     &quot;0&quot;: &quot;This is a safe string.&quot;,
      &quot;1&quot;: &quot;&quot;,
    },
  }
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/utils/__tests__/input-sanitizer.test.ts:65:25)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:316:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Input Sanitization sanitizeArray should recursively sanitize all elements in an array" name="Input Sanitization sanitizeArray should recursively sanitize all elements in an array" time="0.003">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected substring: &quot;&lt;a href&quot;
Received string:    &quot;Example Link&quot;
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/utils/__tests__/input-sanitizer.test.ts:82:28)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:316:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
  </testsuite>
  <testsuite name="FormCreationTool" errors="0" failures="2" skipped="0" timestamp="2025-06-19T14:53:08" time="0.17" tests="13">
    <testcase classname="FormCreationTool constructor should create an instance with correct name and description" name="FormCreationTool constructor should create an instance with correct name and description" time="0.001">
    </testcase>
    <testcase classname="FormCreationTool constructor should initialize all required services" name="FormCreationTool constructor should initialize all required services" time="0.001">
    </testcase>
    <testcase classname="FormCreationTool execute - template creation should create form from template successfully" name="FormCreationTool execute - template creation should create form from template successfully" time="0.001">
    </testcase>
    <testcase classname="FormCreationTool execute - template creation should create form from template without custom title" name="FormCreationTool execute - template creation should create form from template without custom title" time="0.001">
    </testcase>
    <testcase classname="FormCreationTool execute - template creation should throw error when template not found" name="FormCreationTool execute - template creation should throw error when template not found" time="0.005">
    </testcase>
    <testcase classname="FormCreationTool execute - natural language creation should create form from natural language prompt successfully" name="FormCreationTool execute - natural language creation should create form from natural language prompt successfully" time="0.001">
    </testcase>
    <testcase classname="FormCreationTool execute - natural language creation should create form without custom title override" name="FormCreationTool execute - natural language creation should create form without custom title override" time="0.001">
    </testcase>
    <testcase classname="FormCreationTool execute - error scenarios should throw error when neither templateId nor naturalLanguagePrompt provided" name="FormCreationTool execute - error scenarios should throw error when neither templateId nor naturalLanguagePrompt provided" time="0.001">
      <failure>Error: expect(received).rejects.toThrow(expected)

Expected substring: &quot;Either naturalLanguagePrompt or templateId must be provided.&quot;
Received message:   &quot;One of formConfig, naturalLanguagePrompt, or templateId must be provided.&quot;

      78 |
      79 |     if (!formConfig) {
    &gt; 80 |       throw new Error(&apos;One of formConfig, naturalLanguagePrompt, or templateId must be provided.&apos;);
         |             ^
      81 |     }
      82 |
      83 |     let createdTallyForm;

      at FormCreationTool.execute (src/tools/form-creation-tool.ts:80:13)
      at Object.&lt;anonymous&gt; (src/tools/__tests__/form-creation-tool.test.ts:191:25)
    at Object.toThrow (/Users/cryophobic/dev/projects/tally-mcp/node_modules/expect/build/index.js:218:22)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/tools/__tests__/form-creation-tool.test.ts:191:53)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="FormCreationTool execute - error scenarios should propagate API errors from createForm" name="FormCreationTool execute - error scenarios should propagate API errors from createForm" time="0.004">
    </testcase>
    <testcase classname="FormCreationTool execute - error scenarios should handle both templateId and naturalLanguagePrompt (prioritize template)" name="FormCreationTool execute - error scenarios should handle both templateId and naturalLanguagePrompt (prioritize template)" time="0.001">
    </testcase>
    <testcase classname="FormCreationTool execute - edge cases should handle empty string values gracefully" name="FormCreationTool execute - edge cases should handle empty string values gracefully" time="0.001">
    </testcase>
    <testcase classname="FormCreationTool execute - edge cases should handle null/undefined form URL from API" name="FormCreationTool execute - edge cases should handle null/undefined form URL from API" time="0.001">
      <failure>Error: expect(received).toBeUndefined()

Received: &quot;https://tally.so/forms/form123/edit&quot;
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/tools/__tests__/form-creation-tool.test.ts:269:30)</failure>
    </testcase>
    <testcase classname="FormCreationTool logging should log execution arguments" name="FormCreationTool logging should log execution arguments" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="ApiKeyService" errors="0" failures="1" skipped="0" timestamp="2025-06-19T14:53:08" time="0.164" tests="35">
    <testcase classname="ApiKeyService createApiKey should create a new API key with valid input" name="ApiKeyService createApiKey should create a new API key with valid input" time="0.003">
    </testcase>
    <testcase classname="ApiKeyService createApiKey should create API key without optional fields" name="ApiKeyService createApiKey should create API key without optional fields" time="0.001">
    </testcase>
    <testcase classname="ApiKeyService createApiKey should throw error for invalid input" name="ApiKeyService createApiKey should throw error for invalid input" time="0.01">
    </testcase>
    <testcase classname="ApiKeyService validateApiKey should validate a valid API key" name="ApiKeyService validateApiKey should validate a valid API key" time="0.001">
    </testcase>
    <testcase classname="ApiKeyService validateApiKey should reject invalid API key format" name="ApiKeyService validateApiKey should reject invalid API key format" time="0">
    </testcase>
    <testcase classname="ApiKeyService validateApiKey should reject non-existent API key" name="ApiKeyService validateApiKey should reject non-existent API key" time="0.001">
    </testcase>
    <testcase classname="ApiKeyService validateApiKey should reject revoked API key" name="ApiKeyService validateApiKey should reject revoked API key" time="0.001">
    </testcase>
    <testcase classname="ApiKeyService validateApiKey should reject expired API key" name="ApiKeyService validateApiKey should reject expired API key" time="0.001">
    </testcase>
    <testcase classname="ApiKeyService validateApiKey should reject key that exceeded usage limit" name="ApiKeyService validateApiKey should reject key that exceeded usage limit" time="0.001">
    </testcase>
    <testcase classname="ApiKeyService validateApiKey should reject IP not in whitelist" name="ApiKeyService validateApiKey should reject IP not in whitelist" time="0.001">
    </testcase>
    <testcase classname="ApiKeyService validateApiKey should accept IP in whitelist" name="ApiKeyService validateApiKey should accept IP in whitelist" time="0.003">
    </testcase>
    <testcase classname="ApiKeyService listApiKeys should list all API keys" name="ApiKeyService listApiKeys should list all API keys" time="0.001">
    </testcase>
    <testcase classname="ApiKeyService listApiKeys should filter by status" name="ApiKeyService listApiKeys should filter by status" time="0">
    </testcase>
    <testcase classname="ApiKeyService updateApiKey should update API key fields" name="ApiKeyService updateApiKey should update API key fields" time="0.001">
    </testcase>
    <testcase classname="ApiKeyService updateApiKey should return null for non-existent key" name="ApiKeyService updateApiKey should return null for non-existent key" time="0.001">
    </testcase>
    <testcase classname="ApiKeyService rotateApiKey should rotate API key and return new key" name="ApiKeyService rotateApiKey should rotate API key and return new key" time="0">
    </testcase>
    <testcase classname="ApiKeyService rotateApiKey should invalidate old key after rotation" name="ApiKeyService rotateApiKey should invalidate old key after rotation" time="0.001">
    </testcase>
    <testcase classname="ApiKeyService rotateApiKey should return null for non-existent key" name="ApiKeyService rotateApiKey should return null for non-existent key" time="0">
    </testcase>
    <testcase classname="ApiKeyService hasRequiredScopes should return true for admin scope" name="ApiKeyService hasRequiredScopes should return true for admin scope" time="0">
    </testcase>
    <testcase classname="ApiKeyService hasRequiredScopes should return true when all required scopes are present" name="ApiKeyService hasRequiredScopes should return true when all required scopes are present" time="0">
    </testcase>
    <testcase classname="ApiKeyService hasRequiredScopes should return false when required scopes are missing" name="ApiKeyService hasRequiredScopes should return false when required scopes are missing" time="0.001">
    </testcase>
    <testcase classname="ApiKeyService getApiKeyStats should return correct statistics" name="ApiKeyService getApiKeyStats should return correct statistics" time="0.001">
    </testcase>
    <testcase classname="ApiKeyService setupRotation should setup rotation configuration" name="ApiKeyService setupRotation should setup rotation configuration" time="0.001">
    </testcase>
    <testcase classname="ApiKeyService setupRotation should return null for non-existent key" name="ApiKeyService setupRotation should return null for non-existent key" time="0">
    </testcase>
    <testcase classname="ApiKeyService getUsageLogs should return usage logs for a key" name="ApiKeyService getUsageLogs should return usage logs for a key" time="0.003">
    </testcase>
    <testcase classname="ApiKeyService getUsageLogs should limit number of logs returned" name="ApiKeyService getUsageLogs should limit number of logs returned" time="0.001">
    </testcase>
    <testcase classname="CryptoUtils generateApiKey should generate API key with default options" name="CryptoUtils generateApiKey should generate API key with default options" time="0.001">
    </testcase>
    <testcase classname="CryptoUtils generateApiKey should generate API key with custom options" name="CryptoUtils generateApiKey should generate API key with custom options" time="0">
      <failure>Error: expect(received).toMatch(expected)

Expected pattern: /^custom_[A-Za-z0-9_-]{16}$/
Received string:  &quot;custom_479c7c5708b9a1e9b753e1bcfb1c8df5_aa25c107&quot;
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/services/__tests__/api-key-service.test.ts:515:19)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="CryptoUtils generateApiKey should throw error for invalid length" name="CryptoUtils generateApiKey should throw error for invalid length" time="0.003">
    </testcase>
    <testcase classname="CryptoUtils validateKeyFormat should validate correct key format" name="CryptoUtils validateKeyFormat should validate correct key format" time="0">
    </testcase>
    <testcase classname="CryptoUtils validateKeyFormat should reject invalid key format" name="CryptoUtils validateKeyFormat should reject invalid key format" time="0">
    </testcase>
    <testcase classname="CryptoUtils hashApiKey should generate consistent hash for same key" name="CryptoUtils hashApiKey should generate consistent hash for same key" time="0.001">
    </testcase>
    <testcase classname="CryptoUtils hashApiKey should generate different hashes for different keys" name="CryptoUtils hashApiKey should generate different hashes for different keys" time="0">
    </testcase>
    <testcase classname="CryptoUtils maskSensitiveData should mask data correctly" name="CryptoUtils maskSensitiveData should mask data correctly" time="0.001">
    </testcase>
    <testcase classname="CryptoUtils maskSensitiveData should handle short data" name="CryptoUtils maskSensitiveData should handle short data" time="0">
    </testcase>
  </testsuite>
  <testsuite name="SentryService" errors="0" failures="1" skipped="0" timestamp="2025-06-19T14:53:08" time="0.158" tests="3">
    <testcase classname="SentryService initialize should initialize Sentry if DSN is provided" name="SentryService initialize should initialize Sentry if DSN is provided" time="0.005">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: ObjectContaining {&quot;dsn&quot;: &quot;https://test@sentry.io/123&quot;}

Number of calls: 0
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/services/__tests__/SentryService.test.ts:27:27)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:316:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="SentryService initialize should not initialize Sentry if DSN is not provided" name="SentryService initialize should not initialize Sentry if DSN is not provided" time="0.001">
    </testcase>
    <testcase classname="SentryService captureException should capture an exception with context" name="SentryService captureException should capture an exception with context" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="TallyApiService - Schema Validation" errors="0" failures="1" skipped="0" timestamp="2025-06-19T14:53:08" time="0.16" tests="10">
    <testcase classname="TallyApiService - Schema Validation createForm payload validation validates a simple form with title and text question" name="TallyApiService - Schema Validation createForm payload validation validates a simple form with title and text question" time="0.002">
    </testcase>
    <testcase classname="TallyApiService - Schema Validation createForm payload validation validates a complex form with multiple question types" name="TallyApiService - Schema Validation createForm payload validation validates a complex form with multiple question types" time="0.002">
    </testcase>
    <testcase classname="TallyApiService - Schema Validation createForm payload validation rejects invalid form configuration - empty title" name="TallyApiService - Schema Validation createForm payload validation rejects invalid form configuration - empty title" time="0.005">
    </testcase>
    <testcase classname="TallyApiService - Schema Validation createForm payload validation validates form with no questions" name="TallyApiService - Schema Validation createForm payload validation validates form with no questions" time="0.001">
    </testcase>
    <testcase classname="TallyApiService - Schema Validation createForm payload validation validates all generated blocks have proper UUIDs" name="TallyApiService - Schema Validation createForm payload validation validates all generated blocks have proper UUIDs" time="0.006">
    </testcase>
    <testcase classname="TallyApiService - Schema Validation createForm payload validation validates block types are supported by Tally" name="TallyApiService - Schema Validation createForm payload validation validates block types are supported by Tally" time="0.002">
    </testcase>
    <testcase classname="TallyApiService - Schema Validation updateForm payload validation validates partial form updates" name="TallyApiService - Schema Validation updateForm payload validation validates partial form updates" time="0.001">
    </testcase>
    <testcase classname="TallyApiService - Schema Validation updateForm payload validation rejects invalid update payloads" name="TallyApiService - Schema Validation updateForm payload validation rejects invalid update payloads" time="0">
    </testcase>
    <testcase classname="TallyApiService - Schema Validation error handling for malformed blocks catches validation errors before API submission" name="TallyApiService - Schema Validation error handling for malformed blocks catches validation errors before API submission" time="0.001">
      <failure>Error: Property `mapToTallyPayload` does not exist in the provided object
    at ModuleMocker.spyOn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-mock/build/index.js:731:13)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/services/__tests__/tally-api-service-validation.test.ts:240:12)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="TallyApiService - Schema Validation comprehensive schema coverage tests all supported question types generate valid blocks" name="TallyApiService - Schema Validation comprehensive schema coverage tests all supported question types generate valid blocks" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="Logger" errors="0" failures="2" skipped="0" timestamp="2025-06-19T14:53:08" time="0.156" tests="26">
    <testcase classname="Logger Constructor and Configuration should create logger with default configuration" name="Logger Constructor and Configuration should create logger with default configuration" time="0.001">
    </testcase>
    <testcase classname="Logger Constructor and Configuration should create logger with custom configuration" name="Logger Constructor and Configuration should create logger with custom configuration" time="0.001">
    </testcase>
    <testcase classname="Logger Constructor and Configuration should update configuration" name="Logger Constructor and Configuration should update configuration" time="0">
    </testcase>
    <testcase classname="Logger Child Logger Creation should create child logger with same config but different component" name="Logger Child Logger Creation should create child logger with same config but different component" time="0">
    </testcase>
    <testcase classname="Logger Child Logger Creation should create child logger with additional config" name="Logger Child Logger Creation should create child logger with additional config" time="0.001">
    </testcase>
    <testcase classname="Logger Trace ID Management should generate unique trace ID on creation" name="Logger Trace ID Management should generate unique trace ID on creation" time="0">
    </testcase>
    <testcase classname="Logger Trace ID Management should allow setting custom trace ID" name="Logger Trace ID Management should allow setting custom trace ID" time="0.003">
    </testcase>
    <testcase classname="Logger Log Level Filtering should respect log level configuration" name="Logger Log Level Filtering should respect log level configuration" time="0">
    </testcase>
    <testcase classname="Logger Logging Methods should log fatal messages" name="Logger Logging Methods should log fatal messages" time="0.001">
    </testcase>
    <testcase classname="Logger Logging Methods should log error messages" name="Logger Logging Methods should log error messages" time="0">
    </testcase>
    <testcase classname="Logger Logging Methods should log warning messages" name="Logger Logging Methods should log warning messages" time="0">
    </testcase>
    <testcase classname="Logger Logging Methods should log info messages" name="Logger Logging Methods should log info messages" time="0.001">
    </testcase>
    <testcase classname="Logger Logging Methods should log debug messages" name="Logger Logging Methods should log debug messages" time="0">
    </testcase>
    <testcase classname="Logger Logging Methods should log trace messages" name="Logger Logging Methods should log trace messages" time="0">
    </testcase>
    <testcase classname="Logger Structured Logging should output structured JSON when enabled" name="Logger Structured Logging should output structured JSON when enabled" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: &quot;value&quot;
Received: &quot;[REDACTED]&quot;
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/utils/__tests__/logger.test.ts:236:34)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Logger Structured Logging should include trace ID in structured logs when tracing enabled" name="Logger Structured Logging should include trace ID in structured logs when tracing enabled" time="0.001">
    </testcase>
    <testcase classname="Logger Sensitive Data Redaction should redact sensitive fields from context" name="Logger Sensitive Data Redaction should redact sensitive fields from context" time="0">
    </testcase>
    <testcase classname="Logger Sensitive Data Redaction should handle nested objects in redaction" name="Logger Sensitive Data Redaction should handle nested objects in redaction" time="0.001">
    </testcase>
    <testcase classname="Logger Sensitive Data Redaction should not redact when redaction is disabled" name="Logger Sensitive Data Redaction should not redact when redaction is disabled" time="0">
    </testcase>
    <testcase classname="Logger Error Logging should include error details in log entry" name="Logger Error Logging should include error details in log entry" time="0.001">
    </testcase>
    <testcase classname="Logger Operation Timing should track operation timing" name="Logger Operation Timing should track operation timing" time="0.014">
    </testcase>
    <testcase classname="Logger Console Output Formatting should format console output with all components" name="Logger Console Output Formatting should format console output with all components" time="0.001">
    </testcase>
    <testcase classname="Logger Factory Functions should create logger with createLogger function" name="Logger Factory Functions should create logger with createLogger function" time="0">
    </testcase>
    <testcase classname="Logger Factory Functions should provide global logger instance" name="Logger Factory Functions should provide global logger instance" time="0">
    </testcase>
    <testcase classname="Logger Edge Cases should handle null and undefined context values" name="Logger Edge Cases should handle null and undefined context values" time="0">
    </testcase>
    <testcase classname="Logger Edge Cases should handle arrays in context" name="Logger Edge Cases should handle arrays in context" time="0.001">
      <failure>Error: expect(received).toEqual(expected) // deep equality

Expected: [&quot;[REDACTED]&quot;, &quot;[REDACTED]&quot;]
Received: &quot;[REDACTED]&quot;
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/utils/__tests__/logger.test.ts:453:42)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
  </testsuite>
  <testsuite name="CryptoUtils" errors="0" failures="8" skipped="0" timestamp="2025-06-19T14:53:08" time="0.16" tests="20">
    <testcase classname="CryptoUtils API Key Generation and Validation should generate a valid API key with default options" name="CryptoUtils API Key Generation and Validation should generate a valid API key with default options" time="0.002">
      <failure>Error: expect(received).toMatchSnapshot()

Snapshot name: `CryptoUtils API Key Generation and Validation should generate a valid API key with default options 1`

Snapshot: &quot;tally_aa7ebee615f8c4a5b4e900664b0a269358315b12990007c0027165d5fe08589b_5505eb03&quot;
Received: &quot;tally_f4f5b8ae4e899f8b3d67491dce3bb38a4bd2091a5b5c026b2ddbefd1cdb57236_01bb0b8d&quot;
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/utils/__tests__/crypto.test.ts:24:19)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="CryptoUtils API Key Generation and Validation should generate a valid API key with a custom prefix" name="CryptoUtils API Key Generation and Validation should generate a valid API key with a custom prefix" time="0.001">
      <failure>Error: expect(received).toMatch(expected)

Expected pattern: /^undefined/
Received string:  &quot;tally_6c48ea306f953ebfa83db7b3b4c41bb730a5204299492cca1c3586aeab69f05a_6487b2af&quot;
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/utils/__tests__/crypto.test.ts:30:19)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="CryptoUtils API Key Generation and Validation should invalidate a key with a wrong checksum" name="CryptoUtils API Key Generation and Validation should invalidate a key with a wrong checksum" time="0.001">
    </testcase>
    <testcase classname="CryptoUtils API Key Generation and Validation should throw an error for invalid key length: 10" name="CryptoUtils API Key Generation and Validation should throw an error for invalid key length: 10" time="0.003">
    </testcase>
    <testcase classname="CryptoUtils API Key Generation and Validation should throw an error for invalid key length: 100" name="CryptoUtils API Key Generation and Validation should throw an error for invalid key length: 100" time="0.001">
    </testcase>
    <testcase classname="CryptoUtils Hashing should hash an API key consistently" name="CryptoUtils Hashing should hash an API key consistently" time="0.001">
    </testcase>
    <testcase classname="CryptoUtils Hashing should produce different hashes for different keys" name="CryptoUtils Hashing should produce different hashes for different keys" time="0">
    </testcase>
    <testcase classname="CryptoUtils Hashing should hash with a salt" name="CryptoUtils Hashing should hash with a salt" time="0.001">
    </testcase>
    <testcase classname="CryptoUtils Encryption and Decryption should encrypt and decrypt data successfully" name="CryptoUtils Encryption and Decryption should encrypt and decrypt data successfully" time="0.001">
      <failure>Error: API_KEY_ENCRYPTION_KEY environment variable is required
    at Function.getEncryptionKey (/Users/cryophobic/dev/projects/tally-mcp/src/utils/crypto.ts:35:13)
    at Function.encrypt (/Users/cryophobic/dev/projects/tally-mcp/src/utils/crypto.ts:106:22)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/utils/__tests__/crypto.test.ts:82:37)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="CryptoUtils Encryption and Decryption should throw error if encryption key is missing" name="CryptoUtils Encryption and Decryption should throw error if encryption key is missing" time="0.001">
    </testcase>
    <testcase classname="CryptoUtils Encryption and Decryption should pad a short encryption key" name="CryptoUtils Encryption and Decryption should pad a short encryption key" time="0.001">
    </testcase>
    <testcase classname="CryptoUtils Encryption and Decryption should truncate a long encryption key" name="CryptoUtils Encryption and Decryption should truncate a long encryption key" time="0">
    </testcase>
    <testcase classname="CryptoUtils HMAC Signature should create and verify an HMAC signature" name="CryptoUtils HMAC Signature should create and verify an HMAC signature" time="0.004">
      <failure>TypeError: The &quot;key&quot; argument must be of type string or an instance of ArrayBuffer, Buffer, TypedArray, DataView, KeyObject, or CryptoKey. Received undefined
    at prepareSecretKey (node:internal/crypto/keys:595:11)
    at new Hmac (node:internal/crypto/hash:141:9)
    at Object.createHmac (node:crypto:171:10)
    at Function.createHmac (/Users/cryophobic/dev/projects/tally-mcp/src/utils/crypto.ts:155:8)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/utils/__tests__/crypto.test.ts:111:37)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="CryptoUtils HMAC Signature should fail verification for a wrong signature or data" name="CryptoUtils HMAC Signature should fail verification for a wrong signature or data" time="0">
      <failure>TypeError: The &quot;key&quot; argument must be of type string or an instance of ArrayBuffer, Buffer, TypedArray, DataView, KeyObject, or CryptoKey. Received undefined
    at prepareSecretKey (node:internal/crypto/keys:595:11)
    at new Hmac (node:internal/crypto/hash:141:9)
    at Object.createHmac (node:crypto:171:10)
    at Function.createHmac (/Users/cryophobic/dev/projects/tally-mcp/src/utils/crypto.ts:155:8)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/utils/__tests__/crypto.test.ts:117:37)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="CryptoUtils Temporary Token should generate and verify a valid temporary token" name="CryptoUtils Temporary Token should generate and verify a valid temporary token" time="0">
      <failure>TypeError: Cannot destructure property &apos;payload&apos; of &apos;fixtures_1.temporaryTokenTestCases.valid&apos; as it is undefined.
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/utils/__tests__/crypto.test.ts:133:15)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="CryptoUtils Temporary Token should fail verification for a tampered token" name="CryptoUtils Temporary Token should fail verification for a tampered token" time="0">
      <failure>TypeError: Cannot destructure property &apos;payload&apos; of &apos;fixtures_1.temporaryTokenTestCases.tampered&apos; as it is undefined.
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/utils/__tests__/crypto.test.ts:141:17)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="CryptoUtils Temporary Token should fail verification for an expired token" name="CryptoUtils Temporary Token should fail verification for an expired token" time="0.001">
      <failure>TypeError: Cannot destructure property &apos;payload&apos; of &apos;fixtures_1.temporaryTokenTestCases.expired&apos; as it is undefined.
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/utils/__tests__/crypto.test.ts:149:17)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="CryptoUtils Other Utilities should generate a random salt" name="CryptoUtils Other Utilities should generate a random salt" time="0">
    </testcase>
    <testcase classname="CryptoUtils Other Utilities should generate a UUID" name="CryptoUtils Other Utilities should generate a UUID" time="0.001">
    </testcase>
    <testcase classname="CryptoUtils Other Utilities should mask sensitive data" name="CryptoUtils Other Utilities should mask sensitive data" time="0">
    </testcase>
  </testsuite>
  <testsuite name="SchemaValidator" errors="0" failures="2" skipped="0" timestamp="2025-06-19T14:53:09" time="0.161" tests="43">
    <testcase classname="SchemaValidator constructor should create instance with default config" name="SchemaValidator constructor should create instance with default config" time="0">
    </testcase>
    <testcase classname="SchemaValidator constructor should create instance with custom config" name="SchemaValidator constructor should create instance with custom config" time="0.001">
    </testcase>
    <testcase classname="SchemaValidator validateSchema should validate a simple valid schema" name="SchemaValidator validateSchema should validate a simple valid schema" time="0">
    </testcase>
    <testcase classname="SchemaValidator validateSchema should validate a complex valid object schema" name="SchemaValidator validateSchema should validate a complex valid object schema" time="0.003">
    </testcase>
    <testcase classname="SchemaValidator validateSchema should validate array schema" name="SchemaValidator validateSchema should validate array schema" time="0">
    </testcase>
    <testcase classname="SchemaValidator validateSchema should return validation summary" name="SchemaValidator validateSchema should return validation summary" time="0.001">
    </testcase>
    <testcase classname="SchemaValidator basic structure validation should error when type is missing in strict mode" name="SchemaValidator basic structure validation should error when type is missing in strict mode" time="0">
    </testcase>
    <testcase classname="SchemaValidator basic structure validation should not error when type is missing in non-strict mode" name="SchemaValidator basic structure validation should not error when type is missing in non-strict mode" time="0.001">
    </testcase>
    <testcase classname="SchemaValidator basic structure validation should error for invalid schema type" name="SchemaValidator basic structure validation should error for invalid schema type" time="0">
    </testcase>
    <testcase classname="SchemaValidator basic structure validation should accept all valid JSON Schema types" name="SchemaValidator basic structure validation should accept all valid JSON Schema types" time="0.001">
    </testcase>
    <testcase classname="SchemaValidator object schema validation should warn when object schema has no properties in strict mode" name="SchemaValidator object schema validation should warn when object schema has no properties in strict mode" time="0.001">
    </testcase>
    <testcase classname="SchemaValidator object schema validation should not warn when object schema has no properties in non-strict mode" name="SchemaValidator object schema validation should not warn when object schema has no properties in non-strict mode" time="0">
    </testcase>
    <testcase classname="SchemaValidator object schema validation should error when required is not an array" name="SchemaValidator object schema validation should error when required is not an array" time="0">
    </testcase>
    <testcase classname="SchemaValidator object schema validation should error when required item is not a string" name="SchemaValidator object schema validation should error when required item is not a string" time="0.001">
    </testcase>
    <testcase classname="SchemaValidator object schema validation should validate valid required array" name="SchemaValidator object schema validation should validate valid required array" time="0">
    </testcase>
    <testcase classname="SchemaValidator array schema validation should warn when array schema has no items in strict mode" name="SchemaValidator array schema validation should warn when array schema has no items in strict mode" time="0.001">
    </testcase>
    <testcase classname="SchemaValidator array schema validation should not warn when array schema has no items in non-strict mode" name="SchemaValidator array schema validation should not warn when array schema has no items in non-strict mode" time="0">
    </testcase>
    <testcase classname="SchemaValidator array schema validation should validate array schema with items" name="SchemaValidator array schema validation should validate array schema with items" time="0.001">
    </testcase>
    <testcase classname="SchemaValidator JSON Schema draft validation should warn for unsupported schema version" name="SchemaValidator JSON Schema draft validation should warn for unsupported schema version" time="0">
    </testcase>
    <testcase classname="SchemaValidator JSON Schema draft validation should not warn for supported schema version" name="SchemaValidator JSON Schema draft validation should not warn for supported schema version" time="0.001">
    </testcase>
    <testcase classname="SchemaValidator JSON Schema draft validation should warn for deprecated keywords" name="SchemaValidator JSON Schema draft validation should warn for deprecated keywords" time="0.002">
    </testcase>
    <testcase classname="SchemaValidator JSON Schema draft validation should skip draft validation when disabled" name="SchemaValidator JSON Schema draft validation should skip draft validation when disabled" time="0">
    </testcase>
    <testcase classname="SchemaValidator schema depth validation should error when schema exceeds max depth" name="SchemaValidator schema depth validation should error when schema exceeds max depth" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: false
Received: true
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/validation/__tests__/schema-validator.test.ts:349:28)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:316:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="SchemaValidator schema depth validation should allow custom max depth" name="SchemaValidator schema depth validation should allow custom max depth" time="0.001">
    </testcase>
    <testcase classname="SchemaValidator schema depth validation should skip depth validation when maxSchemaDepth is undefined" name="SchemaValidator schema depth validation should skip depth validation when maxSchemaDepth is undefined" time="0">
    </testcase>
    <testcase classname="SchemaValidator type-specific validation string schema validation should error for negative minLength" name="SchemaValidator type-specific validation string schema validation should error for negative minLength" time="0.001">
    </testcase>
    <testcase classname="SchemaValidator type-specific validation string schema validation should error for negative maxLength" name="SchemaValidator type-specific validation string schema validation should error for negative maxLength" time="0">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: false
Received: true
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/validation/__tests__/schema-validator.test.ts:414:30)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:316:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="SchemaValidator type-specific validation string schema validation should error when minLength &gt; maxLength" name="SchemaValidator type-specific validation string schema validation should error when minLength &gt; maxLength" time="0">
    </testcase>
    <testcase classname="SchemaValidator type-specific validation string schema validation should validate valid string constraints" name="SchemaValidator type-specific validation string schema validation should validate valid string constraints" time="0">
    </testcase>
    <testcase classname="SchemaValidator type-specific validation numeric schema validation should error when minimum &gt; maximum" name="SchemaValidator type-specific validation numeric schema validation should error when minimum &gt; maximum" time="0.001">
    </testcase>
    <testcase classname="SchemaValidator type-specific validation numeric schema validation should error when exclusiveMinimum &gt;= exclusiveMaximum" name="SchemaValidator type-specific validation numeric schema validation should error when exclusiveMinimum &gt;= exclusiveMaximum" time="0">
    </testcase>
    <testcase classname="SchemaValidator type-specific validation numeric schema validation should error for negative multipleOf" name="SchemaValidator type-specific validation numeric schema validation should error for negative multipleOf" time="0.001">
    </testcase>
    <testcase classname="SchemaValidator type-specific validation numeric schema validation should validate valid numeric constraints" name="SchemaValidator type-specific validation numeric schema validation should validate valid numeric constraints" time="0">
    </testcase>
    <testcase classname="SchemaValidator type-specific validation object schema validation should error for negative minProperties" name="SchemaValidator type-specific validation object schema validation should error for negative minProperties" time="0">
    </testcase>
    <testcase classname="SchemaValidator type-specific validation object schema validation should error for negative maxProperties" name="SchemaValidator type-specific validation object schema validation should error for negative maxProperties" time="0">
    </testcase>
    <testcase classname="SchemaValidator type-specific validation object schema validation should error when minProperties &gt; maxProperties" name="SchemaValidator type-specific validation object schema validation should error when minProperties &gt; maxProperties" time="0">
    </testcase>
    <testcase classname="SchemaValidator type-specific validation array schema validation should error for negative minItems" name="SchemaValidator type-specific validation array schema validation should error for negative minItems" time="0.001">
    </testcase>
    <testcase classname="SchemaValidator type-specific validation array schema validation should error for negative maxItems" name="SchemaValidator type-specific validation array schema validation should error for negative maxItems" time="0">
    </testcase>
    <testcase classname="SchemaValidator type-specific validation array schema validation should error when minItems &gt; maxItems" name="SchemaValidator type-specific validation array schema validation should error when minItems &gt; maxItems" time="0">
    </testcase>
    <testcase classname="SchemaValidator edge cases should handle empty schema object" name="SchemaValidator edge cases should handle empty schema object" time="0">
    </testcase>
    <testcase classname="SchemaValidator edge cases should handle null schema" name="SchemaValidator edge cases should handle null schema" time="0.002">
    </testcase>
    <testcase classname="SchemaValidator edge cases should handle schema with circular references" name="SchemaValidator edge cases should handle schema with circular references" time="0">
    </testcase>
    <testcase classname="SchemaValidator edge cases should handle very large schema" name="SchemaValidator edge cases should handle very large schema" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="TallyApiClient" errors="0" failures="2" skipped="0" timestamp="2025-06-19T14:53:09" time="0.148" tests="13">
    <testcase classname="TallyApiClient should be defined" name="TallyApiClient should be defined" time="0.001">
    </testcase>
    <testcase classname="TallyApiClient Authentication should throw an error when getting authorization URL without OAuth2 config" name="TallyApiClient Authentication should throw an error when getting authorization URL without OAuth2 config" time="0.008">
    </testcase>
    <testcase classname="TallyApiClient Authentication should throw an error when exchanging code for token without OAuth2 config" name="TallyApiClient Authentication should throw an error when exchanging code for token without OAuth2 config" time="0.001">
    </testcase>
    <testcase classname="TallyApiClient Authentication should be authenticated if access token is provided" name="TallyApiClient Authentication should be authenticated if access token is provided" time="0">
    </testcase>
    <testcase classname="TallyApiClient Authentication should not be authenticated if access token is not provided" name="TallyApiClient Authentication should not be authenticated if access token is not provided" time="0.001">
    </testcase>
    <testcase classname="TallyApiClient Authentication should throw an error when refreshing token without OAuth2 config" name="TallyApiClient Authentication should throw an error when refreshing token without OAuth2 config" time="0">
    </testcase>
    <testcase classname="TallyApiClient Authentication should clear the access token" name="TallyApiClient Authentication should clear the access token" time="0.001">
    </testcase>
    <testcase classname="TallyApiClient Authentication should set the access token" name="TallyApiClient Authentication should set the access token" time="0">
    </testcase>
    <testcase classname="TallyApiClient Authentication should get the access token" name="TallyApiClient Authentication should get the access token" time="0.001">
    </testcase>
    <testcase classname="TallyApiClient Authentication should get the current token" name="TallyApiClient Authentication should get the current token" time="0.003">
    </testcase>
    <testcase classname="TallyApiClient Request Handling should handle a successful GET request" name="TallyApiClient Request Handling should handle a successful GET request" time="0.001">
    </testcase>
    <testcase classname="TallyApiClient Request Handling should handle a 404 Not Found error" name="TallyApiClient Request Handling should handle a 404 Not Found error" time="0.001">
      <failure>Error: expect(received).rejects.toThrow(expected)

Expected substring: &quot;Not Found&quot;

Received function did not throw
    at Object.toThrow (/Users/cryophobic/dev/projects/tally-mcp/node_modules/expect/build/index.js:218:22)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/api/TallyApiClient.test.ts:90:66)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="TallyApiClient Request Handling should handle a 401 Unauthorized error" name="TallyApiClient Request Handling should handle a 401 Unauthorized error" time="0.004">
      <failure>Error: expect(received).rejects.toThrow(expected)

Expected substring: &quot;No valid authentication found. Please authenticate first.&quot;
Received message:   &quot;this.axiosInstance.request is not a function&quot;

      586 |
      587 |     // The interceptors will handle authentication and error handling
    &gt; 588 |     const response: AxiosResponse&lt;T&gt; = await this.axiosInstance.request(requestConfig);
          |                                                                 ^
      589 |
      590 |     return {
      591 |       data: response.data,

      at TallyApiClient.request (src/services/TallyApiClient.ts:588:65)
      at TallyApiClient.get (src/services/TallyApiClient.ts:348:17)
      at Object.&lt;anonymous&gt; (src/__tests__/api/TallyApiClient.test.ts:96:27)
    at Object.toThrow (/Users/cryophobic/dev/projects/tally-mcp/node_modules/expect/build/index.js:218:22)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/api/TallyApiClient.test.ts:96:47)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:316:40)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname=" Test execution failure: could be caused by test hooks like &apos;afterAll&apos;." name=" Test execution failure: could be caused by test hooks like &apos;afterAll&apos;." time="0">
      <failure>{&quot;message&quot;:&quot;&quot;,&quot;stack&quot;:&quot;Error: thrown: Object {\n  \&quot;isAxiosError\&quot;: true,\n  \&quot;response\&quot;: Object {\n    \&quot;data\&quot;: Object {\n      \&quot;message\&quot;: \&quot;Not Found\&quot;,\n    },\n    \&quot;status\&quot;: 404,\n  },\n}\n    at _getError (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:432:18)\n    at Array.map (&lt;anonymous&gt;)\n    at makeRunResult (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:346:36)\n    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:75:35)\n    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)\nNotFoundError: Not Found\n    at createErrorFromResponse (/Users/cryophobic/dev/projects/tally-mcp/src/models/errors.ts:291:14)\n    at TallyApiClient.handleResponseError (/Users/cryophobic/dev/projects/tally-mcp/src/services/TallyApiClient.ts:876:54)\n    at /Users/cryophobic/dev/projects/tally-mcp/src/services/TallyApiClient.ts:999:21\n    at Object.mockInterceptor [as use] (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/api/TallyApiClient.test.ts:85:57)\n    at TallyApiClient.setupInterceptors (/Users/cryophobic/dev/projects/tally-mcp/src/services/TallyApiClient.ts:987:46)\n    at new TallyApiClient (/Users/cryophobic/dev/projects/tally-mcp/src/services/TallyApiClient.ts:220:10)\n    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/__tests__/api/TallyApiClient.test.ts:88:16)\n    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (&lt;anonymous&gt;)\n    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)&quot;}</failure>
    </testcase>
  </testsuite>
  <testsuite name="Capability Negotiation" errors="0" failures="4" skipped="0" timestamp="2025-06-19T14:53:09" time="0.134" tests="15">
    <testcase classname="Capability Negotiation negotiateCapabilities should return server defaults when no client capabilities are provided" name="Capability Negotiation negotiateCapabilities should return server defaults when no client capabilities are provided" time="0.001">
    </testcase>
    <testcase classname="Capability Negotiation negotiateCapabilities should throw an error for incompatible protocol versions" name="Capability Negotiation negotiateCapabilities should throw an error for incompatible protocol versions" time="0.005">
    </testcase>
    <testcase classname="Capability Negotiation negotiateCapabilities should accept client with exact same capabilities" name="Capability Negotiation negotiateCapabilities should accept client with exact same capabilities" time="0">
      <failure>StructuredError: Protocol version mismatch. Server: 2024-11-05, Client: undefined
    at negotiateCapabilities (/Users/cryophobic/dev/projects/tally-mcp/src/utils/capability-negotiation.ts:46:11)
    at /Users/cryophobic/dev/projects/tally-mcp/src/utils/__tests__/capability-negotiation.test.ts:36:49
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-each/build/bind.js:81:13)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:316:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Capability Negotiation negotiateCapabilities should reject client with unsupported auth" name="Capability Negotiation negotiateCapabilities should reject client with unsupported auth" time="0">
      <failure>StructuredError: Protocol version mismatch. Server: 2024-11-05, Client: undefined
    at negotiateCapabilities (/Users/cryophobic/dev/projects/tally-mcp/src/utils/capability-negotiation.ts:46:11)
    at /Users/cryophobic/dev/projects/tally-mcp/src/utils/__tests__/capability-negotiation.test.ts:36:49
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-each/build/bind.js:81:13)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:316:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Capability Negotiation negotiateCapabilities should select highest common tool version" name="Capability Negotiation negotiateCapabilities should select highest common tool version" time="0">
      <failure>StructuredError: Protocol version mismatch. Server: 2024-11-05, Client: undefined
    at negotiateCapabilities (/Users/cryophobic/dev/projects/tally-mcp/src/utils/capability-negotiation.ts:46:11)
    at /Users/cryophobic/dev/projects/tally-mcp/src/utils/__tests__/capability-negotiation.test.ts:36:49
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-each/build/bind.js:81:13)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:316:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Capability Negotiation negotiateCapabilities should use server default when a client capability is not specified" name="Capability Negotiation negotiateCapabilities should use server default when a client capability is not specified" time="0">
      <failure>StructuredError: Protocol version mismatch. Server: 2024-11-05, Client: undefined
    at negotiateCapabilities (/Users/cryophobic/dev/projects/tally-mcp/src/utils/capability-negotiation.ts:46:11)
    at Object.&lt;anonymous&gt; (/Users/cryophobic/dev/projects/tally-mcp/src/utils/__tests__/capability-negotiation.test.ts:46:47)
    at Promise.then.completed (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:316:40)
    at runNextTicks (node:internal/process/task_queues:60:5)
    at processImmediate (node:internal/timers:454:9)
    at _runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/cryophobic/dev/projects/tally-mcp/node_modules/jest-runner/build/runTest.js:444:34)</failure>
    </testcase>
    <testcase classname="Capability Negotiation validateClientCapabilities should return true for valid capabilities: full capabilities" name="Capability Negotiation validateClientCapabilities should return true for valid capabilities: full capabilities" time="0.001">
    </testcase>
    <testcase classname="Capability Negotiation validateClientCapabilities should return true for valid capabilities: partial capabilities" name="Capability Negotiation validateClientCapabilities should return true for valid capabilities: partial capabilities" time="0">
    </testcase>
    <testcase classname="Capability Negotiation validateClientCapabilities should return true for valid capabilities: empty capabilities" name="Capability Negotiation validateClientCapabilities should return true for valid capabilities: empty capabilities" time="0">
    </testcase>
    <testcase classname="Capability Negotiation validateClientCapabilities should return false for invalid capabilities: null" name="Capability Negotiation validateClientCapabilities should return false for invalid capabilities: null" time="0">
    </testcase>
    <testcase classname="Capability Negotiation validateClientCapabilities should return false for invalid capabilities: string" name="Capability Negotiation validateClientCapabilities should return false for invalid capabilities: string" time="0.001">
    </testcase>
    <testcase classname="Capability Negotiation validateClientCapabilities should return false for invalid capabilities: number" name="Capability Negotiation validateClientCapabilities should return false for invalid capabilities: number" time="0">
    </testcase>
    <testcase classname="Capability Negotiation validateClientCapabilities should return false for invalid capabilities: unknown category" name="Capability Negotiation validateClientCapabilities should return false for invalid capabilities: unknown category" time="0">
    </testcase>
    <testcase classname="Capability Negotiation validateClientCapabilities should return false for invalid capabilities: category not an object" name="Capability Negotiation validateClientCapabilities should return false for invalid capabilities: category not an object" time="0">
    </testcase>
    <testcase classname="Capability Negotiation validateClientCapabilities should return false for invalid capabilities: invalid logging level" name="Capability Negotiation validateClientCapabilities should return false for invalid capabilities: invalid logging level" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="Rate Limiter Middleware" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:09" time="0.444" tests="20">
    <testcase classname="Rate Limiter Middleware Basic Rate Limiting should allow requests within the limit" name="Rate Limiter Middleware Basic Rate Limiting should allow requests within the limit" time="0.028">
    </testcase>
    <testcase classname="Rate Limiter Middleware Basic Rate Limiting should block requests that exceed the limit" name="Rate Limiter Middleware Basic Rate Limiting should block requests that exceed the limit" time="0.011">
    </testcase>
    <testcase classname="Rate Limiter Middleware Basic Rate Limiting should skip rate limiting for health checks" name="Rate Limiter Middleware Basic Rate Limiting should skip rate limiting for health checks" time="0.022">
    </testcase>
    <testcase classname="Rate Limiter Middleware Pre-configured Rate Limiters should apply strict rate limiting" name="Rate Limiter Middleware Pre-configured Rate Limiters should apply strict rate limiting" time="0.004">
    </testcase>
    <testcase classname="Rate Limiter Middleware Pre-configured Rate Limiters should apply standard rate limiting" name="Rate Limiter Middleware Pre-configured Rate Limiters should apply standard rate limiting" time="0.005">
    </testcase>
    <testcase classname="Rate Limiter Middleware Pre-configured Rate Limiters should apply lenient rate limiting" name="Rate Limiter Middleware Pre-configured Rate Limiters should apply lenient rate limiting" time="0.005">
    </testcase>
    <testcase classname="Rate Limiter Middleware Tally API Rate Limiter should allow requests when tokens are available" name="Rate Limiter Middleware Tally API Rate Limiter should allow requests when tokens are available" time="0.004">
    </testcase>
    <testcase classname="Rate Limiter Middleware Tally API Rate Limiter should block requests when no tokens are available" name="Rate Limiter Middleware Tally API Rate Limiter should block requests when no tokens are available" time="0.004">
    </testcase>
    <testcase classname="Rate Limiter Middleware Tally API Rate Limiter should refill tokens over time" name="Rate Limiter Middleware Tally API Rate Limiter should refill tokens over time" time="0.006">
    </testcase>
    <testcase classname="Rate Limiter Middleware Composite Rate Limiter should apply both rate limiters" name="Rate Limiter Middleware Composite Rate Limiter should apply both rate limiters" time="0.004">
    </testcase>
    <testcase classname="Rate Limiter Middleware Composite Rate Limiter should be blocked by Tally API limiter when tokens exhausted" name="Rate Limiter Middleware Composite Rate Limiter should be blocked by Tally API limiter when tokens exhausted" time="0.005">
    </testcase>
    <testcase classname="Rate Limiter Middleware Rate Limit Error Handler should handle rate limit errors" name="Rate Limiter Middleware Rate Limit Error Handler should handle rate limit errors" time="0.007">
    </testcase>
    <testcase classname="Rate Limiter Middleware Rate Limit Error Handler should pass through non-rate-limit errors" name="Rate Limiter Middleware Rate Limit Error Handler should pass through non-rate-limit errors" time="0.001">
    </testcase>
    <testcase classname="Rate Limiter Middleware Rate Limit Status Utility should return current rate limit status" name="Rate Limiter Middleware Rate Limit Status Utility should return current rate limit status" time="0">
    </testcase>
    <testcase classname="Rate Limiter Middleware Token Bucket Algorithm should refill tokens at the correct rate" name="Rate Limiter Middleware Token Bucket Algorithm should refill tokens at the correct rate" time="0.001">
    </testcase>
    <testcase classname="Rate Limiter Middleware Token Bucket Algorithm should not exceed maximum tokens" name="Rate Limiter Middleware Token Bucket Algorithm should not exceed maximum tokens" time="0">
    </testcase>
    <testcase classname="Rate Limiter Middleware Token Bucket Algorithm should calculate correct time until next token" name="Rate Limiter Middleware Token Bucket Algorithm should calculate correct time until next token" time="0.001">
    </testcase>
    <testcase classname="Rate Limit Configurations should have correct strict configuration" name="Rate Limit Configurations should have correct strict configuration" time="0">
    </testcase>
    <testcase classname="Rate Limit Configurations should have correct standard configuration" name="Rate Limit Configurations should have correct standard configuration" time="0.001">
    </testcase>
    <testcase classname="Rate Limit Configurations should have correct lenient configuration" name="Rate Limit Configurations should have correct lenient configuration" time="0">
    </testcase>
  </testsuite>
  <testsuite name="Health and Metrics Endpoints" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:09" time="0.221" tests="3">
    <testcase classname="Health and Metrics Endpoints GET /health should return 200 OK with status &quot;ok&quot; when the server is healthy" name="Health and Metrics Endpoints GET /health should return 200 OK with status &quot;ok&quot; when the server is healthy" time="0.007">
    </testcase>
    <testcase classname="Health and Metrics Endpoints GET /health should return 503 Service Unavailable when the server is unhealthy" name="Health and Metrics Endpoints GET /health should return 503 Service Unavailable when the server is unhealthy" time="0.007">
    </testcase>
    <testcase classname="Health and Metrics Endpoints GET /metrics should return 200 OK and Prometheus-compatible metrics" name="Health and Metrics Endpoints GET /metrics should return 200 OK and Prometheus-compatible metrics" time="0.006">
    </testcase>
  </testsuite>
  <testsuite name="FormCreationTool - BlockBuilder Integration" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:10" time="0.148" tests="4">
    <testcase classname="FormCreationTool - BlockBuilder Integration BlockBuilder payload generation should generate correct Tally API payload with FORM_TITLE and question blocks" name="FormCreationTool - BlockBuilder Integration BlockBuilder payload generation should generate correct Tally API payload with FORM_TITLE and question blocks" time="0.008">
    </testcase>
    <testcase classname="FormCreationTool - BlockBuilder Integration BlockBuilder payload generation should handle forms with only title block" name="FormCreationTool - BlockBuilder Integration BlockBuilder payload generation should handle forms with only title block" time="0.001">
    </testcase>
    <testcase classname="FormCreationTool - BlockBuilder Integration BlockBuilder payload generation should generate correct blocks for different question types" name="FormCreationTool - BlockBuilder Integration BlockBuilder payload generation should generate correct blocks for different question types" time="0">
    </testcase>
    <testcase classname="FormCreationTool - BlockBuilder Integration API endpoint integration should call the correct endpoint with POST method" name="FormCreationTool - BlockBuilder Integration API endpoint integration should call the correct endpoint with POST method" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="Validation Middleware" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:10" time="0.225" tests="34">
    <testcase classname="Validation Middleware createValidationMiddleware should validate request body successfully" name="Validation Middleware createValidationMiddleware should validate request body successfully" time="0.001">
    </testcase>
    <testcase classname="Validation Middleware createValidationMiddleware should reject invalid request body" name="Validation Middleware createValidationMiddleware should reject invalid request body" time="0.001">
    </testcase>
    <testcase classname="Validation Middleware createValidationMiddleware should validate query parameters" name="Validation Middleware createValidationMiddleware should validate query parameters" time="0">
    </testcase>
    <testcase classname="Validation Middleware createValidationMiddleware should validate URL parameters" name="Validation Middleware createValidationMiddleware should validate URL parameters" time="0.001">
    </testcase>
    <testcase classname="Validation Middleware createValidationMiddleware should validate headers" name="Validation Middleware createValidationMiddleware should validate headers" time="0">
    </testcase>
    <testcase classname="Validation Middleware createValidationMiddleware should perform security checks when enabled" name="Validation Middleware createValidationMiddleware should perform security checks when enabled" time="0.001">
    </testcase>
    <testcase classname="Validation Middleware createValidationMiddleware should detect SQL injection patterns" name="Validation Middleware createValidationMiddleware should detect SQL injection patterns" time="0.001">
    </testcase>
    <testcase classname="Validation Middleware createValidationMiddleware should handle partial validation" name="Validation Middleware createValidationMiddleware should handle partial validation" time="0.001">
    </testcase>
    <testcase classname="Validation Middleware createValidationMiddleware should strip unknown fields when configured" name="Validation Middleware createValidationMiddleware should strip unknown fields when configured" time="0">
    </testcase>
    <testcase classname="Validation Middleware createValidationMiddleware should handle validation errors gracefully" name="Validation Middleware createValidationMiddleware should handle validation errors gracefully" time="0">
    </testcase>
    <testcase classname="Validation Middleware CommonSchemas pagination should validate valid pagination parameters" name="Validation Middleware CommonSchemas pagination should validate valid pagination parameters" time="0.001">
    </testcase>
    <testcase classname="Validation Middleware CommonSchemas pagination should apply default values" name="Validation Middleware CommonSchemas pagination should apply default values" time="0">
    </testcase>
    <testcase classname="Validation Middleware CommonSchemas pagination should reject invalid pagination" name="Validation Middleware CommonSchemas pagination should reject invalid pagination" time="0.001">
    </testcase>
    <testcase classname="Validation Middleware CommonSchemas formId should validate valid form IDs" name="Validation Middleware CommonSchemas formId should validate valid form IDs" time="0">
    </testcase>
    <testcase classname="Validation Middleware CommonSchemas formId should reject invalid form IDs" name="Validation Middleware CommonSchemas formId should reject invalid form IDs" time="0">
    </testcase>
    <testcase classname="Validation Middleware CommonSchemas formId should reject empty form IDs" name="Validation Middleware CommonSchemas formId should reject empty form IDs" time="0.001">
    </testcase>
    <testcase classname="Validation Middleware CommonSchemas dateRange should validate valid date ranges" name="Validation Middleware CommonSchemas dateRange should validate valid date ranges" time="0">
    </testcase>
    <testcase classname="Validation Middleware CommonSchemas dateRange should reject invalid date ranges" name="Validation Middleware CommonSchemas dateRange should reject invalid date ranges" time="0.001">
    </testcase>
    <testcase classname="Validation Middleware CommonSchemas search should validate safe search queries" name="Validation Middleware CommonSchemas search should validate safe search queries" time="0">
    </testcase>
    <testcase classname="Validation Middleware CommonSchemas search should reject SQL injection attempts" name="Validation Middleware CommonSchemas search should reject SQL injection attempts" time="0.003">
    </testcase>
    <testcase classname="Validation Middleware CommonSchemas search should reject XSS attempts" name="Validation Middleware CommonSchemas search should reject XSS attempts" time="0.001">
    </testcase>
    <testcase classname="Validation Middleware CommonSchemas fileUpload should validate valid file uploads" name="Validation Middleware CommonSchemas fileUpload should validate valid file uploads" time="0">
    </testcase>
    <testcase classname="Validation Middleware CommonSchemas fileUpload should reject files that are too large" name="Validation Middleware CommonSchemas fileUpload should reject files that are too large" time="0">
    </testcase>
    <testcase classname="Validation Middleware CommonSchemas fileUpload should reject invalid MIME types" name="Validation Middleware CommonSchemas fileUpload should reject invalid MIME types" time="0.001">
    </testcase>
    <testcase classname="Validation Middleware ValidationMiddleware presets should validate pagination middleware" name="Validation Middleware ValidationMiddleware presets should validate pagination middleware" time="0">
    </testcase>
    <testcase classname="Validation Middleware ValidationMiddleware presets should validate form params middleware" name="Validation Middleware ValidationMiddleware presets should validate form params middleware" time="0">
    </testcase>
    <testcase classname="Validation Middleware ValidationMiddleware presets should validate search middleware" name="Validation Middleware ValidationMiddleware presets should validate search middleware" time="0.001">
    </testcase>
    <testcase classname="Validation Middleware ValidationMiddleware presets should reject malicious search queries" name="Validation Middleware ValidationMiddleware presets should reject malicious search queries" time="0">
    </testcase>
    <testcase classname="Validation Middleware Helper functions validateWithSchema should validate data successfully" name="Validation Middleware Helper functions validateWithSchema should validate data successfully" time="0">
    </testcase>
    <testcase classname="Validation Middleware Helper functions validateWithSchema should return errors for invalid data" name="Validation Middleware Helper functions validateWithSchema should return errors for invalid data" time="0">
    </testcase>
    <testcase classname="Validation Middleware Helper functions createTypedValidator should create a type guard function" name="Validation Middleware Helper functions createTypedValidator should create a type guard function" time="0">
    </testcase>
    <testcase classname="Validation Middleware Helper functions formatValidationError should format validation errors correctly" name="Validation Middleware Helper functions formatValidationError should format validation errors correctly" time="0">
    </testcase>
    <testcase classname="Validation Middleware Security Features should detect and block length-based attacks" name="Validation Middleware Security Features should detect and block length-based attacks" time="0">
    </testcase>
    <testcase classname="Validation Middleware Security Features should handle nested object security checks" name="Validation Middleware Security Features should handle nested object security checks" time="0">
    </testcase>
  </testsuite>
  <testsuite name="Error Handler Middleware" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:10" time="0.227" tests="23">
    <testcase classname="Error Handler Middleware globalErrorHandler should handle standard errors with default values" name="Error Handler Middleware globalErrorHandler should handle standard errors with default values" time="0.002">
    </testcase>
    <testcase classname="Error Handler Middleware globalErrorHandler should handle structured errors" name="Error Handler Middleware globalErrorHandler should handle structured errors" time="0.001">
    </testcase>
    <testcase classname="Error Handler Middleware globalErrorHandler should include error details in non-production environment" name="Error Handler Middleware globalErrorHandler should include error details in non-production environment" time="0.001">
    </testcase>
    <testcase classname="Error Handler Middleware globalErrorHandler should not include error details in production environment" name="Error Handler Middleware globalErrorHandler should not include error details in production environment" time="0">
    </testcase>
    <testcase classname="Error Handler Middleware globalErrorHandler should categorize network errors correctly" name="Error Handler Middleware globalErrorHandler should categorize network errors correctly" time="0.001">
    </testcase>
    <testcase classname="Error Handler Middleware globalErrorHandler should categorize validation errors correctly" name="Error Handler Middleware globalErrorHandler should categorize validation errors correctly" time="0.003">
    </testcase>
    <testcase classname="Error Handler Middleware globalErrorHandler should categorize authentication errors correctly" name="Error Handler Middleware globalErrorHandler should categorize authentication errors correctly" time="0.001">
    </testcase>
    <testcase classname="Error Handler Middleware globalErrorHandler should categorize authorization errors correctly" name="Error Handler Middleware globalErrorHandler should categorize authorization errors correctly" time="0.001">
    </testcase>
    <testcase classname="Error Handler Middleware globalErrorHandler should categorize rate limit errors correctly" name="Error Handler Middleware globalErrorHandler should categorize rate limit errors correctly" time="0">
    </testcase>
    <testcase classname="Error Handler Middleware globalErrorHandler should categorize timeout errors correctly (as network errors due to categorization logic)" name="Error Handler Middleware globalErrorHandler should categorize timeout errors correctly (as network errors due to categorization logic)" time="0.001">
    </testcase>
    <testcase classname="Error Handler Middleware globalErrorHandler should categorize pure timeout errors correctly" name="Error Handler Middleware globalErrorHandler should categorize pure timeout errors correctly" time="0.001">
    </testcase>
    <testcase classname="Error Handler Middleware globalErrorHandler should handle errors without messages" name="Error Handler Middleware globalErrorHandler should handle errors without messages" time="0">
    </testcase>
    <testcase classname="Error Handler Middleware asyncErrorHandler should catch and pass async errors to next middleware" name="Error Handler Middleware asyncErrorHandler should catch and pass async errors to next middleware" time="0.001">
    </testcase>
    <testcase classname="Error Handler Middleware asyncErrorHandler should handle successful async functions" name="Error Handler Middleware asyncErrorHandler should handle successful async functions" time="0.001">
    </testcase>
    <testcase classname="Error Handler Middleware asyncErrorHandler should handle non-async functions that return values" name="Error Handler Middleware asyncErrorHandler should handle non-async functions that return values" time="0">
    </testcase>
    <testcase classname="Error Handler Middleware notFoundHandler should create and pass a 404 structured error" name="Error Handler Middleware notFoundHandler should create and pass a 404 structured error" time="0.001">
    </testcase>
    <testcase classname="Error Handler Middleware notFoundHandler should handle requests without requestId" name="Error Handler Middleware notFoundHandler should handle requests without requestId" time="0.001">
    </testcase>
    <testcase classname="Error Handler Middleware setupProcessErrorHandlers should setup unhandledRejection and uncaughtException handlers" name="Error Handler Middleware setupProcessErrorHandlers should setup unhandledRejection and uncaughtException handlers" time="0">
    </testcase>
    <testcase classname="Error Handler Middleware setupProcessErrorHandlers should setup handlers with custom logger" name="Error Handler Middleware setupProcessErrorHandlers should setup handlers with custom logger" time="0">
    </testcase>
    <testcase classname="Error Handler Middleware setupProcessErrorHandlers should handle unhandled rejection with logger" name="Error Handler Middleware setupProcessErrorHandlers should handle unhandled rejection with logger" time="0.001">
    </testcase>
    <testcase classname="Error Handler Middleware setupProcessErrorHandlers should handle unhandled rejection without logger" name="Error Handler Middleware setupProcessErrorHandlers should handle unhandled rejection without logger" time="0.004">
    </testcase>
    <testcase classname="Error Handler Middleware setupProcessErrorHandlers should handle uncaught exception with logger" name="Error Handler Middleware setupProcessErrorHandlers should handle uncaught exception with logger" time="0.01">
    </testcase>
    <testcase classname="Error Handler Middleware setupProcessErrorHandlers should handle uncaught exception without logger" name="Error Handler Middleware setupProcessErrorHandlers should handle uncaught exception without logger" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="FormSharingTool" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:10" time="0.182" tests="37">
    <testcase classname="FormSharingTool constructor should create an instance with FormPublicationService" name="FormSharingTool constructor should create an instance with FormPublicationService" time="0.001">
    </testcase>
    <testcase classname="FormSharingTool publishForm should publish form successfully with minimal input" name="FormSharingTool publishForm should publish form successfully with minimal input" time="0.001">
    </testcase>
    <testcase classname="FormSharingTool publishForm should publish form with all optional parameters" name="FormSharingTool publishForm should publish form with all optional parameters" time="0.001">
    </testcase>
    <testcase classname="FormSharingTool publishForm should handle publication errors" name="FormSharingTool publishForm should handle publication errors" time="0.001">
    </testcase>
    <testcase classname="FormSharingTool publishForm should handle unknown errors" name="FormSharingTool publishForm should handle unknown errors" time="0.001">
    </testcase>
    <testcase classname="FormSharingTool publishForm should filter out undefined optional parameters" name="FormSharingTool publishForm should filter out undefined optional parameters" time="0.006">
    </testcase>
    <testcase classname="FormSharingTool unpublishForm should unpublish form successfully" name="FormSharingTool unpublishForm should unpublish form successfully" time="0.001">
    </testcase>
    <testcase classname="FormSharingTool unpublishForm should handle unpublish errors" name="FormSharingTool unpublishForm should handle unpublish errors" time="0.001">
    </testcase>
    <testcase classname="FormSharingTool getPublicationSettings should get publication settings successfully" name="FormSharingTool getPublicationSettings should get publication settings successfully" time="0.002">
    </testcase>
    <testcase classname="FormSharingTool getPublicationSettings should handle get settings errors" name="FormSharingTool getPublicationSettings should handle get settings errors" time="0.001">
    </testcase>
    <testcase classname="FormSharingTool updatePublicationSettings should update publication settings successfully" name="FormSharingTool updatePublicationSettings should update publication settings successfully" time="0.001">
    </testcase>
    <testcase classname="FormSharingTool updatePublicationSettings should filter out undefined values from settings" name="FormSharingTool updatePublicationSettings should filter out undefined values from settings" time="0.001">
    </testcase>
    <testcase classname="FormSharingTool updatePublicationSettings should handle update settings errors" name="FormSharingTool updatePublicationSettings should handle update settings errors" time="0.001">
    </testcase>
    <testcase classname="FormSharingTool generateEmbedCode should generate embed code successfully with minimal input" name="FormSharingTool generateEmbedCode should generate embed code successfully with minimal input" time="0.001">
    </testcase>
    <testcase classname="FormSharingTool generateEmbedCode should generate embed code with all options" name="FormSharingTool generateEmbedCode should generate embed code with all options" time="0.001">
    </testcase>
    <testcase classname="FormSharingTool generateEmbedCode should handle embed code generation errors" name="FormSharingTool generateEmbedCode should handle embed code generation errors" time="0">
    </testcase>
    <testcase classname="FormSharingTool generateShareLink should generate share link successfully" name="FormSharingTool generateShareLink should generate share link successfully" time="0.005">
    </testcase>
    <testcase classname="FormSharingTool generateShareLink should generate share link with security options" name="FormSharingTool generateShareLink should generate share link with security options" time="0.001">
    </testcase>
    <testcase classname="FormSharingTool generateShareLink should handle share link generation errors" name="FormSharingTool generateShareLink should handle share link generation errors" time="0.001">
    </testcase>
    <testcase classname="FormSharingTool getShareLinks should get share links successfully" name="FormSharingTool getShareLinks should get share links successfully" time="0.001">
    </testcase>
    <testcase classname="FormSharingTool getShareLinks should handle get share links errors" name="FormSharingTool getShareLinks should handle get share links errors" time="0.001">
    </testcase>
    <testcase classname="FormSharingTool deactivateShareLink should deactivate share link successfully" name="FormSharingTool deactivateShareLink should deactivate share link successfully" time="0.001">
    </testcase>
    <testcase classname="FormSharingTool deactivateShareLink should handle deactivate share link errors" name="FormSharingTool deactivateShareLink should handle deactivate share link errors" time="0.001">
    </testcase>
    <testcase classname="FormSharingTool getFormSharingStats should get sharing stats successfully" name="FormSharingTool getFormSharingStats should get sharing stats successfully" time="0.001">
    </testcase>
    <testcase classname="FormSharingTool getFormSharingStats should handle get sharing stats errors" name="FormSharingTool getFormSharingStats should handle get sharing stats errors" time="0">
    </testcase>
    <testcase classname="FormSharingTool getFormAnalytics should get analytics with default period" name="FormSharingTool getFormAnalytics should get analytics with default period" time="0.001">
    </testcase>
    <testcase classname="FormSharingTool getFormAnalytics should get analytics with custom period" name="FormSharingTool getFormAnalytics should get analytics with custom period" time="0.001">
    </testcase>
    <testcase classname="FormSharingTool getFormAnalytics should handle get analytics errors" name="FormSharingTool getFormAnalytics should handle get analytics errors" time="0.001">
    </testcase>
    <testcase classname="FormSharingTool performBulkOperation should perform bulk publish operation successfully" name="FormSharingTool performBulkOperation should perform bulk publish operation successfully" time="0.001">
    </testcase>
    <testcase classname="FormSharingTool performBulkOperation should perform bulk operation without settings" name="FormSharingTool performBulkOperation should perform bulk operation without settings" time="0.003">
    </testcase>
    <testcase classname="FormSharingTool performBulkOperation should handle bulk operation errors" name="FormSharingTool performBulkOperation should handle bulk operation errors" time="0.001">
    </testcase>
    <testcase classname="FormSharingTool validateFormForPublication should validate form successfully when form can be published" name="FormSharingTool validateFormForPublication should validate form successfully when form can be published" time="0.001">
    </testcase>
    <testcase classname="FormSharingTool validateFormForPublication should validate form with validation issues" name="FormSharingTool validateFormForPublication should validate form with validation issues" time="0">
    </testcase>
    <testcase classname="FormSharingTool validateFormForPublication should handle validation errors" name="FormSharingTool validateFormForPublication should handle validation errors" time="0.001">
    </testcase>
    <testcase classname="FormSharingTool edge cases and error handling should handle empty form IDs array in bulk operation" name="FormSharingTool edge cases and error handling should handle empty form IDs array in bulk operation" time="0.001">
    </testcase>
    <testcase classname="FormSharingTool edge cases and error handling should handle invalid email in notification emails" name="FormSharingTool edge cases and error handling should handle invalid email in notification emails" time="0">
    </testcase>
    <testcase classname="FormSharingTool edge cases and error handling should handle invalid datetime in publish date" name="FormSharingTool edge cases and error handling should handle invalid datetime in publish date" time="0">
    </testcase>
  </testsuite>
  <testsuite name="TeamManager" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:10" time="0.17" tests="30">
    <testcase classname="TeamManager constructor should create an instance with required dependencies" name="TeamManager constructor should create an instance with required dependencies" time="0.001">
    </testcase>
    <testcase classname="TeamManager constructor should create an instance with default config when none provided" name="TeamManager constructor should create an instance with default config when none provided" time="0.001">
    </testcase>
    <testcase classname="TeamManager createTeam should create a team successfully after validating workspace" name="TeamManager createTeam should create a team successfully after validating workspace" time="0">
    </testcase>
    <testcase classname="TeamManager createTeam should throw error if workspace validation fails" name="TeamManager createTeam should throw error if workspace validation fails" time="0.008">
    </testcase>
    <testcase classname="TeamManager getTeam should get team details successfully" name="TeamManager getTeam should get team details successfully" time="0.001">
    </testcase>
    <testcase classname="TeamManager getTeam should propagate service errors" name="TeamManager getTeam should propagate service errors" time="0">
    </testcase>
    <testcase classname="TeamManager updateTeam should update team without parent change" name="TeamManager updateTeam should update team without parent change" time="0.005">
    </testcase>
    <testcase classname="TeamManager updateTeam should validate hierarchy when changing parent team" name="TeamManager updateTeam should validate hierarchy when changing parent team" time="0.001">
    </testcase>
    <testcase classname="TeamManager updateTeam should handle setting parentTeamId to undefined" name="TeamManager updateTeam should handle setting parentTeamId to undefined" time="0.001">
    </testcase>
    <testcase classname="TeamManager deleteTeam should delete team without options" name="TeamManager deleteTeam should delete team without options" time="0">
    </testcase>
    <testcase classname="TeamManager deleteTeam should reassign members when reassignMembersTo option provided" name="TeamManager deleteTeam should reassign members when reassignMembersTo option provided" time="0.001">
    </testcase>
    <testcase classname="TeamManager deleteTeam should delete child teams when deleteChildTeams option is true" name="TeamManager deleteTeam should delete child teams when deleteChildTeams option is true" time="0.001">
    </testcase>
    <testcase classname="TeamManager deleteTeam should move child teams to parent when deleteChildTeams is false" name="TeamManager deleteTeam should move child teams to parent when deleteChildTeams is false" time="0">
    </testcase>
    <testcase classname="TeamManager getTeams should get teams list successfully" name="TeamManager getTeams should get teams list successfully" time="0.001">
    </testcase>
    <testcase classname="TeamManager getTeams should pass all options to service" name="TeamManager getTeams should pass all options to service" time="0">
    </testcase>
    <testcase classname="TeamManager addTeamMember should add team member with default role and permissions" name="TeamManager addTeamMember should add team member with default role and permissions" time="0.001">
    </testcase>
    <testcase classname="TeamManager addTeamMember should add team member with custom role and permissions" name="TeamManager addTeamMember should add team member with custom role and permissions" time="0">
    </testcase>
    <testcase classname="TeamManager addTeamMember should throw error if team validation fails" name="TeamManager addTeamMember should throw error if team validation fails" time="0.001">
    </testcase>
    <testcase classname="TeamManager removeTeamMember should remove team member successfully" name="TeamManager removeTeamMember should remove team member successfully" time="0">
    </testcase>
    <testcase classname="TeamManager updateTeamMember should update team member role and permissions" name="TeamManager updateTeamMember should update team member role and permissions" time="0.001">
    </testcase>
    <testcase classname="TeamManager updateTeamMember should update only role when permissions not provided" name="TeamManager updateTeamMember should update only role when permissions not provided" time="0">
    </testcase>
    <testcase classname="TeamManager bulkUpdateMemberships should perform bulk membership updates" name="TeamManager bulkUpdateMemberships should perform bulk membership updates" time="0.001">
    </testcase>
    <testcase classname="TeamManager moveUsersBetweenTeams should move users between teams successfully" name="TeamManager moveUsersBetweenTeams should move users between teams successfully" time="0.003">
    </testcase>
    <testcase classname="TeamManager moveUsersBetweenTeams should use default member role when newRole not provided" name="TeamManager moveUsersBetweenTeams should use default member role when newRole not provided" time="0.001">
    </testcase>
    <testcase classname="TeamManager moveTeam should move team to new parent" name="TeamManager moveTeam should move team to new parent" time="0">
    </testcase>
    <testcase classname="TeamManager moveTeam should make team a root team when newParentTeamId is undefined" name="TeamManager moveTeam should make team a root team when newParentTeamId is undefined" time="0.001">
    </testcase>
    <testcase classname="TeamManager edge cases and error handling should handle empty user array in moveUsersBetweenTeams" name="TeamManager edge cases and error handling should handle empty user array in moveUsersBetweenTeams" time="0">
    </testcase>
    <testcase classname="TeamManager edge cases and error handling should handle team with no members in deleteTeam with reassignment" name="TeamManager edge cases and error handling should handle team with no members in deleteTeam with reassignment" time="0.001">
    </testcase>
    <testcase classname="TeamManager edge cases and error handling should handle team with no child teams in deleteTeam" name="TeamManager edge cases and error handling should handle team with no child teams in deleteTeam" time="0">
    </testcase>
    <testcase classname="TeamManager method chaining should chain operations correctly" name="TeamManager method chaining should chain operations correctly" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="MonitoringServiceImpl" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:11" time="0.156" tests="6">
    <testcase classname="MonitoringServiceImpl trackRequest should track request metrics and log info" name="MonitoringServiceImpl trackRequest should track request metrics and log info" time="0.001">
    </testcase>
    <testcase classname="MonitoringServiceImpl trackRequest should handle requests with errors" name="MonitoringServiceImpl trackRequest should handle requests with errors" time="0">
    </testcase>
    <testcase classname="MonitoringServiceImpl trackApiCall should track a successful API call" name="MonitoringServiceImpl trackApiCall should track a successful API call" time="0.001">
    </testcase>
    <testcase classname="MonitoringServiceImpl trackApiCall should track a failed API call" name="MonitoringServiceImpl trackApiCall should track a failed API call" time="0">
    </testcase>
    <testcase classname="MonitoringServiceImpl trackError should track an error with context" name="MonitoringServiceImpl trackError should track an error with context" time="0.002">
    </testcase>
    <testcase classname="MonitoringServiceImpl trackExecution should track execution time of a labeled process" name="MonitoringServiceImpl trackExecution should track execution time of a labeled process" time="0">
    </testcase>
  </testsuite>
  <testsuite name="Environment Configuration" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:11" time="0.15" tests="13">
    <testcase classname="Environment Configuration should successfully parse valid environment variables" name="Environment Configuration should successfully parse valid environment variables" time="0.002">
    </testcase>
    <testcase classname="Environment Configuration should use default NODE_ENV when not provided" name="Environment Configuration should use default NODE_ENV when not provided" time="0.002">
    </testcase>
    <testcase classname="Environment Configuration should accept test environment" name="Environment Configuration should accept test environment" time="0.002">
    </testcase>
    <testcase classname="Environment Configuration should accept development environment" name="Environment Configuration should accept development environment" time="0.003">
    </testcase>
    <testcase classname="Environment Configuration should throw error when TALLY_API_KEY is missing" name="Environment Configuration should throw error when TALLY_API_KEY is missing" time="0.006">
    </testcase>
    <testcase classname="Environment Configuration should throw error when TALLY_API_KEY is empty" name="Environment Configuration should throw error when TALLY_API_KEY is empty" time="0.004">
    </testcase>
    <testcase classname="Environment Configuration should throw error when CLOUDFLARE_ACCOUNT_ID is missing" name="Environment Configuration should throw error when CLOUDFLARE_ACCOUNT_ID is missing" time="0.003">
    </testcase>
    <testcase classname="Environment Configuration should throw error when CLOUDFLARE_ACCOUNT_ID is empty" name="Environment Configuration should throw error when CLOUDFLARE_ACCOUNT_ID is empty" time="0.002">
    </testcase>
    <testcase classname="Environment Configuration should throw error when CLOUDFLARE_API_TOKEN is missing" name="Environment Configuration should throw error when CLOUDFLARE_API_TOKEN is missing" time="0.002">
    </testcase>
    <testcase classname="Environment Configuration should throw error when CLOUDFLARE_API_TOKEN is empty" name="Environment Configuration should throw error when CLOUDFLARE_API_TOKEN is empty" time="0.002">
    </testcase>
    <testcase classname="Environment Configuration should throw error when NODE_ENV is invalid" name="Environment Configuration should throw error when NODE_ENV is invalid" time="0.002">
    </testcase>
    <testcase classname="Environment Configuration should throw error when all required variables are missing" name="Environment Configuration should throw error when all required variables are missing" time="0.002">
    </testcase>
    <testcase classname="Environment Configuration should handle extra environment variables gracefully" name="Environment Configuration should handle extra environment variables gracefully" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="FormPublicationService" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:11" time="0.145" tests="21">
    <testcase classname="FormPublicationService getPublicationSettings should return default publication settings for a form" name="FormPublicationService getPublicationSettings should return default publication settings for a form" time="0.001">
    </testcase>
    <testcase classname="FormPublicationService updatePublicationSettings should update publication settings for a form" name="FormPublicationService updatePublicationSettings should update publication settings for a form" time="0.001">
    </testcase>
    <testcase classname="FormPublicationService publishForm should publish a form with default public visibility" name="FormPublicationService publishForm should publish a form with default public visibility" time="0.001">
    </testcase>
    <testcase classname="FormPublicationService publishForm should publish a form with password protection" name="FormPublicationService publishForm should publish a form with password protection" time="0">
    </testcase>
    <testcase classname="FormPublicationService unpublishForm should unpublish a form" name="FormPublicationService unpublishForm should unpublish a form" time="0.001">
    </testcase>
    <testcase classname="FormPublicationService generateEmbedCode should generate embed code with default settings" name="FormPublicationService generateEmbedCode should generate embed code with default settings" time="0.001">
    </testcase>
    <testcase classname="FormPublicationService generateEmbedCode should generate embed code with custom settings" name="FormPublicationService generateEmbedCode should generate embed code with custom settings" time="0.001">
    </testcase>
    <testcase classname="FormPublicationService generateShareLink should generate a standard share link" name="FormPublicationService generateShareLink should generate a standard share link" time="0.001">
    </testcase>
    <testcase classname="FormPublicationService generateShareLink should generate a password-protected share link with expiration" name="FormPublicationService generateShareLink should generate a password-protected share link with expiration" time="0.003">
    </testcase>
    <testcase classname="FormPublicationService generateShareLink should generate a share link with custom slug" name="FormPublicationService generateShareLink should generate a share link with custom slug" time="0.001">
    </testcase>
    <testcase classname="FormPublicationService getShareLinks should return empty array for forms with no share links" name="FormPublicationService getShareLinks should return empty array for forms with no share links" time="0.001">
    </testcase>
    <testcase classname="FormPublicationService updateShareLink should update a share link" name="FormPublicationService updateShareLink should update a share link" time="0.001">
    </testcase>
    <testcase classname="FormPublicationService deactivateShareLink should deactivate a share link" name="FormPublicationService deactivateShareLink should deactivate a share link" time="0">
    </testcase>
    <testcase classname="FormPublicationService getFormSharingStats should return default sharing statistics" name="FormPublicationService getFormSharingStats should return default sharing statistics" time="0.001">
    </testcase>
    <testcase classname="FormPublicationService getFormAnalytics should return analytics data for different periods" name="FormPublicationService getFormAnalytics should return analytics data for different periods" time="0.001">
    </testcase>
    <testcase classname="FormPublicationService performBulkOperation should perform bulk publish operation" name="FormPublicationService performBulkOperation should perform bulk publish operation" time="0.001">
    </testcase>
    <testcase classname="FormPublicationService performBulkOperation should handle bulk operation failures" name="FormPublicationService performBulkOperation should handle bulk operation failures" time="0">
    </testcase>
    <testcase classname="FormPublicationService validateFormForPublication should validate a form successfully" name="FormPublicationService validateFormForPublication should validate a form successfully" time="0">
    </testcase>
    <testcase classname="FormPublicationService validateFormForPublication should return validation errors for invalid form" name="FormPublicationService validateFormForPublication should return validation errors for invalid form" time="0.001">
    </testcase>
    <testcase classname="FormPublicationService validateFormForPublication should handle form not found" name="FormPublicationService validateFormForPublication should handle form not found" time="0">
    </testcase>
    <testcase classname="FormPublicationService validateFormForPublication should handle API errors gracefully" name="FormPublicationService validateFormForPublication should handle API errors gracefully" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="FormModificationParser" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:11" time="0.154" tests="50">
    <testcase classname="FormModificationParser Add Field Commands should parse &quot;add text field&quot; command" name="FormModificationParser Add Field Commands should parse &quot;add text field&quot; command" time="0.001">
    </testcase>
    <testcase classname="FormModificationParser Add Field Commands should parse &quot;add a new email field&quot; command" name="FormModificationParser Add Field Commands should parse &quot;add a new email field&quot; command" time="0.004">
    </testcase>
    <testcase classname="FormModificationParser Add Field Commands should parse &quot;add phone number field&quot; command" name="FormModificationParser Add Field Commands should parse &quot;add phone number field&quot; command" time="0.001">
    </testcase>
    <testcase classname="FormModificationParser Add Field Commands should handle unknown field types" name="FormModificationParser Add Field Commands should handle unknown field types" time="0">
    </testcase>
    <testcase classname="FormModificationParser Remove Field Commands should parse &quot;remove question 3&quot; command" name="FormModificationParser Remove Field Commands should parse &quot;remove question 3&quot; command" time="0.001">
    </testcase>
    <testcase classname="FormModificationParser Remove Field Commands should parse &quot;delete field number 5&quot; command" name="FormModificationParser Remove Field Commands should parse &quot;delete field number 5&quot; command" time="0">
    </testcase>
    <testcase classname="FormModificationParser Remove Field Commands should parse &quot;remove the email field&quot; command" name="FormModificationParser Remove Field Commands should parse &quot;remove the email field&quot; command" time="0.001">
    </testcase>
    <testcase classname="FormModificationParser Requirement Commands should parse &quot;make field 2 required&quot; command" name="FormModificationParser Requirement Commands should parse &quot;make field 2 required&quot; command" time="0">
    </testcase>
    <testcase classname="FormModificationParser Requirement Commands should parse &quot;make the email field required&quot; command" name="FormModificationParser Requirement Commands should parse &quot;make the email field required&quot; command" time="0.001">
    </testcase>
    <testcase classname="FormModificationParser Requirement Commands should parse &quot;make question 1 optional&quot; command" name="FormModificationParser Requirement Commands should parse &quot;make question 1 optional&quot; command" time="0.001">
    </testcase>
    <testcase classname="FormModificationParser Form Update Commands should parse update title command" name="FormModificationParser Form Update Commands should parse update title command" time="0">
    </testcase>
    <testcase classname="FormModificationParser Form Update Commands should parse update description command" name="FormModificationParser Form Update Commands should parse update description command" time="0.001">
    </testcase>
    <testcase classname="FormModificationParser Reorder Commands should parse &quot;move field 3 to position 1&quot; command" name="FormModificationParser Reorder Commands should parse &quot;move field 3 to position 1&quot; command" time="0">
    </testcase>
    <testcase classname="FormModificationParser Reorder Commands should parse &quot;move question 2 to 5&quot; command" name="FormModificationParser Reorder Commands should parse &quot;move question 2 to 5&quot; command" time="0.004">
    </testcase>
    <testcase classname="FormModificationParser Option Commands should parse add option command" name="FormModificationParser Option Commands should parse add option command" time="0">
    </testcase>
    <testcase classname="FormModificationParser Ambiguous Commands should handle completely unknown commands" name="FormModificationParser Ambiguous Commands should handle completely unknown commands" time="0.001">
    </testcase>
    <testcase classname="FormModificationParser Ambiguous Commands should detect low confidence commands as ambiguous" name="FormModificationParser Ambiguous Commands should detect low confidence commands as ambiguous" time="0">
    </testcase>
    <testcase classname="FormModificationParser Multiple Commands should parse multiple commands separated by &quot;and&quot;" name="FormModificationParser Multiple Commands should parse multiple commands separated by &quot;and&quot;" time="0.001">
    </testcase>
    <testcase classname="FormModificationParser Multiple Commands should parse multiple commands separated by commas" name="FormModificationParser Multiple Commands should parse multiple commands separated by commas" time="0">
    </testcase>
    <testcase classname="FormModificationParser Multiple Commands should parse multiple commands separated by &quot;then&quot;" name="FormModificationParser Multiple Commands should parse multiple commands separated by &quot;then&quot;" time="0">
    </testcase>
    <testcase classname="FormModificationParser Clarification Features should need clarification for low confidence commands" name="FormModificationParser Clarification Features should need clarification for low confidence commands" time="0">
    </testcase>
    <testcase classname="FormModificationParser Clarification Features should generate suggestions for add commands" name="FormModificationParser Clarification Features should generate suggestions for add commands" time="0">
    </testcase>
    <testcase classname="FormModificationParser Clarification Features should generate suggestions for required commands" name="FormModificationParser Clarification Features should generate suggestions for required commands" time="0.001">
    </testcase>
    <testcase classname="FormModificationParser Clarification Features should generate suggestions for remove commands" name="FormModificationParser Clarification Features should generate suggestions for remove commands" time="0">
    </testcase>
    <testcase classname="FormModificationParser Field Type Mapping should map &quot;text&quot; to correct QuestionType" name="FormModificationParser Field Type Mapping should map &quot;text&quot; to correct QuestionType" time="0">
    </testcase>
    <testcase classname="FormModificationParser Field Type Mapping should map &quot;input&quot; to correct QuestionType" name="FormModificationParser Field Type Mapping should map &quot;input&quot; to correct QuestionType" time="0.001">
    </testcase>
    <testcase classname="FormModificationParser Field Type Mapping should map &quot;textarea&quot; to correct QuestionType" name="FormModificationParser Field Type Mapping should map &quot;textarea&quot; to correct QuestionType" time="0">
    </testcase>
    <testcase classname="FormModificationParser Field Type Mapping should map &quot;long text&quot; to correct QuestionType" name="FormModificationParser Field Type Mapping should map &quot;long text&quot; to correct QuestionType" time="0">
    </testcase>
    <testcase classname="FormModificationParser Field Type Mapping should map &quot;email&quot; to correct QuestionType" name="FormModificationParser Field Type Mapping should map &quot;email&quot; to correct QuestionType" time="0.001">
    </testcase>
    <testcase classname="FormModificationParser Field Type Mapping should map &quot;email address&quot; to correct QuestionType" name="FormModificationParser Field Type Mapping should map &quot;email address&quot; to correct QuestionType" time="0">
    </testcase>
    <testcase classname="FormModificationParser Field Type Mapping should map &quot;number&quot; to correct QuestionType" name="FormModificationParser Field Type Mapping should map &quot;number&quot; to correct QuestionType" time="0">
    </testcase>
    <testcase classname="FormModificationParser Field Type Mapping should map &quot;numeric&quot; to correct QuestionType" name="FormModificationParser Field Type Mapping should map &quot;numeric&quot; to correct QuestionType" time="0.001">
    </testcase>
    <testcase classname="FormModificationParser Field Type Mapping should map &quot;phone&quot; to correct QuestionType" name="FormModificationParser Field Type Mapping should map &quot;phone&quot; to correct QuestionType" time="0">
    </testcase>
    <testcase classname="FormModificationParser Field Type Mapping should map &quot;phone number&quot; to correct QuestionType" name="FormModificationParser Field Type Mapping should map &quot;phone number&quot; to correct QuestionType" time="0">
    </testcase>
    <testcase classname="FormModificationParser Field Type Mapping should map &quot;url&quot; to correct QuestionType" name="FormModificationParser Field Type Mapping should map &quot;url&quot; to correct QuestionType" time="0.001">
    </testcase>
    <testcase classname="FormModificationParser Field Type Mapping should map &quot;website&quot; to correct QuestionType" name="FormModificationParser Field Type Mapping should map &quot;website&quot; to correct QuestionType" time="0">
    </testcase>
    <testcase classname="FormModificationParser Field Type Mapping should map &quot;date&quot; to correct QuestionType" name="FormModificationParser Field Type Mapping should map &quot;date&quot; to correct QuestionType" time="0">
    </testcase>
    <testcase classname="FormModificationParser Field Type Mapping should map &quot;time&quot; to correct QuestionType" name="FormModificationParser Field Type Mapping should map &quot;time&quot; to correct QuestionType" time="0.002">
    </testcase>
    <testcase classname="FormModificationParser Field Type Mapping should map &quot;rating&quot; to correct QuestionType" name="FormModificationParser Field Type Mapping should map &quot;rating&quot; to correct QuestionType" time="0.001">
    </testcase>
    <testcase classname="FormModificationParser Field Type Mapping should map &quot;stars&quot; to correct QuestionType" name="FormModificationParser Field Type Mapping should map &quot;stars&quot; to correct QuestionType" time="0">
    </testcase>
    <testcase classname="FormModificationParser Field Type Mapping should map &quot;file&quot; to correct QuestionType" name="FormModificationParser Field Type Mapping should map &quot;file&quot; to correct QuestionType" time="0">
    </testcase>
    <testcase classname="FormModificationParser Field Type Mapping should map &quot;upload&quot; to correct QuestionType" name="FormModificationParser Field Type Mapping should map &quot;upload&quot; to correct QuestionType" time="0">
    </testcase>
    <testcase classname="FormModificationParser Field Type Mapping should map &quot;signature&quot; to correct QuestionType" name="FormModificationParser Field Type Mapping should map &quot;signature&quot; to correct QuestionType" time="0">
    </testcase>
    <testcase classname="FormModificationParser Field Type Mapping should map &quot;choice&quot; to correct QuestionType" name="FormModificationParser Field Type Mapping should map &quot;choice&quot; to correct QuestionType" time="0">
    </testcase>
    <testcase classname="FormModificationParser Field Type Mapping should map &quot;multiple choice&quot; to correct QuestionType" name="FormModificationParser Field Type Mapping should map &quot;multiple choice&quot; to correct QuestionType" time="0">
    </testcase>
    <testcase classname="FormModificationParser Field Type Mapping should map &quot;select&quot; to correct QuestionType" name="FormModificationParser Field Type Mapping should map &quot;select&quot; to correct QuestionType" time="0">
    </testcase>
    <testcase classname="FormModificationParser Field Type Mapping should map &quot;dropdown&quot; to correct QuestionType" name="FormModificationParser Field Type Mapping should map &quot;dropdown&quot; to correct QuestionType" time="0">
    </testcase>
    <testcase classname="FormModificationParser Field Type Mapping should map &quot;checkboxes&quot; to correct QuestionType" name="FormModificationParser Field Type Mapping should map &quot;checkboxes&quot; to correct QuestionType" time="0">
    </testcase>
    <testcase classname="FormModificationParser Field Type Mapping should map &quot;scale&quot; to correct QuestionType" name="FormModificationParser Field Type Mapping should map &quot;scale&quot; to correct QuestionType" time="0">
    </testcase>
    <testcase classname="FormModificationParser Case Insensitivity should parse commands regardless of case" name="FormModificationParser Case Insensitivity should parse commands regardless of case" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="FormModificationTool" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:11" time="0.147" tests="18">
    <testcase classname="FormModificationTool constructor should create an instance with correct name and description" name="FormModificationTool constructor should create an instance with correct name and description" time="0.001">
    </testcase>
    <testcase classname="FormModificationTool constructor should initialize with TallyApiService" name="FormModificationTool constructor should initialize with TallyApiService" time="0">
    </testcase>
    <testcase classname="FormModificationTool execute should return error when formId is not provided" name="FormModificationTool execute should return error when formId is not provided" time="0.001">
    </testcase>
    <testcase classname="FormModificationTool execute should return error when form is not found" name="FormModificationTool execute should return error when form is not found" time="0.004">
    </testcase>
    <testcase classname="FormModificationTool execute should successfully retrieve form when it exists" name="FormModificationTool execute should successfully retrieve form when it exists" time="0">
    </testcase>
    <testcase classname="FormModificationTool execute should handle API errors gracefully" name="FormModificationTool execute should handle API errors gracefully" time="0.001">
    </testcase>
    <testcase classname="FormModificationTool getForm should return form when API call succeeds" name="FormModificationTool getForm should return form when API call succeeds" time="0">
    </testcase>
    <testcase classname="FormModificationTool getForm should return null when API call fails" name="FormModificationTool getForm should return null when API call fails" time="0.001">
    </testcase>
    <testcase classname="FormModificationTool getForms should return forms list when API call succeeds" name="FormModificationTool getForms should return forms list when API call succeeds" time="0">
    </testcase>
    <testcase classname="FormModificationTool getForms should pass options to API service" name="FormModificationTool getForms should pass options to API service" time="0.001">
    </testcase>
    <testcase classname="FormModificationTool getForms should return null when API call fails" name="FormModificationTool getForms should return null when API call fails" time="0.001">
    </testcase>
    <testcase classname="FormModificationTool updateForm should return updated form when API call succeeds" name="FormModificationTool updateForm should return updated form when API call succeeds" time="0">
    </testcase>
    <testcase classname="FormModificationTool updateForm should return null when API call fails" name="FormModificationTool updateForm should return null when API call fails" time="0.001">
    </testcase>
    <testcase classname="FormModificationTool patchForm should return patched form when API call succeeds" name="FormModificationTool patchForm should return patched form when API call succeeds" time="0">
    </testcase>
    <testcase classname="FormModificationTool patchForm should return null when API call fails" name="FormModificationTool patchForm should return null when API call fails" time="0.001">
    </testcase>
    <testcase classname="FormModificationTool validateConnection should return true when connection is valid" name="FormModificationTool validateConnection should return true when connection is valid" time="0">
    </testcase>
    <testcase classname="FormModificationTool validateConnection should return false when connection fails" name="FormModificationTool validateConnection should return false when connection fails" time="0.004">
    </testcase>
    <testcase classname="FormModificationTool validateConnection should return false when API returns null" name="FormModificationTool validateConnection should return false when API returns null" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="FormPermissionManager" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:11" time="0.152" tests="9">
    <testcase classname="FormPermissionManager setFormPermission should call FormPermissionService.setFormPermission with correct parameters" name="FormPermissionManager setFormPermission should call FormPermissionService.setFormPermission with correct parameters" time="0.001">
    </testcase>
    <testcase classname="FormPermissionManager updateFormPermission should call FormPermissionService.updateFormPermission with correct parameters" name="FormPermissionManager updateFormPermission should call FormPermissionService.updateFormPermission with correct parameters" time="0.001">
    </testcase>
    <testcase classname="FormPermissionManager removeFormPermission should call FormPermissionService.removeFormPermission and return success status" name="FormPermissionManager removeFormPermission should call FormPermissionService.removeFormPermission and return success status" time="0">
    </testcase>
    <testcase classname="FormPermissionManager setBulkFormPermissions should create bulk permission object and call service" name="FormPermissionManager setBulkFormPermissions should create bulk permission object and call service" time="0.001">
    </testcase>
    <testcase classname="FormPermissionManager getEffectivePermission should get workspace details and call service with workspace role" name="FormPermissionManager getEffectivePermission should get workspace details and call service with workspace role" time="0">
    </testcase>
    <testcase classname="FormPermissionManager canPerformAction should validate access and return boolean result" name="FormPermissionManager canPerformAction should validate access and return boolean result" time="0.004">
    </testcase>
    <testcase classname="FormPermissionManager inheritWorkspacePermissions should map workspace role to access level" name="FormPermissionManager inheritWorkspacePermissions should map workspace role to access level" time="0">
    </testcase>
    <testcase classname="FormPermissionManager overrideWorkspaceInheritance should set form permission with inheritFromWorkspace false" name="FormPermissionManager overrideWorkspaceInheritance should set form permission with inheritFromWorkspace false" time="0.002">
    </testcase>
    <testcase classname="FormPermissionManager getFormPermissionSummary should combine permissions and settings into a summary" name="FormPermissionManager getFormPermissionSummary should combine permissions and settings into a summary" time="0.005">
    </testcase>
  </testsuite>
  <testsuite name="FormModificationOperations" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:12" time="0.253" tests="26">
    <testcase classname="FormModificationOperations executeOperation should handle unknown operation types" name="FormModificationOperations executeOperation should handle unknown operation types" time="0">
    </testcase>
    <testcase classname="FormModificationOperations executeOperation should handle errors gracefully" name="FormModificationOperations executeOperation should handle errors gracefully" time="0.001">
    </testcase>
    <testcase classname="FormModificationOperations ADD_FIELD operation should add a text field successfully" name="FormModificationOperations ADD_FIELD operation should add a text field successfully" time="0.001">
    </testcase>
    <testcase classname="FormModificationOperations ADD_FIELD operation should add a choice field with options" name="FormModificationOperations ADD_FIELD operation should add a choice field with options" time="0">
    </testcase>
    <testcase classname="FormModificationOperations ADD_FIELD operation should generate default label when not provided" name="FormModificationOperations ADD_FIELD operation should generate default label when not provided" time="0">
    </testcase>
    <testcase classname="FormModificationOperations ADD_FIELD operation should fail when field type is missing" name="FormModificationOperations ADD_FIELD operation should fail when field type is missing" time="0">
    </testcase>
    <testcase classname="FormModificationOperations REMOVE_FIELD operation should remove field by number" name="FormModificationOperations REMOVE_FIELD operation should remove field by number" time="0.001">
    </testcase>
    <testcase classname="FormModificationOperations REMOVE_FIELD operation should remove field by label" name="FormModificationOperations REMOVE_FIELD operation should remove field by label" time="0.001">
    </testcase>
    <testcase classname="FormModificationOperations REMOVE_FIELD operation should fail when field is not found" name="FormModificationOperations REMOVE_FIELD operation should fail when field is not found" time="0.001">
    </testcase>
    <testcase classname="FormModificationOperations MAKE_REQUIRED/MAKE_OPTIONAL operations should make field required" name="FormModificationOperations MAKE_REQUIRED/MAKE_OPTIONAL operations should make field required" time="0">
    </testcase>
    <testcase classname="FormModificationOperations MAKE_REQUIRED/MAKE_OPTIONAL operations should make field optional" name="FormModificationOperations MAKE_REQUIRED/MAKE_OPTIONAL operations should make field optional" time="0">
    </testcase>
    <testcase classname="FormModificationOperations UPDATE_TITLE operation should update form title" name="FormModificationOperations UPDATE_TITLE operation should update form title" time="0.006">
    </testcase>
    <testcase classname="FormModificationOperations UPDATE_TITLE operation should fail when new title is missing" name="FormModificationOperations UPDATE_TITLE operation should fail when new title is missing" time="0.001">
    </testcase>
    <testcase classname="FormModificationOperations UPDATE_DESCRIPTION operation should update form description" name="FormModificationOperations UPDATE_DESCRIPTION operation should update form description" time="0.001">
    </testcase>
    <testcase classname="FormModificationOperations REORDER_FIELD operation should reorder field successfully" name="FormModificationOperations REORDER_FIELD operation should reorder field successfully" time="0.002">
    </testcase>
    <testcase classname="FormModificationOperations REORDER_FIELD operation should fail with invalid source position" name="FormModificationOperations REORDER_FIELD operation should fail with invalid source position" time="0.004">
    </testcase>
    <testcase classname="FormModificationOperations ADD_OPTION operation should add option to choice field" name="FormModificationOperations ADD_OPTION operation should add option to choice field" time="0.001">
    </testcase>
    <testcase classname="FormModificationOperations ADD_OPTION operation should fail when adding option to non-choice field" name="FormModificationOperations ADD_OPTION operation should fail when adding option to non-choice field" time="0">
    </testcase>
    <testcase classname="FormModificationOperations ADD_OPTION operation should fail when option text is missing" name="FormModificationOperations ADD_OPTION operation should fail when option text is missing" time="0">
    </testcase>
    <testcase classname="FormModificationOperations MODIFY_FIELD operation should modify field label" name="FormModificationOperations MODIFY_FIELD operation should modify field label" time="0.001">
    </testcase>
    <testcase classname="FormModificationOperations MODIFY_FIELD operation should modify multiple field properties" name="FormModificationOperations MODIFY_FIELD operation should modify multiple field properties" time="0">
    </testcase>
    <testcase classname="FormModificationOperations MODIFY_FIELD operation should fail when no modifications are specified" name="FormModificationOperations MODIFY_FIELD operation should fail when no modifications are specified" time="0.001">
    </testcase>
    <testcase classname="FormModificationOperations validateFormConfig should validate valid form configuration" name="FormModificationOperations validateFormConfig should validate valid form configuration" time="0">
    </testcase>
    <testcase classname="FormModificationOperations validateFormConfig should detect duplicate field IDs" name="FormModificationOperations validateFormConfig should detect duplicate field IDs" time="0">
    </testcase>
    <testcase classname="FormModificationOperations validateFormConfig should detect empty field labels" name="FormModificationOperations validateFormConfig should detect empty field labels" time="0">
    </testcase>
    <testcase classname="FormModificationOperations validateFormConfig should detect choice fields without options" name="FormModificationOperations validateFormConfig should detect choice fields without options" time="0">
    </testcase>
  </testsuite>
  <testsuite name="TemplateTool" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:12" time="0.154" tests="5">
    <testcase classname="TemplateTool execute should call listTemplates for the &apos;list&apos; action" name="TemplateTool execute should call listTemplates for the &apos;list&apos; action" time="0.001">
    </testcase>
    <testcase classname="TemplateTool execute should call useTemplate for the &apos;use&apos; action" name="TemplateTool execute should call useTemplate for the &apos;use&apos; action" time="0.007">
    </testcase>
    <testcase classname="TemplateTool execute should call customizeTemplate for the &apos;customize&apos; action" name="TemplateTool execute should call customizeTemplate for the &apos;customize&apos; action" time="0.001">
    </testcase>
    <testcase classname="TemplateTool execute should return an error if templateId is missing for the &apos;use&apos; action" name="TemplateTool execute should return an error if templateId is missing for the &apos;use&apos; action" time="0">
    </testcase>
    <testcase classname="TemplateTool execute should return an error for an invalid action" name="TemplateTool execute should return an error for an invalid action" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="Worker Module" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:12" time="0.155" tests="29">
    <testcase classname="Worker Module authenticateRequest should allow requests when no AUTH_TOKEN is configured" name="Worker Module authenticateRequest should allow requests when no AUTH_TOKEN is configured" time="0.001">
    </testcase>
    <testcase classname="Worker Module authenticateRequest should authenticate with valid Bearer token" name="Worker Module authenticateRequest should authenticate with valid Bearer token" time="0.004">
    </testcase>
    <testcase classname="Worker Module authenticateRequest should authenticate with valid X-API-Key header" name="Worker Module authenticateRequest should authenticate with valid X-API-Key header" time="0.001">
    </testcase>
    <testcase classname="Worker Module authenticateRequest should authenticate with valid query parameter" name="Worker Module authenticateRequest should authenticate with valid query parameter" time="0.001">
    </testcase>
    <testcase classname="Worker Module authenticateRequest should reject request with invalid Bearer token" name="Worker Module authenticateRequest should reject request with invalid Bearer token" time="0.001">
    </testcase>
    <testcase classname="Worker Module authenticateRequest should reject request with malformed Authorization header" name="Worker Module authenticateRequest should reject request with malformed Authorization header" time="0.001">
    </testcase>
    <testcase classname="Worker Module authenticateRequest should reject request with no authentication" name="Worker Module authenticateRequest should reject request with no authentication" time="0">
    </testcase>
    <testcase classname="Worker Module handleMCPMessage should handle initialize method" name="Worker Module handleMCPMessage should handle initialize method" time="0.001">
    </testcase>
    <testcase classname="Worker Module handleMCPMessage should handle notifications/initialized method" name="Worker Module handleMCPMessage should handle notifications/initialized method" time="0.001">
    </testcase>
    <testcase classname="Worker Module handleMCPMessage should handle tools/list method" name="Worker Module handleMCPMessage should handle tools/list method" time="0">
    </testcase>
    <testcase classname="Worker Module handleMCPMessage should handle tools/call method" name="Worker Module handleMCPMessage should handle tools/call method" time="0.001">
    </testcase>
    <testcase classname="Worker Module handleMCPMessage should return error for unknown method" name="Worker Module handleMCPMessage should return error for unknown method" time="0">
    </testcase>
    <testcase classname="Worker Module handleMCPMessage should handle exceptions gracefully" name="Worker Module handleMCPMessage should handle exceptions gracefully" time="0.001">
    </testcase>
    <testcase classname="Worker Module handleToolCall should execute tool successfully with valid API key" name="Worker Module handleToolCall should execute tool successfully with valid API key" time="0.001">
    </testcase>
    <testcase classname="Worker Module handleToolCall should return error when TALLY_API_KEY is missing" name="Worker Module handleToolCall should return error when TALLY_API_KEY is missing" time="0.003">
    </testcase>
    <testcase classname="Worker Module handleToolCall should handle different tool names" name="Worker Module handleToolCall should handle different tool names" time="0.001">
    </testcase>
    <testcase classname="Worker Module Fetch Handler should return error when TALLY_API_KEY is missing" name="Worker Module Fetch Handler should return error when TALLY_API_KEY is missing" time="0.009">
    </testcase>
    <testcase classname="Worker Module Fetch Handler should handle CORS preflight requests" name="Worker Module Fetch Handler should handle CORS preflight requests" time="0.001">
    </testcase>
    <testcase classname="Worker Module Fetch Handler should handle health check endpoint" name="Worker Module Fetch Handler should handle health check endpoint" time="0.001">
    </testcase>
    <testcase classname="Worker Module Fetch Handler should handle OAuth authorization server metadata" name="Worker Module Fetch Handler should handle OAuth authorization server metadata" time="0">
    </testcase>
    <testcase classname="Worker Module Fetch Handler should handle OAuth authorize endpoint" name="Worker Module Fetch Handler should handle OAuth authorize endpoint" time="0.001">
    </testcase>
    <testcase classname="Worker Module Fetch Handler should handle OAuth token endpoint" name="Worker Module Fetch Handler should handle OAuth token endpoint" time="0">
    </testcase>
    <testcase classname="Worker Module Fetch Handler should handle OAuth register endpoint" name="Worker Module Fetch Handler should handle OAuth register endpoint" time="0.001">
    </testcase>
    <testcase classname="Worker Module Fetch Handler should return 404 for unknown endpoints" name="Worker Module Fetch Handler should return 404 for unknown endpoints" time="0">
    </testcase>
    <testcase classname="Worker Module Session Management should create session storage" name="Worker Module Session Management should create session storage" time="0.001">
    </testcase>
    <testcase classname="Worker Module Session Management should handle session cleanup logic" name="Worker Module Session Management should handle session cleanup logic" time="0">
    </testcase>
    <testcase classname="Worker Module Type Definitions should define proper Env interface structure" name="Worker Module Type Definitions should define proper Env interface structure" time="0">
    </testcase>
    <testcase classname="Worker Module Type Definitions should define proper MCPRequest interface structure" name="Worker Module Type Definitions should define proper MCPRequest interface structure" time="0.003">
    </testcase>
    <testcase classname="Worker Module Type Definitions should define proper MCPResponse interface structure" name="Worker Module Type Definitions should define proper MCPResponse interface structure" time="0">
    </testcase>
  </testsuite>
  <testsuite name="Wrangler Configuration" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:12" time="0.218" tests="15">
    <testcase classname="Wrangler Configuration getWranglerConfig should successfully parse valid wrangler.toml" name="Wrangler Configuration getWranglerConfig should successfully parse valid wrangler.toml" time="0.006">
    </testcase>
    <testcase classname="Wrangler Configuration getWranglerConfig should successfully parse minimal valid wrangler.toml" name="Wrangler Configuration getWranglerConfig should successfully parse minimal valid wrangler.toml" time="0.002">
    </testcase>
    <testcase classname="Wrangler Configuration getWranglerConfig should use custom path when provided" name="Wrangler Configuration getWranglerConfig should use custom path when provided" time="0.003">
    </testcase>
    <testcase classname="Wrangler Configuration getWranglerConfig should throw error when file cannot be read" name="Wrangler Configuration getWranglerConfig should throw error when file cannot be read" time="0.012">
    </testcase>
    <testcase classname="Wrangler Configuration getWranglerConfig should throw error when TOML is invalid" name="Wrangler Configuration getWranglerConfig should throw error when TOML is invalid" time="0.004">
    </testcase>
    <testcase classname="Wrangler Configuration getWranglerConfig should throw error when name is missing" name="Wrangler Configuration getWranglerConfig should throw error when name is missing" time="0.002">
    </testcase>
    <testcase classname="Wrangler Configuration getWranglerConfig should throw error when name is empty" name="Wrangler Configuration getWranglerConfig should throw error when name is empty" time="0.003">
    </testcase>
    <testcase classname="Wrangler Configuration getWranglerConfig should throw error when compatibility_date is missing" name="Wrangler Configuration getWranglerConfig should throw error when compatibility_date is missing" time="0.002">
    </testcase>
    <testcase classname="Wrangler Configuration getWranglerConfig should throw error when compatibility_date format is invalid" name="Wrangler Configuration getWranglerConfig should throw error when compatibility_date format is invalid" time="0.046">
    </testcase>
    <testcase classname="Wrangler Configuration getWranglerConfig should throw error when kv_namespaces binding is missing" name="Wrangler Configuration getWranglerConfig should throw error when kv_namespaces binding is missing" time="0.001">
    </testcase>
    <testcase classname="Wrangler Configuration getWranglerConfig should throw error when kv_namespaces id is missing" name="Wrangler Configuration getWranglerConfig should throw error when kv_namespaces id is missing" time="0.002">
    </testcase>
    <testcase classname="Wrangler Configuration getWranglerConfig should warn when secrets are defined in plaintext" name="Wrangler Configuration getWranglerConfig should warn when secrets are defined in plaintext" time="0.001">
    </testcase>
    <testcase classname="Wrangler Configuration getWranglerConfig should not warn when no secrets are in plaintext" name="Wrangler Configuration getWranglerConfig should not warn when no secrets are in plaintext" time="0">
    </testcase>
    <testcase classname="Wrangler Configuration getWranglerConfig should handle secrets array correctly" name="Wrangler Configuration getWranglerConfig should handle secrets array correctly" time="0.001">
    </testcase>
    <testcase classname="Wrangler Configuration getWranglerConfig should handle multiple kv_namespaces" name="Wrangler Configuration getWranglerConfig should handle multiple kv_namespaces" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="SubmissionAnalysisTool" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:12" time="0.149" tests="12">
    <testcase classname="SubmissionAnalysisTool filterByDateRange should call SubmissionService.getFormSubmissions with the correct date range" name="SubmissionAnalysisTool filterByDateRange should call SubmissionService.getFormSubmissions with the correct date range" time="0.001">
    </testcase>
    <testcase classname="SubmissionAnalysisTool filterByDateRange should return the submissions from the service" name="SubmissionAnalysisTool filterByDateRange should return the submissions from the service" time="0.001">
    </testcase>
    <testcase classname="SubmissionAnalysisTool filterByStatus should call SubmissionService.getFormSubmissions with the correct status" name="SubmissionAnalysisTool filterByStatus should call SubmissionService.getFormSubmissions with the correct status" time="0">
    </testcase>
    <testcase classname="SubmissionAnalysisTool filterByStatus should return the submissions from the service" name="SubmissionAnalysisTool filterByStatus should return the submissions from the service" time="0.001">
    </testcase>
    <testcase classname="SubmissionAnalysisTool analyze should correctly analyze the submissions response" name="SubmissionAnalysisTool analyze should correctly analyze the submissions response" time="0">
    </testcase>
    <testcase classname="SubmissionAnalysisTool formatForAnalysis should correctly format submissions for analysis" name="SubmissionAnalysisTool formatForAnalysis should correctly format submissions for analysis" time="0.001">
    </testcase>
    <testcase classname="SubmissionAnalysisTool getAverageRating should calculate the average rating for a numeric question" name="SubmissionAnalysisTool getAverageRating should calculate the average rating for a numeric question" time="0.004">
    </testcase>
    <testcase classname="SubmissionAnalysisTool getAverageRating should return null if no numeric ratings are found" name="SubmissionAnalysisTool getAverageRating should return null if no numeric ratings are found" time="0.001">
    </testcase>
    <testcase classname="SubmissionAnalysisTool getResponseDistribution should calculate the response distribution for a question" name="SubmissionAnalysisTool getResponseDistribution should calculate the response distribution for a question" time="0">
    </testcase>
    <testcase classname="SubmissionAnalysisTool exportToCSV should export formatted submissions to a CSV file" name="SubmissionAnalysisTool exportToCSV should export formatted submissions to a CSV file" time="0.002">
    </testcase>
    <testcase classname="SubmissionAnalysisTool exportToJSON should export formatted submissions to a JSON file" name="SubmissionAnalysisTool exportToJSON should export formatted submissions to a JSON file" time="0.001">
    </testcase>
    <testcase classname="SubmissionAnalysisTool search should return submissions matching the search query" name="SubmissionAnalysisTool search should return submissions matching the search query" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="API Key Authentication Middleware" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:13" time="0.145" tests="19">
    <testcase classname="API Key Authentication Middleware API Key Extraction should extract API key from x-api-key header" name="API Key Authentication Middleware API Key Extraction should extract API key from x-api-key header" time="0.001">
    </testcase>
    <testcase classname="API Key Authentication Middleware API Key Extraction should extract API key from Bearer token" name="API Key Authentication Middleware API Key Extraction should extract API key from Bearer token" time="0">
    </testcase>
    <testcase classname="API Key Authentication Middleware API Key Extraction should extract API key from ApiKey prefix" name="API Key Authentication Middleware API Key Extraction should extract API key from ApiKey prefix" time="0.001">
    </testcase>
    <testcase classname="API Key Authentication Middleware API Key Extraction should extract API key from query parameter in non-production" name="API Key Authentication Middleware API Key Extraction should extract API key from query parameter in non-production" time="0.001">
    </testcase>
    <testcase classname="API Key Authentication Middleware IP Address Detection should detect IP from x-forwarded-for header" name="API Key Authentication Middleware IP Address Detection should detect IP from x-forwarded-for header" time="0.001">
    </testcase>
    <testcase classname="API Key Authentication Middleware IP Address Detection should detect IP from x-real-ip header" name="API Key Authentication Middleware IP Address Detection should detect IP from x-real-ip header" time="0">
    </testcase>
    <testcase classname="API Key Authentication Middleware IP Address Detection should detect IP from cf-connecting-ip header" name="API Key Authentication Middleware IP Address Detection should detect IP from cf-connecting-ip header" time="0.001">
    </testcase>
    <testcase classname="API Key Authentication Middleware Validation and Error Handling should handle missing API key" name="API Key Authentication Middleware Validation and Error Handling should handle missing API key" time="0">
    </testcase>
    <testcase classname="API Key Authentication Middleware Validation and Error Handling should handle expired API key" name="API Key Authentication Middleware Validation and Error Handling should handle expired API key" time="0.001">
    </testcase>
    <testcase classname="API Key Authentication Middleware Validation and Error Handling should handle revoked API key" name="API Key Authentication Middleware Validation and Error Handling should handle revoked API key" time="0">
    </testcase>
    <testcase classname="API Key Authentication Middleware Validation and Error Handling should handle usage limit exceeded" name="API Key Authentication Middleware Validation and Error Handling should handle usage limit exceeded" time="0.001">
    </testcase>
    <testcase classname="API Key Authentication Middleware Validation and Error Handling should handle IP whitelist violation" name="API Key Authentication Middleware Validation and Error Handling should handle IP whitelist violation" time="0">
    </testcase>
    <testcase classname="API Key Authentication Middleware Scope Validation should validate required scopes" name="API Key Authentication Middleware Scope Validation should validate required scopes" time="0.001">
    </testcase>
    <testcase classname="API Key Authentication Middleware Scope Validation should handle insufficient scopes" name="API Key Authentication Middleware Scope Validation should handle insufficient scopes" time="0.001">
    </testcase>
    <testcase classname="API Key Authentication Middleware Optional Authentication should allow requests without API key when optional" name="API Key Authentication Middleware Optional Authentication should allow requests without API key when optional" time="0">
    </testcase>
    <testcase classname="API Key Authentication Middleware Optional Authentication should still validate API key when provided in optional mode" name="API Key Authentication Middleware Optional Authentication should still validate API key when provided in optional mode" time="0.001">
    </testcase>
    <testcase classname="API Key Authentication Middleware Helper Functions should check if request is authenticated" name="API Key Authentication Middleware Helper Functions should check if request is authenticated" time="0.003">
    </testcase>
    <testcase classname="API Key Authentication Middleware Helper Functions should return API key info" name="API Key Authentication Middleware Helper Functions should return API key info" time="0">
    </testcase>
    <testcase classname="API Key Authentication Middleware Security Headers should set security headers on successful authentication" name="API Key Authentication Middleware Security Headers should set security headers on successful authentication" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="Tally API Client - Error Handling" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:13" time="0.139" tests="6">
    <testcase classname="Tally API Client - Error Handling should handle 401 Unauthorized errors" name="Tally API Client - Error Handling should handle 401 Unauthorized errors" time="0.015">
    </testcase>
    <testcase classname="Tally API Client - Error Handling should handle 403 Forbidden errors" name="Tally API Client - Error Handling should handle 403 Forbidden errors" time="0">
    </testcase>
    <testcase classname="Tally API Client - Error Handling should handle 404 Not Found errors" name="Tally API Client - Error Handling should handle 404 Not Found errors" time="0.001">
    </testcase>
    <testcase classname="Tally API Client - Error Handling should handle 422 Unprocessable Entity errors" name="Tally API Client - Error Handling should handle 422 Unprocessable Entity errors" time="0">
    </testcase>
    <testcase classname="Tally API Client - Error Handling should handle 429 Rate Limit errors" name="Tally API Client - Error Handling should handle 429 Rate Limit errors" time="0.001">
    </testcase>
    <testcase classname="Tally API Client - Error Handling should handle 500 Server errors" name="Tally API Client - Error Handling should handle 500 Server errors" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="Index Module" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:13" time="0.141" tests="13">
    <testcase classname="Index Module Environment Configuration should parse environment variables correctly" name="Index Module Environment Configuration should parse environment variables correctly" time="0.005">
    </testcase>
    <testcase classname="Index Module Environment Configuration should use default values when environment variables are missing" name="Index Module Environment Configuration should use default values when environment variables are missing" time="0.001">
    </testcase>
    <testcase classname="Index Module Environment Configuration should handle invalid PORT value" name="Index Module Environment Configuration should handle invalid PORT value" time="0">
    </testcase>
    <testcase classname="Index Module Environment Configuration should parse DEBUG as false for non-true values" name="Index Module Environment Configuration should parse DEBUG as false for non-true values" time="0.001">
    </testcase>
    <testcase classname="Index Module Server Initialization should create MCPServer instance and call required methods" name="Index Module Server Initialization should create MCPServer instance and call required methods" time="0.001">
    </testcase>
    <testcase classname="Index Module Server Initialization should handle server initialization failure" name="Index Module Server Initialization should handle server initialization failure" time="0.004">
    </testcase>
    <testcase classname="Index Module Server Initialization should handle getConfig method failure" name="Index Module Server Initialization should handle getConfig method failure" time="0.002">
    </testcase>
    <testcase classname="Index Module Module Exports should export MCPServer class" name="Index Module Module Exports should export MCPServer class" time="0.001">
    </testcase>
    <testcase classname="Index Module Module Exports should export main function as default" name="Index Module Module Exports should export main function as default" time="0.001">
    </testcase>
    <testcase classname="Index Module Process Error Handlers should register event listeners when module is loaded" name="Index Module Process Error Handlers should register event listeners when module is loaded" time="0">
    </testcase>
    <testcase classname="Index Module Configuration Parsing should correctly parse numeric port values" name="Index Module Configuration Parsing should correctly parse numeric port values" time="0.001">
    </testcase>
    <testcase classname="Index Module Configuration Parsing should handle various DEBUG string values" name="Index Module Configuration Parsing should handle various DEBUG string values" time="0.004">
    </testcase>
    <testcase classname="Index Module Error Handling should handle server method call failures gracefully" name="Index Module Error Handling should handle server method call failures gracefully" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="BlockBuilder utility" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:13" time="0.136" tests="28">
    <testcase classname="BlockBuilder utility createFormTitleBlock returns a FORM_TITLE block with correct payload and metadata" name="BlockBuilder utility createFormTitleBlock returns a FORM_TITLE block with correct payload and metadata" time="0.001">
    </testcase>
    <testcase classname="BlockBuilder utility createFormTitleBlock generates unique UUIDs for multiple calls" name="BlockBuilder utility createFormTitleBlock generates unique UUIDs for multiple calls" time="0">
    </testcase>
    <testcase classname="BlockBuilder utility createFormTitleBlock handles empty title string" name="BlockBuilder utility createFormTitleBlock handles empty title string" time="0.001">
    </testcase>
    <testcase classname="BlockBuilder utility createFormTitleBlock handles special characters in title" name="BlockBuilder utility createFormTitleBlock handles special characters in title" time="0">
    </testcase>
    <testcase classname="BlockBuilder utility createFormTitleBlock validates payload structure matches Tally API specification" name="BlockBuilder utility createFormTitleBlock validates payload structure matches Tally API specification" time="0.001">
    </testcase>
    <testcase classname="BlockBuilder utility createQuestionBlocks creates TITLE and INPUT_TEXT blocks for a simple text question" name="BlockBuilder utility createQuestionBlocks creates TITLE and INPUT_TEXT blocks for a simple text question" time="0.004">
    </testcase>
    <testcase classname="BlockBuilder utility createQuestionBlocks validates UUID format for all generated blocks" name="BlockBuilder utility createQuestionBlocks validates UUID format for all generated blocks" time="0.001">
    </testcase>
    <testcase classname="BlockBuilder utility createQuestionBlocks handles required field correctly" name="BlockBuilder utility createQuestionBlocks handles required field correctly" time="0">
    </testcase>
    <testcase classname="BlockBuilder utility createQuestionBlocks handles missing required property gracefully" name="BlockBuilder utility createQuestionBlocks handles missing required property gracefully" time="0">
    </testcase>
    <testcase classname="BlockBuilder utility createQuestionBlocks handles placeholder correctly" name="BlockBuilder utility createQuestionBlocks handles placeholder correctly" time="0.001">
    </testcase>
    <testcase classname="BlockBuilder utility createQuestionBlocks creates option blocks for dropdown questions" name="BlockBuilder utility createQuestionBlocks creates option blocks for dropdown questions" time="0">
    </testcase>
    <testcase classname="BlockBuilder utility createQuestionBlocks creates option blocks for multiple choice questions" name="BlockBuilder utility createQuestionBlocks creates option blocks for multiple choice questions" time="0">
    </testcase>
    <testcase classname="BlockBuilder utility createQuestionBlocks creates option blocks for checkbox questions" name="BlockBuilder utility createQuestionBlocks creates option blocks for checkbox questions" time="0">
    </testcase>
    <testcase classname="BlockBuilder utility createQuestionBlocks handles options with different formats" name="BlockBuilder utility createQuestionBlocks handles options with different formats" time="0">
    </testcase>
    <testcase classname="BlockBuilder utility createQuestionBlocks handles fields without options correctly" name="BlockBuilder utility createQuestionBlocks handles fields without options correctly" time="0.001">
    </testcase>
    <testcase classname="BlockBuilder utility createQuestionBlocks maps each QuestionType to the correct Tally block type" name="BlockBuilder utility createQuestionBlocks maps each QuestionType to the correct Tally block type" time="0.001">
    </testcase>
    <testcase classname="BlockBuilder utility createQuestionBlocks validates group metadata consistency" name="BlockBuilder utility createQuestionBlocks validates group metadata consistency" time="0">
    </testcase>
    <testcase classname="BlockBuilder utility createQuestionBlocks validates payload structure for non-option fields" name="BlockBuilder utility createQuestionBlocks validates payload structure for non-option fields" time="0">
    </testcase>
    <testcase classname="BlockBuilder utility createQuestionBlocks handles edge case: question with empty label" name="BlockBuilder utility createQuestionBlocks handles edge case: question with empty label" time="0">
    </testcase>
    <testcase classname="BlockBuilder utility createQuestionBlocks handles unknown question type gracefully" name="BlockBuilder utility createQuestionBlocks handles unknown question type gracefully" time="0">
    </testcase>
    <testcase classname="BlockBuilder utility buildBlocksForForm builds complete form with title and question blocks" name="BlockBuilder utility buildBlocksForForm builds complete form with title and question blocks" time="0.003">
    </testcase>
    <testcase classname="BlockBuilder utility buildBlocksForForm handles form with no questions" name="BlockBuilder utility buildBlocksForForm handles form with no questions" time="0">
    </testcase>
    <testcase classname="BlockBuilder utility buildBlocksForForm preserves question order in generated blocks" name="BlockBuilder utility buildBlocksForForm preserves question order in generated blocks" time="0.001">
    </testcase>
    <testcase classname="BlockBuilder utility buildBlocksForForm handles form with option-based questions" name="BlockBuilder utility buildBlocksForForm handles form with option-based questions" time="0">
    </testcase>
    <testcase classname="BlockBuilder utility buildBlocksForForm validates all blocks have proper UUID format" name="BlockBuilder utility buildBlocksForForm validates all blocks have proper UUID format" time="0">
    </testcase>
    <testcase classname="BlockBuilder utility Error handling and edge cases handles null/undefined inputs gracefully" name="BlockBuilder utility Error handling and edge cases handles null/undefined inputs gracefully" time="0.001">
    </testcase>
    <testcase classname="BlockBuilder utility Error handling and edge cases validates all required block properties are present" name="BlockBuilder utility Error handling and edge cases validates all required block properties are present" time="0">
    </testcase>
    <testcase classname="BlockBuilder utility Error handling and edge cases ensures UUIDs are properly formatted and unique" name="BlockBuilder utility Error handling and edge cases ensures UUIDs are properly formatted and unique" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="WorkspaceManagementTool" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:13" time="0.132" tests="5">
    <testcase classname="WorkspaceManagementTool listWorkspaces should call WorkspaceService.getWorkspaces and return the result" name="WorkspaceManagementTool listWorkspaces should call WorkspaceService.getWorkspaces and return the result" time="0.002">
    </testcase>
    <testcase classname="WorkspaceManagementTool getWorkspaceDetails should call WorkspaceService.getWorkspace and return the result" name="WorkspaceManagementTool getWorkspaceDetails should call WorkspaceService.getWorkspace and return the result" time="0">
    </testcase>
    <testcase classname="WorkspaceManagementTool inviteUserToWorkspace should call WorkspaceService.inviteUser with the correct parameters" name="WorkspaceManagementTool inviteUserToWorkspace should call WorkspaceService.inviteUser with the correct parameters" time="0">
    </testcase>
    <testcase classname="WorkspaceManagementTool removeUserFromWorkspace should call WorkspaceService.removeUser with the correct parameters" name="WorkspaceManagementTool removeUserFromWorkspace should call WorkspaceService.removeUser with the correct parameters" time="0.001">
    </testcase>
    <testcase classname="WorkspaceManagementTool updateUserRoleInWorkspace should call WorkspaceService.updateUserRole with the correct parameters" name="WorkspaceManagementTool updateUserRoleInWorkspace should call WorkspaceService.updateUserRole with the correct parameters" time="0">
    </testcase>
  </testsuite>
  <testsuite name="TallyApiClient Integration Tests" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:13" time="0.129" tests="9">
    <testcase classname="TallyApiClient Integration Tests Retry Configuration Integration should initialize with default retry configuration" name="TallyApiClient Integration Tests Retry Configuration Integration should initialize with default retry configuration" time="0.001">
    </testcase>
    <testcase classname="TallyApiClient Integration Tests Retry Configuration Integration should accept custom retry configuration" name="TallyApiClient Integration Tests Retry Configuration Integration should accept custom retry configuration" time="0.005">
    </testcase>
    <testcase classname="TallyApiClient Integration Tests Retry Configuration Integration should merge partial retry configuration with defaults" name="TallyApiClient Integration Tests Retry Configuration Integration should merge partial retry configuration with defaults" time="0.001">
    </testcase>
    <testcase classname="TallyApiClient Integration Tests Retry Configuration Integration should have interceptors set up when retry config is provided" name="TallyApiClient Integration Tests Retry Configuration Integration should have interceptors set up when retry config is provided" time="0">
    </testcase>
    <testcase classname="TallyApiClient Integration Tests Retry Configuration Integration should maintain backward compatibility when no retry config is provided" name="TallyApiClient Integration Tests Retry Configuration Integration should maintain backward compatibility when no retry config is provided" time="0.001">
    </testcase>
    <testcase classname="TallyApiClient Integration Tests Error Handling Configuration should have proper error types available for retry logic" name="TallyApiClient Integration Tests Error Handling Configuration should have proper error types available for retry logic" time="0">
    </testcase>
    <testcase classname="TallyApiClient Integration Tests Error Handling Configuration should create client with debug logging enabled" name="TallyApiClient Integration Tests Error Handling Configuration should create client with debug logging enabled" time="0.001">
    </testcase>
    <testcase classname="TallyApiClient Integration Tests Circuit Breaker Configuration should configure circuit breaker with custom settings" name="TallyApiClient Integration Tests Circuit Breaker Configuration should configure circuit breaker with custom settings" time="0">
    </testcase>
    <testcase classname="TallyApiClient Integration Tests Circuit Breaker Configuration should allow disabling circuit breaker" name="TallyApiClient Integration Tests Circuit Breaker Configuration should allow disabling circuit breaker" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="TemplateService" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:13" time="0.134" tests="12">
    <testcase classname="TemplateService getTemplates should return all available templates" name="TemplateService getTemplates should return all available templates" time="0.001">
    </testcase>
    <testcase classname="TemplateService findTemplateById should find a template by its ID" name="TemplateService findTemplateById should find a template by its ID" time="0">
    </testcase>
    <testcase classname="TemplateService findTemplateById should return undefined for a non-existent template ID" name="TemplateService findTemplateById should return undefined for a non-existent template ID" time="0">
    </testcase>
    <testcase classname="TemplateService instantiateTemplate should instantiate a form from a template" name="TemplateService instantiateTemplate should instantiate a form from a template" time="0.001">
    </testcase>
    <testcase classname="TemplateService instantiateTemplate should override the title if a custom title is provided" name="TemplateService instantiateTemplate should override the title if a custom title is provided" time="0">
    </testcase>
    <testcase classname="TemplateService instantiateTemplate should return undefined for a non-existent template ID" name="TemplateService instantiateTemplate should return undefined for a non-existent template ID" time="0">
    </testcase>
    <testcase classname="TemplateService instantiateTemplate should create a deep copy of the form configuration" name="TemplateService instantiateTemplate should create a deep copy of the form configuration" time="0.001">
    </testcase>
    <testcase classname="TemplateService createTemplate should create a new template and add it to the registry" name="TemplateService createTemplate should create a new template and add it to the registry" time="0">
    </testcase>
    <testcase classname="TemplateService updateTemplate should update an existing template" name="TemplateService updateTemplate should update an existing template" time="0.001">
    </testcase>
    <testcase classname="TemplateService updateTemplate should return undefined for a non-existent template ID" name="TemplateService updateTemplate should return undefined for a non-existent template ID" time="0">
    </testcase>
    <testcase classname="TemplateService deleteTemplate should delete an existing template" name="TemplateService deleteTemplate should delete an existing template" time="0.005">
    </testcase>
    <testcase classname="TemplateService deleteTemplate should return false for a non-existent template ID" name="TemplateService deleteTemplate should return false for a non-existent template ID" time="0">
    </testcase>
  </testsuite>
  <testsuite name="Matrix Question Support" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:13" time="0.126" tests="4">
    <testcase classname="Matrix Question Support Matrix Question Creation should create a matrix question with default configuration" name="Matrix Question Support Matrix Question Creation should create a matrix question with default configuration" time="0.001">
    </testcase>
    <testcase classname="Matrix Question Support Matrix Question Creation should include matrix in choice field types" name="Matrix Question Support Matrix Question Creation should include matrix in choice field types" time="0.001">
    </testcase>
    <testcase classname="Matrix Question Support Matrix Question Creation should generate appropriate default label for matrix questions" name="Matrix Question Support Matrix Question Creation should generate appropriate default label for matrix questions" time="0">
    </testcase>
    <testcase classname="Matrix Question Support Matrix Question Structure should have properly structured rows and columns" name="Matrix Question Support Matrix Question Structure should have properly structured rows and columns" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="WorkspaceService" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:14" time="0.128" tests="5">
    <testcase classname="WorkspaceService getWorkspaces should call TallyApiClient.getWorkspaces and return the result" name="WorkspaceService getWorkspaces should call TallyApiClient.getWorkspaces and return the result" time="0.001">
    </testcase>
    <testcase classname="WorkspaceService getWorkspace should call TallyApiClient.getWorkspace and return the result" name="WorkspaceService getWorkspace should call TallyApiClient.getWorkspace and return the result" time="0.001">
    </testcase>
    <testcase classname="WorkspaceService inviteUser should call TallyApiClient.inviteUserToWorkspace with the correct parameters" name="WorkspaceService inviteUser should call TallyApiClient.inviteUserToWorkspace with the correct parameters" time="0.001">
    </testcase>
    <testcase classname="WorkspaceService removeUser should call TallyApiClient.removeUserFromWorkspace with the correct parameters" name="WorkspaceService removeUser should call TallyApiClient.removeUserFromWorkspace with the correct parameters" time="0">
    </testcase>
    <testcase classname="WorkspaceService updateUserRole should call TallyApiClient.updateUserRole with the correct parameters" name="WorkspaceService updateUserRole should call TallyApiClient.updateUserRole with the correct parameters" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="Application Configuration" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:14" time="0.127" tests="6">
    <testcase classname="Application Configuration should load configuration from environment variables" name="Application Configuration should load configuration from environment variables" time="0.002">
    </testcase>
    <testcase classname="Application Configuration should use default values for optional variables" name="Application Configuration should use default values for optional variables" time="0.001">
    </testcase>
    <testcase classname="Application Configuration should throw an error if a required environment variable is missing" name="Application Configuration should throw an error if a required environment variable is missing" time="0.003">
    </testcase>
    <testcase classname="Application Configuration should throw an error for non-numeric number variables" name="Application Configuration should throw an error for non-numeric number variables" time="0.002">
    </testcase>
    <testcase classname="Application Configuration validateConfig should log success if all required config is present" name="Application Configuration validateConfig should log success if all required config is present" time="0.004">
    </testcase>
    <testcase classname="Application Configuration validateConfig should log an error and exit if required config is missing" name="Application Configuration validateConfig should log an error and exit if required config is missing" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="ValidationUtils" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:14" time="0.128" tests="22">
    <testcase classname="ValidationUtils createError should create a validation error with required fields" name="ValidationUtils createError should create a validation error with required fields" time="0.001">
    </testcase>
    <testcase classname="ValidationUtils createError should create a validation error with optional fields" name="ValidationUtils createError should create a validation error with optional fields" time="0">
    </testcase>
    <testcase classname="ValidationUtils formatPath should format simple path" name="ValidationUtils formatPath should format simple path" time="0.001">
    </testcase>
    <testcase classname="ValidationUtils formatPath should format array index path" name="ValidationUtils formatPath should format array index path" time="0">
    </testcase>
    <testcase classname="ValidationUtils formatPath should handle empty path" name="ValidationUtils formatPath should handle empty path" time="0">
    </testcase>
    <testcase classname="ValidationUtils formatPath should handle single element path" name="ValidationUtils formatPath should handle single element path" time="0.001">
    </testcase>
    <testcase classname="ValidationUtils isValidJsonSchemaType should return true for valid types" name="ValidationUtils isValidJsonSchemaType should return true for valid types" time="0.003">
    </testcase>
    <testcase classname="ValidationUtils isValidJsonSchemaType should return false for invalid types" name="ValidationUtils isValidJsonSchemaType should return false for invalid types" time="0">
    </testcase>
    <testcase classname="ValidationUtils isValidJsonSchemaType should handle null and undefined" name="ValidationUtils isValidJsonSchemaType should handle null and undefined" time="0.001">
    </testcase>
    <testcase classname="ValidationUtils mergeValidationResults should merge two validation results" name="ValidationUtils mergeValidationResults should merge two validation results" time="0">
    </testcase>
    <testcase classname="ValidationUtils mergeValidationResults should handle empty results" name="ValidationUtils mergeValidationResults should handle empty results" time="0.001">
    </testcase>
    <testcase classname="ValidationUtils validateRequired should validate required fields are present" name="ValidationUtils validateRequired should validate required fields are present" time="0">
    </testcase>
    <testcase classname="ValidationUtils validateRequired should return errors for missing required fields" name="ValidationUtils validateRequired should return errors for missing required fields" time="0.001">
    </testcase>
    <testcase classname="ValidationUtils validateRequired should handle empty required array" name="ValidationUtils validateRequired should handle empty required array" time="0">
    </testcase>
    <testcase classname="ValidationUtils validateRequired should handle null/undefined data" name="ValidationUtils validateRequired should handle null/undefined data" time="0">
    </testcase>
    <testcase classname="ValidationUtils sanitizeErrorMessage should sanitize error messages" name="ValidationUtils sanitizeErrorMessage should sanitize error messages" time="0.001">
    </testcase>
    <testcase classname="ValidationUtils sanitizeErrorMessage should preserve safe content" name="ValidationUtils sanitizeErrorMessage should preserve safe content" time="0">
    </testcase>
    <testcase classname="ValidationUtils sanitizeErrorMessage should handle empty and null messages" name="ValidationUtils sanitizeErrorMessage should handle empty and null messages" time="0.001">
    </testcase>
    <testcase classname="ValidationUtils getErrorSeverityLevel should return correct numeric levels for severities" name="ValidationUtils getErrorSeverityLevel should return correct numeric levels for severities" time="0">
    </testcase>
    <testcase classname="ValidationUtils getErrorSeverityLevel should handle invalid severity" name="ValidationUtils getErrorSeverityLevel should handle invalid severity" time="0">
    </testcase>
    <testcase classname="ValidationUtils sortErrorsBySeverity should sort errors by severity (highest first)" name="ValidationUtils sortErrorsBySeverity should sort errors by severity (highest first)" time="0">
    </testcase>
    <testcase classname="ValidationUtils sortErrorsBySeverity should handle empty array" name="ValidationUtils sortErrorsBySeverity should handle empty array" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="capability-negotiation" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:14" time="0.124" tests="8">
    <testcase classname="capability-negotiation negotiateCapabilities should return server defaults when no client capabilities provided" name="capability-negotiation negotiateCapabilities should return server defaults when no client capabilities provided" time="0.001">
    </testcase>
    <testcase classname="capability-negotiation negotiateCapabilities should throw StructuredError on protocol version mismatch" name="capability-negotiation negotiateCapabilities should throw StructuredError on protocol version mismatch" time="0.005">
    </testcase>
    <testcase classname="capability-negotiation negotiateCapabilities should negotiate tools capabilities correctly" name="capability-negotiation negotiateCapabilities should negotiate tools capabilities correctly" time="0">
    </testcase>
    <testcase classname="capability-negotiation negotiateCapabilities should negotiate resources capabilities correctly" name="capability-negotiation negotiateCapabilities should negotiate resources capabilities correctly" time="0.001">
    </testcase>
    <testcase classname="capability-negotiation negotiateCapabilities should negotiate prompts capabilities correctly" name="capability-negotiation negotiateCapabilities should negotiate prompts capabilities correctly" time="0">
    </testcase>
    <testcase classname="capability-negotiation negotiateCapabilities should negotiate logging capabilities correctly" name="capability-negotiation negotiateCapabilities should negotiate logging capabilities correctly" time="0">
    </testcase>
    <testcase classname="capability-negotiation negotiateCapabilities should handle partial client capabilities" name="capability-negotiation negotiateCapabilities should handle partial client capabilities" time="0.001">
    </testcase>
    <testcase classname="capability-negotiation negotiateCapabilities should handle all capabilities disabled by client" name="capability-negotiation negotiateCapabilities should handle all capabilities disabled by client" time="0">
    </testcase>
  </testsuite>
  <testsuite name="ValidationUtils" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:14" time="0.123" tests="15">
    <testcase classname="ValidationUtils createError should create a validation error with required fields" name="ValidationUtils createError should create a validation error with required fields" time="0.001">
    </testcase>
    <testcase classname="ValidationUtils createError should create a validation error with optional fields" name="ValidationUtils createError should create a validation error with optional fields" time="0">
    </testcase>
    <testcase classname="ValidationUtils createError should use default severity when not provided" name="ValidationUtils createError should use default severity when not provided" time="0">
    </testcase>
    <testcase classname="ValidationUtils mergeResults should merge multiple validation results" name="ValidationUtils mergeResults should merge multiple validation results" time="0.001">
    </testcase>
    <testcase classname="ValidationUtils mergeResults should handle empty results" name="ValidationUtils mergeResults should handle empty results" time="0">
    </testcase>
    <testcase classname="ValidationUtils mergeResults should handle single result" name="ValidationUtils mergeResults should handle single result" time="0">
    </testcase>
    <testcase classname="ValidationUtils formatError should format basic error" name="ValidationUtils formatError should format basic error" time="0.001">
    </testcase>
    <testcase classname="ValidationUtils formatError should format error with path" name="ValidationUtils formatError should format error with path" time="0">
    </testcase>
    <testcase classname="ValidationUtils formatError should format error with expected/actual values" name="ValidationUtils formatError should format error with expected/actual values" time="0">
    </testcase>
    <testcase classname="ValidationUtils formatError should format error with spec reference" name="ValidationUtils formatError should format error with spec reference" time="0.001">
    </testcase>
    <testcase classname="ValidationUtils calculateComplexity should calculate complexity for simple schema" name="ValidationUtils calculateComplexity should calculate complexity for simple schema" time="0">
    </testcase>
    <testcase classname="ValidationUtils calculateComplexity should calculate complexity for object schema" name="ValidationUtils calculateComplexity should calculate complexity for object schema" time="0">
    </testcase>
    <testcase classname="ValidationUtils calculateComplexity should calculate complexity for nested schema" name="ValidationUtils calculateComplexity should calculate complexity for nested schema" time="0.001">
    </testcase>
    <testcase classname="ValidationUtils calculateComplexity should handle null/undefined schema" name="ValidationUtils calculateComplexity should handle null/undefined schema" time="0">
    </testcase>
    <testcase classname="ValidationUtils calculateComplexity should handle empty schema" name="ValidationUtils calculateComplexity should handle empty schema" time="0">
    </testcase>
  </testsuite>
  <testsuite name="Tally API Client - Forms" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:14" time="0.122" tests="3">
    <testcase classname="Tally API Client - Forms should fetch forms and validate the response" name="Tally API Client - Forms should fetch forms and validate the response" time="0.001">
    </testcase>
    <testcase classname="Tally API Client - Forms should fetch a single form and validate the response" name="Tally API Client - Forms should fetch a single form and validate the response" time="0.001">
    </testcase>
    <testcase classname="Tally API Client - Forms should fetch form submissions and validate the response" name="Tally API Client - Forms should fetch form submissions and validate the response" time="0">
    </testcase>
  </testsuite>
  <testsuite name="Logger - Core Functionality" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:14" time="0.126" tests="15">
    <testcase classname="Logger - Core Functionality Constructor and Configuration should create logger with default configuration" name="Logger - Core Functionality Constructor and Configuration should create logger with default configuration" time="0.001">
    </testcase>
    <testcase classname="Logger - Core Functionality Constructor and Configuration should create logger with custom configuration" name="Logger - Core Functionality Constructor and Configuration should create logger with custom configuration" time="0.001">
    </testcase>
    <testcase classname="Logger - Core Functionality Constructor and Configuration should update configuration" name="Logger - Core Functionality Constructor and Configuration should update configuration" time="0">
    </testcase>
    <testcase classname="Logger - Core Functionality Child Logger Creation should create child logger with same config but different component" name="Logger - Core Functionality Child Logger Creation should create child logger with same config but different component" time="0">
    </testcase>
    <testcase classname="Logger - Core Functionality Child Logger Creation should create child logger with additional config" name="Logger - Core Functionality Child Logger Creation should create child logger with additional config" time="0.003">
    </testcase>
    <testcase classname="Logger - Core Functionality Trace ID Management should generate unique trace ID on creation" name="Logger - Core Functionality Trace ID Management should generate unique trace ID on creation" time="0.001">
    </testcase>
    <testcase classname="Logger - Core Functionality Trace ID Management should allow setting custom trace ID" name="Logger - Core Functionality Trace ID Management should allow setting custom trace ID" time="0">
    </testcase>
    <testcase classname="Logger - Core Functionality Sensitive Data Redaction should redact sensitive fields from context" name="Logger - Core Functionality Sensitive Data Redaction should redact sensitive fields from context" time="0.001">
    </testcase>
    <testcase classname="Logger - Core Functionality Sensitive Data Redaction should handle nested objects in redaction" name="Logger - Core Functionality Sensitive Data Redaction should handle nested objects in redaction" time="0">
    </testcase>
    <testcase classname="Logger - Core Functionality Sensitive Data Redaction should handle arrays in context" name="Logger - Core Functionality Sensitive Data Redaction should handle arrays in context" time="0.001">
    </testcase>
    <testcase classname="Logger - Core Functionality Factory Functions should create logger with createLogger function" name="Logger - Core Functionality Factory Functions should create logger with createLogger function" time="0">
    </testcase>
    <testcase classname="Logger - Core Functionality Factory Functions should provide global logger instance" name="Logger - Core Functionality Factory Functions should provide global logger instance" time="0">
    </testcase>
    <testcase classname="Logger - Core Functionality Edge Cases should handle null and undefined context values" name="Logger - Core Functionality Edge Cases should handle null and undefined context values" time="0.001">
    </testcase>
    <testcase classname="Logger - Core Functionality Log Level Behavior should respect log level thresholds" name="Logger - Core Functionality Log Level Behavior should respect log level thresholds" time="0">
    </testcase>
    <testcase classname="Logger - Core Functionality Operation Timing should provide timing functionality" name="Logger - Core Functionality Operation Timing should provide timing functionality" time="0.004">
    </testcase>
  </testsuite>
  <testsuite name="NlpService" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:15" time="0.124" tests="4">
    <testcase classname="NlpService customizeFormConfig should add a new question to the form" name="NlpService customizeFormConfig should add a new question to the form" time="0.001">
    </testcase>
    <testcase classname="NlpService customizeFormConfig should remove an existing question from the form" name="NlpService customizeFormConfig should remove an existing question from the form" time="0.001">
    </testcase>
    <testcase classname="NlpService customizeFormConfig should update the form title" name="NlpService customizeFormConfig should update the form title" time="0">
    </testcase>
    <testcase classname="NlpService customizeFormConfig should handle multiple commands" name="NlpService customizeFormConfig should handle multiple commands" time="0">
    </testcase>
  </testsuite>
  <testsuite name="Tally API Client - Workspaces and User" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:15" time="0.126" tests="2">
    <testcase classname="Tally API Client - Workspaces and User should fetch workspaces and validate the response" name="Tally API Client - Workspaces and User should fetch workspaces and validate the response" time="0.001">
    </testcase>
    <testcase classname="Tally API Client - Workspaces and User should fetch a single workspace and validate the response" name="Tally API Client - Workspaces and User should fetch a single workspace and validate the response" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="Network Resilience and Timeout" errors="0" failures="0" skipped="0" timestamp="2025-06-19T14:53:15" time="0.113" tests="1">
    <testcase classname="Network Resilience and Timeout should have tests" name="Network Resilience and Timeout should have tests" time="0">
    </testcase>
  </testsuite>
</testsuites>